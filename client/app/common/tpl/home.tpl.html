<p ng-if="!vm.isAuthenticated()">
	<a ui-sref="login">Login</a>
	<a ui-sref="register">Register</a>
</p>

<div ng-if="vm.isAuthenticated()">
	<div class="row">
		<div class="col-md-10">
			<div ng-repeat="image in vm.feed" class="row center-block">
				<div class="panel panel-default">
					<div class="panel-body">
						<img ng-src="{{image._author.avatarPath}}" alt="avatar" class="notification">
						<a ui-sref="user.gallery({username: image._author.username})">{{image._author.username}}</a> <br>
						<small>{{image.date | date: 'medium' }}</small>
						<br>
						<a ui-sref="user.gallery({username: image._author.username, openImage: image._id})">
							<img ng-src="{{image.data}}" alt="image" class="img-responsive feed">
						</a>
						<a href ng-show="image.likes.length > 0" data-placement="bottom" data-html="true" bs-tooltip="vm.tooltip($index)">{{image.likes.length}} likes</a> <br>
						<span ng-show="image.commentCount"> comments: {{image.commentCount}} </span>
						<button
								ng-class="image.isLiked ? 'btn btn-warning' : 'btn btn-info'"
								ng-click="image.isLiked ? vm.dislike(image._author.username, image._id, $index) : vm.like(image._author, image._id, $index)">
							{{image.isLiked ? 'Unlike' : 'Like'}}
						</button>
					</div>
				</div>
			</div>
			<button class="btn btn-primary" ng-click="vm.loadFeed()" ng-show="vm.user.feed.length > vm.loaded">Load more</button>
		</div>

		<div class="col-md-2">
			<h3>Latest users: </h3>
			<ul class="list-unstyled">
				<li ng-repeat="user in vm.users">
					<img ng-src="{{user.avatarPath}}" alt="avatar" class="comment-avatar">
					<a ui-sref="user.gallery({username: user.username})">{{user.username}}</a>
				</li>
			</ul>

			<a ui-sref="users">Browse all users</a>

		</div>
	</div>
</div>