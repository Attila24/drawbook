/**
 * State-based routing for AngularJS
 * @version v1.0.0alpha0-dev-2015-12-31
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports["ui.router"]=b():a["ui.router"]=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){a.exports=c(1)},function(a,b,c){var d=c(2);b.common=d;var e=c(36);b.params=e;var f=c(15);b.path=f;var g=c(17);b.resolve=g;var h=c(12);b.state=h;var i=c(9);b.transition=i;var j=c(34);b.url=j;var k=c(49);b.view=k,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]="ui.router"},function(a,b,c){function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(3)),d(c(4)),d(c(5)),d(c(6))},function(a,b){function c(a){function b(c){return c.length>=d?a.apply(null,c):function(){return b(c.concat([].slice.apply(arguments)))}}var c=[].slice.apply(arguments,[1]),d=a.length;return b(c)}function d(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}}function e(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return d.apply(null,[].slice.call(arguments).reverse())}function f(a,b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d-0]=arguments[d];return a.apply(null,c)&&b.apply(null,c)}}function g(a,b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d-0]=arguments[d];return a.apply(null,c)||b.apply(null,c)}}function h(a,b){return function(c){return c[a].apply(c,b)}}function i(a){return function(b){for(var c=0;c<a.length;c++)if(a[c][0](b))return a[c][1](b)}}function j(a){void 0===a&&(a={});for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=k.apply(null,[{}].concat(b));return J({},d,o(a||{},Object.keys(d)))}function k(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return I(b,function(b){I(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function l(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function m(a,b,c){void 0===c&&(c=Object.keys(a));for(var d=0;d<c.length;d++){var e=c[d];if(a[e]!=b[e])return!1}return!0}function n(a,b){var c={},d=Q(arguments,2);for(var e in b)a(d,e)&&(c[e]=b[e]);return c}function o(a){return n.apply(null,[R].concat(Q(arguments)))}function p(a){return n.apply(null,[b.not(R)].concat(Q(arguments)))}function q(a,c){return t(a,b.prop(c))}function r(a,b){var c=H(a),d=c?[]:{},e=c?function(a){return d.push(a)}:function(a,b){return d[b]=a};return I(a,function(a,c){b(a,c)&&e(a,c)}),d}function s(a,b){var c;return I(a,function(a,d){c||b(a,d)&&(c=a)}),c}function t(a,b){var c=H(a)?[]:{};return I(a,function(a,d){return c[d]=b(a,d)}),c}function u(a,b){return void 0===b&&(b="assert failure"),function(c){if(!a(c))throw new Error(b);return!0}}function v(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];if(0===a.length)return[];var d=a.reduce(function(a,b){return Math.min(b.length,a)},9007199254740991);return Array.apply(null,Array(d)).map(function(c,d){return a.map(function(a){return a[d]}).reduce(b.pushR,[])})}function w(a,b){var c,d;if(H(b)&&(c=b[0],d=b[1]),!F(c))throw new Error("invalid parameters to applyPairs");return a[c]=d,a}function x(a){if(H(a)&&a.length){var c=a.slice(0,-1),d=a.slice(-1);if(c.filter(b.not(F)).length||d.filter(b.not(D)).length)return!1}return D(a)}function y(a){var c=i([[H,function(a){return a.slice(-1)[0]}],[b.val(!0),P]])(a);return c&&c.toString()||"undefined"}function z(a,b){return b.length<=a?b:b.substr(0,a-3)+"..."}function A(a,b){for(;b.length<a;)b+=" ";return b}function B(a){return a.length&&a[a.length-1]||void 0}var C=angular.isDefined,D=angular.isFunction,E=angular.isNumber,F=angular.isString,G=angular.isObject,H=angular.isArray,I=angular.forEach,J=angular.extend,K=angular.copy,L=angular.noop,M=angular.toJson,N=angular.fromJson,O=angular.equals,P=angular.identity;b.isDefined=C,b.isFunction=D,b.isNumber=E,b.isString=F,b.isObject=G,b.isArray=H,b.forEach=I,b.extend=J,b.copy=K,b.noop=L,b.toJson=M,b.fromJson=N,b.equals=O,b.identity=P,b.abstractKey="abstract",b.curry=c,b.compose=d,b.pipe=e,b.prop=function(a){return function(b){return b&&b[a]}},b.propEq=c(function(a,b,c){return c&&c[a]===b}),b.parse=function(a){return e.apply(null,a.split(".").map(b.prop))},b.not=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];return!a.apply(null,b)}},b.and=f,b.or=g,b.is=function(a){return function(b){return null!=b&&b.constructor===a||b instanceof a}},b.eq=function(a){return function(b){return a===b}},b.val=function(a){return function(){return a}},b.invoke=h,b.pattern=i,b.inherit=function(a,b){return J(new(J(function(){},{prototype:a})),b)};var Q=function(a,b){return void 0===b&&(b=0),Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(a,b))},R=function(a,b){return-1!==a.indexOf(b)};b.removeFrom=function(a){return function(b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),a}},b.defaults=j,b.merge=k,b.mergeR=function(a,b){return J(a,b)},b.ancestors=l,b.equalForKeys=m,b.pick=o,b.omit=p,b.pluck=q,b.filter=r,b.find=s,b.map=t,b.values=function(a){return Object.keys(a).map(function(b){return a[b]})},b.allTrueR=function(a,b){return a&&b},b.anyTrueR=function(a,b){return a||b},b.pushR=function(a,b){return a.push(b),a},b.unnestR=function(a,b){return a.concat(b)},b.flattenR=function(a,c){return H(c)?a.concat(c.reduce(b.flattenR,[])):b.pushR(a,c)},b.unnest=function(a){return a.reduce(b.unnestR,[])},b.flatten=function(a){return a.reduce(b.flattenR,[])},b.assertPredicate=u,b.pairs=function(a){return Object.keys(a).map(function(b){return[b,a[b]]})},b.arrayTuples=v,b.applyPairs=w,b.isInjectable=x,b.isNull=function(a){return null===a},b.isPromise=f(G,e(b.prop("then"),D)),b.fnToString=y,b.maxLength=z,b.padString=A,b.tail=B,angular.module("ui.router.util",["ng","ui.router.init"]),angular.module("ui.router.router",["ui.router.util"]),angular.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),angular.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),angular.module("ui.router.compat",["ui.router"])},function(a,b){var c=function(a){return function(){throw new Error(a+"(): No coreservices implementation for UI-Router is loaded. You should include one of: ['angular1.js']")}},d={$q:void 0,$injector:void 0,location:{},locationConfig:{}};b.services=d,["replace","url","path","search","hash"].forEach(function(a){return d.location[a]=c(a)}),["port","protocol","host","baseHref","html5Mode","hashPrefix"].forEach(function(a){return d.locationConfig[a]=c(a)})},function(a,b){var c=function(){function a(a){void 0===a&&(a=[]),this._items=a}return a.prototype.enqueue=function(a){return this._items.push(a),a},a.prototype.dequeue=function(){return this.size()?this._items.splice(0,1)[0]:void 0},a.prototype.clear=function(){var a=this._items;return this._items=[],a},a.prototype.size=function(){return this._items.length},a.prototype.remove=function(a){var b=this._items.indexOf(a);return b>-1&&this._items.splice(b,1)[0]},a.prototype.peekTail=function(){return this._items[this._items.length-1]},a.prototype.peekHead=function(){return this.size()?this._items[0]:void 0},a}();b.Queue=c},function(a,b,c){function d(a){return j.is(m.TransitionRejection)(a.reason)?a.reason.toString():"Promise("+JSON.stringify(a)+")"}function e(a){var b=j.fnToString(a),c=b.match(/^(function [^ ]+\([^)]*\))/);return c?c[1]:b}function f(a){return j.isNumber(a)?i[a]:i[i[a]]}function g(a){var b=j.pattern([[j.not(j.isDefined),j.val("undefined")],[j.isNull,j.val("null")],[j.isPromise,d],[j.is(l.Transition),j.invoke("toString")],[j.is(k.Resolvable),j.invoke("toString")],[j.isInjectable,e],[j.val(!0),j.identity]]);return JSON.stringify(a,function(a,c){return b(c)}).replace(/\\"/g,'"')}function h(a){a.$watch(function(){q.approximateDigests++})}var i,j=c(3),k=c(7),l=c(8),m=c(28),n=function(a){return"ui-view id#"+a.id+", contextual name '"+a.name+"@"+a.creationContext+"', fqn: '"+a.fqn+"'"},o=function(a){return"ViewConfig targeting ui-view: '"+a.uiViewName+"@"+a.uiViewContextAnchor+"', context: '"+a.context.name+"'"};!function(a){a[a.RESOLVE=0]="RESOLVE",a[a.TRANSITION=1]="TRANSITION",a[a.HOOK=2]="HOOK",a[a.INVOKE=3]="INVOKE",a[a.UIVIEW=4]="UIVIEW",a[a.VIEWCONFIG=5]="VIEWCONFIG"}(i||(i={}));var p=function(){function a(){var a=this;this._enabled={},this.enable=function(){for(var b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];return a._set(!0,b)},this.disable=function(){for(var b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];return a._set(!1,b)},this.approximateDigests=0}return a.prototype._set=function(a,b){var c=this;b.length||(b=Object.keys(i).filter(function(a){return isNaN(parseInt(a,10))}).map(function(a){return i[a]})),b.map(f).forEach(function(b){return c._enabled[b]=a})},a.prototype.enabled=function(a){return!!this._enabled[f(a)]},a.prototype.traceTransitionStart=function(a){if(this.enabled(i.TRANSITION)){var b=a.$id,c=this.approximateDigests,d=g(a);console.log("Transition #"+b+" Digest #"+c+": Started  -> "+d)}},a.prototype.traceTransitionIgnored=function(a){if(this.enabled(i.TRANSITION)){var b=a.$id,c=this.approximateDigests,d=g(a);console.log("Transition #"+b+" Digest #"+c+": Ignored  <> "+d)}},a.prototype.traceHookInvocation=function(a,b){if(this.enabled(i.HOOK)){var c=j.parse("transition.$id")(b),d=this.approximateDigests,f=j.parse("traceData.hookType")(b)||"internal",g=j.parse("traceData.context.state.name")(b)||j.parse("traceData.context")(b)||"unknown",h=e(a.fn);console.log("Transition #"+c+" Digest #"+d+":   Hook -> "+f+" context: "+g+", "+j.maxLength(200,h))}},a.prototype.traceHookResult=function(a,b,c){if(this.enabled(i.HOOK)){var d=j.parse("transition.$id")(c),e=this.approximateDigests,f=g(a),h=g(b);console.log("Transition #"+d+" Digest #"+e+":   <- Hook returned: "+j.maxLength(200,f)+", transition result: "+j.maxLength(200,h))}},a.prototype.traceResolvePath=function(a,b){if(this.enabled(i.RESOLVE)){var c=j.parse("transition.$id")(b),d=this.approximateDigests,e=a&&a.toString(),f=b&&b.resolvePolicy;console.log("Transition #"+c+" Digest #"+d+":         Resolving "+e+" ("+f+")")}},a.prototype.traceResolvePathElement=function(a,b,c){if(this.enabled(i.RESOLVE)&&b.length){var d=j.parse("transition.$id")(c),e=this.approximateDigests,f=Object.keys(b).join(", "),g=a&&a.toString(),h=c&&c.resolvePolicy;console.log("Transition #"+d+" Digest #"+e+":         Resolve "+g+" resolvables: ["+f+"] ("+h+")")}},a.prototype.traceResolveResolvable=function(a,b){if(this.enabled(i.RESOLVE)){var c=j.parse("transition.$id")(b),d=this.approximateDigests,e=a&&a.toString();console.log("Transition #"+c+" Digest #"+d+":               Resolving -> "+e)}},a.prototype.traceResolvableResolved=function(a,b){if(this.enabled(i.RESOLVE)){var c=j.parse("transition.$id")(b),d=this.approximateDigests,e=a&&a.toString(),f=g(a.data);console.log("Transition #"+c+" Digest #"+d+":               <- Resolved  "+e+" to: "+j.maxLength(200,f))}},a.prototype.tracePathElementInvoke=function(a,b,c,d){if(this.enabled(i.INVOKE)){var f=j.parse("transition.$id")(d),g=this.approximateDigests,h=a&&a.state&&a.state.toString(),k=e(b);console.log("Transition #"+f+" Digest #"+g+":         Invoke "+d.when+": context: "+h+" "+j.maxLength(200,k))}},a.prototype.traceError=function(a,b){if(this.enabled(i.TRANSITION)){var c=b.$id,d=this.approximateDigests,e=g(b);console.log("Transition #"+c+" Digest #"+d+": <- Rejected "+e+", reason: "+a)}},a.prototype.traceSuccess=function(a,b){if(this.enabled(i.TRANSITION)){var c=b.$id,d=this.approximateDigests,e=a.name,f=g(b);console.log("Transition #"+c+" Digest #"+d+": <- Success  "+f+", final state: "+e)}},a.prototype.traceUiViewEvent=function(a,b,c){void 0===c&&(c=""),this.enabled(i.UIVIEW)&&console.log("ui-view: "+j.padString(30,a)+" "+n(b)+c)},a.prototype.traceUiViewConfigUpdated=function(a,b){this.enabled(i.UIVIEW)&&this.traceUiViewEvent("Updating",a," with ViewConfig from context='"+b+"'")},a.prototype.traceUiViewScopeCreated=function(a,b){this.enabled(i.UIVIEW)&&this.traceUiViewEvent("Created scope for",a,", scope #"+b.$id)},a.prototype.traceUiViewFill=function(a,b){this.enabled(i.UIVIEW)&&this.traceUiViewEvent("Fill",a," with: "+j.maxLength(200,b))},a.prototype.traceViewServiceEvent=function(a,b){this.enabled(i.VIEWCONFIG)&&console.log("$view.ViewConfig: "+a+" "+o(b))},a.prototype.traceViewServiceUiViewEvent=function(a,b){this.enabled(i.VIEWCONFIG)&&console.log("$view.ViewConfig: "+a+" "+n(b))},a}(),q=new p;b.trace=q,h.$inject=["$rootScope"],angular.module("ui.router").run(h),angular.module("ui.router").service("$trace",function(){return q})},function(a,b,c){var d=c(3),e=c(4),f=c(6),g=function(){function a(a,b,c){this.promise=void 0,d.extend(this,{name:a,resolveFn:b,deps:e.services.$injector.annotate(b),data:c})}return a.prototype.resolveResolvable=function(a,b){var c=this;void 0===b&&(b={});var g=this,h=g.name,i=g.deps,j=g.resolveFn;f.trace.traceResolveResolvable(this,b);var k=e.services.$q.defer();this.promise=k.promise;var l=a.getResolvables(null,{omitOwnLocals:[h]}),m=d.pick(l,i),n=d.map(m,function(c){return c.get(a,b)});return e.services.$q.all(n).then(function(a){try{var b=e.services.$injector.invoke(j,null,a);k.resolve(b)}catch(d){k.reject(d)}return c.promise}).then(function(a){return c.data=a,f.trace.traceResolvableResolved(c,b),c.promise})},a.prototype.get=function(a,b){return this.promise||this.resolveResolvable(a,b)},a.prototype.toString=function(){return"Resolvable(name: "+this.name+", requires: ["+this.deps+"])"},a.makeResolvables=function(b){var c=d.filter(b,d.not(d.isFunction)),e=Object.keys(c);if(e.length)throw new Error("Invalid resolve key/value: "+e[0]+"/"+c[e[0]]);return d.map(b,function(b,c){return new a(c,b)})},a}();b.Resolvable=g},function(a,b,c){var d=c(6),e=c(4),f=c(3),g=c(9),h=c(15),i=c(12),j=c(36),k=c(17),l=0,m=new g.RejectFactory,n=f.prop("self"),o=function(){function a(a,b){var c=this;if(this._deferred=e.services.$q.defer(),this.promise=this._deferred.promise,this.treeChanges=function(){return c._treeChanges},this.isActive=function(){return c===c._options.current()},!b.valid())throw new Error(b.error());g.HookRegistry.mixin(new g.HookRegistry,this),this._options=f.extend({current:f.val(this)},b.options()),this.$id=l++;var d=h.PathFactory.buildToPath(a,b);this._treeChanges=h.PathFactory.treeChanges(a,d,this._options.reloadState),h.PathFactory.bindTransitionResolve(this._treeChanges,this)}return a.prototype.$from=function(){return f.tail(this._treeChanges.from).state},a.prototype.$to=function(){return f.tail(this._treeChanges.to).state},a.prototype.from=function(){return this.$from().self},a.prototype.to=function(){return this.$to().self},a.prototype.is=function(b){return b instanceof a?this.is({to:b.$to().name,from:b.$from().name}):!(b.to&&!g.matchState(this.$to(),b.to)||b.from&&!g.matchState(this.$from(),b.from))},a.prototype.params=function(a){return void 0===a&&(a="to"),this._treeChanges[a].map(f.prop("values")).reduce(f.mergeR,{})},a.prototype.resolves=function(){return f.map(f.tail(this._treeChanges.to).resolveContext.getResolvables(),function(a){return a.data})},a.prototype.addResolves=function(a,b){void 0===b&&(b="");var c="string"==typeof b?b:b.name,d=this._treeChanges.to,e=f.find(d,function(a){return a.state.name===c});f.tail(d).resolveContext.addResolvables(k.Resolvable.makeResolvables(a),e.state)},a.prototype.previous=function(){return this._options.previous||null},a.prototype.options=function(){return this._options},a.prototype.entering=function(){return f.map(this._treeChanges.entering,f.prop("state")).map(n)},a.prototype.exiting=function(){return f.map(this._treeChanges.exiting,f.prop("state")).map(n).reverse()},a.prototype.retained=function(){return f.map(this._treeChanges.retained,f.prop("state")).map(n)},a.prototype.views=function(a,b){void 0===a&&(a="entering");var c=this._treeChanges[a];return b?f.find(c,f.propEq("state",b)).views:f.unnest(c.map(f.prop("views")))},a.prototype.redirect=function(b){var c=f.extend({},this.options(),b.options(),{previous:this});b=new i.TargetState(b.identifier(),b.$state(),b.params(),c);var d=new a(this._treeChanges.from,b),e=this.treeChanges().to,g=h.Node.matching(d.treeChanges().to,e),j=function(a,b){return-1===["$stateParams","$transition$"].indexOf(b)};return g.forEach(function(a,b){return f.extend(a.resolves,f.filter(e[b].resolves,j))}),d},a.prototype.ignored=function(){var a=this._treeChanges,b=a.to,c=a.from;if(this._options.reload||f.tail(b).state!==f.tail(c).state)return!1;var d=b.map(function(a){return a.schema.filter(f.not(f.prop("dynamic")))}),e=[b,c].map(function(a){return a.map(f.prop("values"))}),g=e[0],h=e[1],i=f.arrayTuples(d,g,h);return i.map(function(a){var b=a[0],c=a[1],d=a[2];return j.Param.equals(b,c,d)}).reduce(f.allTrueR,!0)},a.prototype.hookBuilder=function(){return new g.HookBuilder(g.$transitions,this,{transition:this,current:this._options.current})},a.prototype.run=function(){var a=this,b=this.hookBuilder(),c=g.TransitionHook.runSynchronousHooks,f=function(){return c(b.getOnSuccessHooks(),{},!0)},h=function(a){return c(b.getOnErrorHooks(),{$error$:a},!0)};this.promise.then(f,h);var i=c(b.getOnBeforeHooks());if(g.TransitionHook.isRejection(i)){var j=i.reason;return this._deferred.reject(j),this.promise}if(!this.valid()){var k=new Error(this.error());return this._deferred.reject(k),this.promise}if(this.ignored()){d.trace.traceTransitionIgnored(this);var l=m.ignored();return this._deferred.reject(l.reason),this.promise}var n=function(){a._deferred.resolve(a),d.trace.traceSuccess(a.$to(),a)},o=function(b){return a._deferred.reject(b),d.trace.traceError(b,a),e.services.$q.reject(b)};d.trace.traceTransitionStart(this);var p=b.asyncHooks().reduce(function(a,b){return a.then(b.invokeStep)},i);return p.then(n,o),this.promise},a.prototype.valid=function(){return!this.error()},a.prototype.error=function(){var a=this.$to();return a.self[f.abstractKey]?"Cannot transition to abstract state '"+a.name+"'":j.Param.validates(a.parameters(),this.params())?void 0:"Param values not valid for state '"+a.name+"'"},a.prototype.toString=function(){var a=this.from(),b=this.to(),c=function(a){return null!==a["#"]&&void 0!==a["#"]?a:f.omit(a,"#")},d=this.$id,e=f.isObject(a)?a.name:a,g=f.toJson(c(this._treeChanges.from.map(f.prop("values")).reduce(f.mergeR,{}))),h=this.valid()?"":"(X) ",i=f.isObject(b)?b.name:b,j=f.toJson(c(this.params()));return"Transition#"+d+"( '"+e+"'"+g+" -> "+h+"'"+i+"'"+j+" )"},a}();b.Transition=o},function(a,b,c){function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(10)),d(c(11)),d(c(28)),d(c(8)),d(c(47)),d(c(48))},function(a,b,c){var d=c(3),e=c(9),f=function(){function a(a,b,c){var e=this;this.$transitions=a,this.transition=b,this.baseHookOptions=c,this.getOnBeforeHooks=function(){return e._buildTransitionHooks("onBefore",{},{async:!1})},this.getOnStartHooks=function(){return e._buildTransitionHooks("onStart")},this.getOnExitHooks=function(){return e._buildNodeHooks("onExit",e.treeChanges.exiting.reverse(),function(a){return e._toFrom({from:a.state})})},this.getOnRetainHooks=function(){return e._buildNodeHooks("onRetain",e.treeChanges.retained,function(a){return e._toFrom()})},this.getOnEnterHooks=function(){return e._buildNodeHooks("onEnter",e.treeChanges.entering,function(a){return e._toFrom({to:a.state})})},this.getOnFinishHooks=function(){return e._buildTransitionHooks("onFinish",{$treeChanges$:e.treeChanges})},this.getOnSuccessHooks=function(){return e._buildTransitionHooks("onSuccess",{},{async:!1,rejectIfSuperseded:!1})},this.getOnErrorHooks=function(){return e._buildTransitionHooks("onError",{},{async:!1,rejectIfSuperseded:!1})},this.treeChanges=b.treeChanges(),this.toState=d.tail(this.treeChanges.to).state,this.fromState=d.tail(this.treeChanges.from).state,this.transitionOptions=b.options()}return a.prototype.asyncHooks=function(){var a=this.getOnStartHooks(),b=this.getOnExitHooks(),c=this.getOnRetainHooks(),e=this.getOnEnterHooks(),f=this.getOnFinishHooks();return d.flatten([a,b,c,e,f]).filter(d.identity)},a.prototype._toFrom=function(a){return d.extend({to:this.toState,from:this.fromState},a)},a.prototype._buildTransitionHooks=function(a,b,c){var e=this;void 0===b&&(b={}),void 0===c&&(c={});var f=this.treeChanges.to,g=d.tail(f);c.traceData={hookType:a,context:f};var h=function(a){return e.buildHook(g,a.callback,b,c)};return this._matchingHooks(a,this._toFrom()).map(h)},a.prototype._buildNodeHooks=function(a,b,c,d,e){var f=this;void 0===d&&(d={}),void 0===e&&(e={});var g=function(b){var g=c(b);e.traceData={hookType:a,context:b},d.$state$=b.state;var h=function(a){return f.buildHook(b,a.callback,d,e)};return f._matchingHooks(a,g).map(h)};return b.map(g)},a.prototype.buildHook=function(a,b,c,f){void 0===f&&(f={});var g=d.extend({},this.baseHookOptions,f);return new e.TransitionHook(b,d.extend({},c),a.resolveContext,g)},a.prototype._matchingHooks=function(a,b){var c=function(a){return a.matches(b.to,b.from)},e=function(a,b){return b.priority-a.priority};return[this.transition,this.$transitions].map(function(b){return b.getHooks(a)}).filter(d.assertPredicate(d.isArray,"broken event named: "+a)).reduce(d.unnestR).filter(c).sort(e)},a}();b.HookBuilder=f},function(a,b,c){function d(a,b){function c(a){for(var b=0;b<d.length;b++){var c=g.Glob.fromString(d[b]);if(c&&c.matches(a.name)||!c&&d[b]===a.name)return!0}return!1}var d=f.isString(b)?[b]:b,e=f.isFunction(d)?d:c;return!!e(a)}function e(a,b){return function(c,d,e){void 0===e&&(e={});var g=new h(c,d,e);return a[b].push(g),function(){f.removeFrom(a[b])(g)}}}var f=c(3),g=c(12);b.matchState=d;var h=function(){function a(a,b,c){void 0===c&&(c={}),this.callback=b,this.matchCriteria=f.extend({to:f.val(!0),from:f.val(!0)},a),this.priority=c.priority||0}return a.prototype.matches=function(a,b){return d(a,this.matchCriteria.to)&&d(b,this.matchCriteria.from)},a}();b.EventHook=h;var i=function(){function a(){var a=this;this._transitionEvents={onBefore:[],onStart:[],onEnter:[],onRetain:[],onExit:[],onFinish:[],onSuccess:[],onError:[]},this.getHooks=function(b){return a._transitionEvents[b]},this.onBefore=e(this._transitionEvents,"onBefore"),this.onStart=e(this._transitionEvents,"onStart"),this.onEnter=e(this._transitionEvents,"onEnter"),this.onRetain=e(this._transitionEvents,"onRetain"),this.onExit=e(this._transitionEvents,"onExit"),this.onFinish=e(this._transitionEvents,"onFinish"),this.onSuccess=e(this._transitionEvents,"onSuccess"),this.onError=e(this._transitionEvents,"onError")}return a.mixin=function(a,b){Object.keys(a._transitionEvents).concat(["getHooks"]).forEach(function(c){return b[c]=a[c]})},a}();b.HookRegistry=i},function(a,b,c){function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(13)),d(c(14)),d(c(41)),d(c(42)),d(c(43)),d(c(23)),d(c(44)),d(c(45)),d(c(46)),d(c(29))},function(a,b){var c=function(){function a(a){this.text=a,this.glob=a.split(".")}return a.prototype.matches=function(a){for(var b=a.split("."),c=0,d=this.glob.length;d>c;c++)"*"===this.glob[c]&&(b[c]="*");return"**"===this.glob[0]&&(b=b.slice(b.indexOf(this.glob[1])),b.unshift("**")),"**"===this.glob[this.glob.length-1]&&(b.splice(b.indexOf(this.glob[this.glob.length-2])+1,Number.MAX_VALUE),b.push("**")),this.glob.length!=b.length?!1:b.join("")===this.glob.join("")},a.is=function(a){return a.indexOf("*")>-1},a.fromString=function(b){return this.is(b)?new a(b):null},a}();b.Glob=c},function(a,b,c){function d(a,b){function c(a,b){return r.builder(a,b)||this}function d(a,b){return e.isObject(a)?b=a:b.name=a,s.register(b),this}function l(a){w.push(a)}function m(a,b,c,d,l,m){function r(c,d){function e(a){if(a instanceof g.TargetState){var b=a;return b=p.target(b.identifier(),b.params(),b.options()),b.valid()?j()!==k?v.superseded():p.transitionTo(b.identifier(),b.params(),b.options()):v.invalid(b.error())}}function h(){var a=m.dequeue();return void 0===a?v.invalid(d.error()):n(a).then(e).then(function(a){return a||h()})}var j=function(){return t.peekTail()||u.peekTail()},k=j(),l=i.PathFactory.makeTargetState(c),m=new f.Queue([].concat(w)),n=function(c){return a.when(b.invoke(c,null,{$to$:d,$from$:l}))};return h()}var x=m,y={name:"",url:"^",views:null,params:{"#":{value:null,type:"hash"}},"abstract":!0};n=s.register(y,!0),n.navigable=null;var z=function(){return i.PathFactory.bindTransNodesToPath([new i.Node(n,{})])};return c.rootContext(n),e.extend(p,{params:new k.StateParams,current:n.self,$current:n,transition:null}),s.flush(p),s.autoFlush=!0,p.reload=function(a){return p.transitionTo(p.current,d,{reload:e.isDefined(a)?a:!0,inherit:!1,notify:!1})},p.go=function(a,b,c){var d={relative:p.$current,inherit:!0},f=e.defaults(c,d,h.defaultTransOpts);return p.transitionTo(a,b,f)},p.target=function(a,b,c){void 0===c&&(c={});var d=q.find(a,c.relative);return new g.TargetState(a,d,b,c)},p.transitionTo=function(b,f,g){if(void 0===f&&(f={}),void 0===g&&(g={}),g=e.defaults(g,h.defaultTransOpts),g=e.extend(g,{current:t.peekTail.bind(t)}),e.isObject(g.reload)&&!g.reload.name)throw new Error("Invalid reload state object");if(g.reloadState=g.reload===!0?p.$current.path[0]:q.find(g.reload,g.relative),g.reload&&!g.reloadState)throw new Error("No such reload state '"+(e.isString(g.reload)?g.reload:g.reload.name)+"'");var i=p.target(b,f,g),k=u.peekTail(),m=k?k.to:z();if(!i.exists())return r(m,i);if(!i.valid())return a.reject(i.error());var n=x.create(m,i),o=new j.TransitionManager(n,x,l,c,p,d,a,t,u),s=o.runTransition();return e.extend(s,{transition:n})},p.is=function(a,b,c){c=e.defaults(c,{relative:p.$current});var f=q.find(a,c.relative);return e.isDefined(f)?p.$current!==f?!1:e.isDefined(b)&&null!==b?k.Param.equals(f.parameters(),d,b):!0:void 0},p.includes=function(a,b,c){c=e.defaults(c,{relative:p.$current});var f=e.isString(a)&&g.Glob.fromString(a);if(f){if(!f.matches(p.$current.name))return!1;a=p.$current.name}var h=q.find(a,c.relative),i=p.$current.includes;return e.isDefined(h)?e.isDefined(i[h.name])?b?e.equalForKeys(k.Param.values(h.parameters(),b),d,Object.keys(b)):!0:!1:void 0},p.href=function(a,b,c){var f={lossy:!0,inherit:!0,absolute:!1,relative:p.$current};c=e.defaults(c,f);var g=q.find(a,c.relative);if(!e.isDefined(g))return null;c.inherit&&(b=d.$inherit(b||{},p.$current,g));var h=g&&c.lossy?g.navigable:g;return h&&void 0!==h.url&&null!==h.url?l.href(h.url,k.Param.values(g.parameters(),b),{absolute:c.absolute}):null},p.get=function(a,b){if(0===arguments.length)return Object.keys(o).map(function(a){return o[a].self});var c=q.find(a,b||p.$current);return c&&c.self||null},p}var n,o={},p=function(){},q=new g.StateMatcher(o),r=new g.StateBuilder(function(){return n},q,b),s=new g.StateQueueManager(o,r,a,p),t=new f.Queue,u=new f.Queue,v=new h.RejectFactory;this.decorator=c,this.state=d;var w=[];this.onInvalid=l,this.$get=m,m.$inject=["$q","$injector","$view","$stateParams","$urlRouter","$transitions"]}var e=c(3),f=c(5),g=c(12),h=c(9),i=c(15),j=c(23),k=c(36);b.$StateProvider=d},function(a,b,c){function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(16)),d(c(22))},function(a,b,c){var d=c(3),e=c(17),f=c(21),g=function(){function a(a,b,c){void 0===c&&(c={}),this.state=a,this.schema=a.parameters({inherit:!1});var g=function(a){return[a.id,a.value(b[a.id])]};this.values=this.schema.reduce(function(a,b){return d.applyPairs(a,g(b))},{}),this.resolves=d.extend(d.map(a.resolve,function(a,b){return new e.Resolvable(b,a)}),c);var h=function(c,d){return new f.ViewConfig({rawViewName:d,viewDeclarationObj:c,context:a,params:b})};this.views=d.values(d.map(a.views,h))}return a.prototype.parameter=function(a){return d.find(this.schema,d.propEq("id",a))},a.prototype.equals=function(a,b){var c=this;void 0===b&&(b=this.schema.map(d.prop("id")));var e=function(b){return c.parameter(b).type.equals(c.values[b],a.values[b])};return this.state===a.state&&b.map(e).reduce(d.allTrueR,!0)},a.clone=function(b,c){return void 0===c&&(c={}),new a(b.state,c.values||b.values,c.resolves||b.resolves)},a.matching=function(a,b){var c=a.reduce(function(a,c,d){return a===d&&d<b.length&&c.state===b[d].state?d+1:a},0);return a.slice(0,c)},a}();b.Node=g},function(a,b,c){function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(7)),d(c(18)),d(c(20))},function(a,b,c){function d(a,b){var c=e.isString(a)?a:null,d=e.isObject(a)?a:{},f=d[b.name]||c||i;return h.ResolvePolicy[f]}var e=c(3),f=c(6),g=c(4),h=c(19),i=h.ResolvePolicy[h.ResolvePolicy.LAZY],j=function(){function a(a){this._path=a,e.extend(this,{_nodeFor:function(a){return e.find(this._path,e.propEq("state",a))},_pathTo:function(a){var b=this._nodeFor(a),c=this._path.indexOf(b);if(-1===c)throw new Error("This path does not contain the state");return this._path.slice(0,c+1)}})}return a.prototype.getResolvables=function(a,b){b=e.defaults(b,{omitOwnLocals:[]});var c=(e.find(this._path,e.propEq("")),a?this._pathTo(a):this._path),d=e.tail(c);return c.reduce(function(a,c){var f=c===d?b.omitOwnLocals:[],g=e.omit(c.resolves,f);return e.extend(a,g)},{})},a.prototype.getResolvablesForFn=function(a){var b=g.services.$injector.annotate(a);return e.pick(this.getResolvables(),b)},a.prototype.isolateRootTo=function(b){return new a(this._pathTo(b))},a.prototype.addResolvables=function(a,b){e.extend(this._nodeFor(b).resolves,a)},a.prototype.getOwnResolvables=function(a){return e.extend({},this._nodeFor(a).resolves)},a.prototype.resolvePath=function(a){var b=this;void 0===a&&(a={}),f.trace.traceResolvePath(this._path,a);var c=function(c){return b.resolvePathElement(c.state,a)};return g.services.$q.all(e.map(this._path,c)).then(e.noop)},a.prototype.resolvePathElement=function(a,b){var c=this;void 0===b&&(b={});var j=b&&b.resolvePolicy,k=h.ResolvePolicy[j||i],l=this.getOwnResolvables(a),m=function(b){return d(a.resolvePolicy,b)>=k},n=e.filter(l,m),o=function(d){return d.get(c.isolateRootTo(a),b)},p=e.map(n,o);return f.trace.traceResolvePathElement(this,n,b),g.services.$q.all(p).then(e.noop)},a.prototype.invokeLater=function(a,b,c){var d=this;void 0===b&&(b={}),void 0===c&&(c={});var h=this.getResolvablesForFn(a);f.trace.tracePathElementInvoke(e.tail(this._path),a,Object.keys(h),e.extend({when:"Later"},c));var i=function(a){return a.get(d,c)},j=e.map(h,i);return g.services.$q.all(j).then(function(){try{return d.invokeNow(a,b,c)}catch(e){return g.services.$q.reject(e)}})},a.prototype.invokeNow=function(a,b,c){void 0===c&&(c={});var d=this.getResolvablesForFn(a);f.trace.tracePathElementInvoke(e.tail(this._path),a,Object.keys(d),e.extend({when:"Now  "},c));var h=e.map(d,e.prop("data"));return g.services.$injector.invoke(a,null,e.extend({},b,h))},a}();b.ResolveContext=j},function(a,b){!function(a){a[a.JIT=0]="JIT",a[a.LAZY=1]="LAZY",a[a.EAGER=2]="EAGER"}(b.ResolvePolicy||(b.ResolvePolicy={}));b.ResolvePolicy},function(a,b,c){var d=c(3),e=function(){function a(a,b){this._resolveContext=a,this._state=b}return a.prototype.invokeLater=function(a,b){return this._resolveContext.invokeLater(a,b)},a.prototype.invokeNow=function(a,b){return this._resolveContext.invokeNow(null,a,b)},a.prototype.getLocals=function(a){var b=this,c=function(a){return a.get(b._resolveContext)};return d.map(this._resolveContext.getResolvablesForFn(a),c)},a}();b.ResolveInjector=e},function(a,b,c){"use strict";function d(a){void 0===a&&(a="");var b=a.split("@"),c=b[0]||"$default",d=f.isString(b[1])?b[1]:"^",e=/^(\^(?:\.\^)*)\.(.*$)/.exec(c);return e&&(d=e[1],c=e[2]),"!"===c.charAt(0)&&(c=c.substr(1),d=""),{uiViewName:c,uiViewContextAnchor:d}}function e(a,b,c,d){var e=[],h=[],i=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return function(c){return b.reduce(function(b,d){return b&&a[d]===c[d]},!0)}};this.rootContext=function(a){return a?this._rootContext=a:this._rootContext},this.load=function(a,d){if(!a.hasTemplate())throw new Error("No template configuration specified for '"+a.uiViewName+"@"+a.uiViewContextAnchor+"'");
var e={template:c.when(a.getTemplate(b,d)),controller:c.when(a.getController(d))};return c.all(e).then(function(b){return g.trace.traceViewServiceEvent("Loaded",a),f.extend(a,b)})},this.reset=function(a){g.trace.traceViewServiceEvent("<- Removing",a),h.filter(i(a,"uiViewName","context")).forEach(f.removeFrom(h))},this.registerStateViewConfig=function(a){g.trace.traceViewServiceEvent("-> Registering",a),h.push(a)},this.sync=function(){function a(a){return a.fqn.split(".").length}function b(a){for(var b=a.context,c=0;++c&&b.parent;)b=b.parent;return c}var c=e.map(function(a){return[a.fqn,a]}).reduce(f.applyPairs,{}),d=f.curry(function(a,b){var d=b.uiViewName.split("."),e=a.fqn.split(".");if(!angular.equals(d,e.slice(0-d.length)))return!1;var f=1-d.length||void 0,g=e.slice(0,f).join("."),h=c[g].creationContext;return b.uiViewContextAnchor===(h&&h.name)}),g=f.curry(function(a,b,c,d){return b*(a(c)-a(d))}),i=function(a){var c=h.filter(d(a));return c.length>1&&c.sort(g(b,-1)),[a,c[0]]},j=function(a){var b=a[0],c=a[1];-1!==e.indexOf(b)&&b.configUpdated(c)};e.sort(g(a,1)).map(i).forEach(j)},this.registerUiView=function(a){g.trace.traceViewServiceUiViewEvent("-> Registering",a);var b=function(b){return b.fqn===a.fqn};return e.filter(b).length&&g.trace.traceViewServiceUiViewEvent("!!!! duplicate uiView named:",a),e.push(a),this.sync(),function(){var b=e.indexOf(a);return 0>=b?void g.trace.traceViewServiceUiViewEvent("Tried removing non-registered uiView",a):(g.trace.traceViewServiceUiViewEvent("<- Deregistering",a),void f.removeFrom(e)(a))}},this.available=function(){return e.map(f.prop("fqn"))},this.active=function(){return e.filter(f.prop("$config")).map(f.prop("name"))}}var f=c(3),g=c(2),h=function(){function a(a){var b=d(a.rawViewName),c=b.uiViewName,e=b.uiViewContextAnchor,g=/^(\^(?:\.\^)*)$/;if(g.exec(e)){var h=e.split(".").reduce(function(a,b){return a.parent},a.context);e=h.name}f.extend(this,f.pick(a,"viewDeclarationObj","params","context","locals"),{uiViewName:c,uiViewContextAnchor:e}),this.controllerAs=a.viewDeclarationObj.controllerAs}return a.prototype.hasTemplate=function(){var a=this.viewDeclarationObj;return!!(a.template||a.templateUrl||a.templateProvider)},a.prototype.getTemplate=function(a,b){return a.fromConfig(this.viewDeclarationObj,this.params,b.invokeLater.bind(b))},a.prototype.getController=function(a){var b=this.viewDeclarationObj.controllerProvider;return f.isInjectable(b)?a.invokeLater(b,{}):this.viewDeclarationObj.controller},a}();b.ViewConfig=h,e.$inject=["$rootScope","$templateFactory","$q","$timeout"],angular.module("ui.router.state").service("$view",e)},function(a,b,c){var d=c(3),e=c(12),f=c(15),g=c(17),h=function(){function a(){}return a.makeTargetState=function(a){var b=d.tail(a).state;return new e.TargetState(b,b,a.map(d.prop("values")).reduce(d.mergeR,{}))},a.buildToPath=function(b,c){var d=c.params(),e=a.makeParamsNode(d),f=c.$state().path.map(e);return c.options().inherit&&(f=a.inheritParams(b,f,Object.keys(d))),f},a.inheritParams=function(a,b,c){function e(a,b){var c=d.find(a,d.propEq("state",b));return d.extend({},c&&c.values)}void 0===c&&(c=[]);var g=d.curry(function(a,b,c){var g=d.extend({},c&&c.values),h=d.pick(g,b);g=d.omit(g,b);var i=e(a,c.state)||{},j=d.extend(g,i,h);return new f.Node(c.state,j)});return b.map(g(a,c))},a.bindTransNodesToPath=function(a){var b=new g.ResolveContext(a);return a.forEach(function(a){a.resolveContext=b.isolateRootTo(a.state),a.resolveInjector=new g.ResolveInjector(a.resolveContext,a.state),a.resolves.$stateParams=new g.Resolvable("$stateParams",function(){return a.values},a.values)}),a},a.treeChanges=function(b,c,e){function g(a,b){return f.Node.clone(a,{values:c[b].values})}for(var h=0,i=Math.min(b.length,c.length),j=function(a){return a.parameters({inherit:!1}).filter(d.not(d.prop("dynamic"))).map(d.prop("id"))},k=function(a,b){return a.equals(b,j(a.state))};i>h&&b[h].state!==e&&k(b[h],c[h]);)h++;var l,m,n,o,p,q,r,s;return l=b,m=l.slice(0,h),n=l.slice(h),q=m.map(g),r=c.slice(h),s=q.concat(r),p=a.bindTransNodesToPath(s),o=p.slice(h),{from:l,to:p,retained:m,exiting:n,entering:o}},a.bindTransitionResolve=function(a,b){var c=a.to[0];c.resolves.$transition$=new g.Resolvable("$transition$",function(){return b},b)},a.makeParamsNode=d.curry(function(a,b){return new f.Node(b,a)}),a}();b.PathFactory=h},function(a,b,c){var d=c(3),e=c(24),f=c(28),g=c(29),h=c(30),i=c(39),j=c(40),k=function(){function a(a,b,c,d,e,f,g,k,l){this.transition=a,this.$transitions=b,this.$urlRouter=c,this.$view=d,this.$state=e,this.$stateParams=f,this.$q=g,this.activeTransQ=k,this.changeHistory=l,this.viewHooks=new h.ViewHooks(a,d),this.enterExitHooks=new i.EnterExitHooks(a),this.resolveHooks=new j.ResolveHooks(a),this.treeChanges=a.treeChanges(),this.registerUpdateGlobalState(),this.viewHooks.registerHooks(),this.enterExitHooks.registerHooks(),this.resolveHooks.registerHooks()}return a.prototype.runTransition=function(){var a=this;return this.activeTransQ.clear(),this.activeTransQ.enqueue(this.transition),this.transition.run().then(function(a){return a.to()})["catch"](function(b){return a.transRejected(b)})["finally"](function(){return a.activeTransQ.remove(a.transition)})},a.prototype.registerUpdateGlobalState=function(){this.transition.onFinish({},this.updateGlobalState.bind(this),{priority:-1e4})},a.prototype.updateGlobalState=function(){var a=this,b=a.treeChanges,c=a.transition,d=a.$state,e=a.changeHistory;d.$current=c.$to(),d.current=d.$current.self,e.enqueue(b),this.updateStateParams()},a.prototype.transRejected=function(a){var b=this,c=b.transition,h=b.$state,i=b.$stateParams,j=b.$q;if(a instanceof f.TransitionRejection){if(a.type===f.RejectType.IGNORED){var k=h.$current.parameters().filter(d.prop("dynamic"));return e.Param.equals(k,i,c.params())||this.updateStateParams(),h.current}if(a.type===f.RejectType.SUPERSEDED&&a.redirected&&a.detail instanceof g.TargetState)return this._redirectMgr(c.redirect(a.detail)).runTransition()}return this.$transitions.defaultErrorHandler()(a),j.reject(a)},a.prototype.updateStateParams=function(){var a=this,b=a.transition,c=a.$urlRouter,e=a.$state,f=a.$stateParams,g=b.options();e.params=b.params(),d.copy(e.params,f),f.$sync().$off(),g.location&&e.$current.navigable&&c.push(e.$current.navigable.url,f,{replace:"replace"===g.location}),c.update(!0)},a.prototype._redirectMgr=function(b){var c=this,d=c.$transitions,e=c.$urlRouter,f=c.$view,g=c.$state,h=c.$stateParams,i=c.$q,j=c.activeTransQ,k=c.changeHistory;return new a(b,d,e,f,g,h,i,j,k)},a}();b.TransitionManager=k},function(a,b,c){var d,e=c(3),f=c(4),g=c(25),h=c(26),i=c(27),j=Object.prototype.hasOwnProperty,k=function(a){return 0===["value","type","squash","array","dynamic"].filter(j.bind(a||{})).length};!function(a){a[a.PATH=0]="PATH",a[a.SEARCH=1]="SEARCH",a[a.CONFIG=2]="CONFIG"}(d||(d={}));var l=function(){function a(a,b,c,f){function j(a){return a=k(a)&&{value:a}||a,e.extend(a,{$$fn:e.isInjectable(a.value)?a.value:function(){return a.value}})}function l(b,c,e){if(b.type&&c&&"string"!==c.name)throw new Error("Param '"+a+"' has two type configurations.");return b.type&&c&&"string"===c.name&&i.paramTypes.type(b.type)?i.paramTypes.type(b.type):c?c:b.type?b.type instanceof h.Type?b.type:i.paramTypes.type(b.type):e===d.CONFIG?i.paramTypes.type("any"):i.paramTypes.type("string")}function m(){var b={array:f===d.SEARCH?"auto":!1},g=a.match(/\[\]$/)?{array:!0}:{};return e.extend(b,g,c).array}function n(a,b){var c=a.squash;if(!b||c===!1)return!1;if(!e.isDefined(c)||null==c)return g.matcherConfig.defaultSquashPolicy();if(c===!0||e.isString(c))return c;throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string")}function o(a,b,c,d){var f,g,h=[{from:"",to:c||b?void 0:""},{from:null,to:c||b?void 0:""}];return f=e.isArray(a.replace)?a.replace:[],e.isString(d)&&f.push({from:d,to:void 0}),g=e.map(f,e.prop("from")),e.filter(h,function(a){return-1===g.indexOf(a.from)}).concat(f)}c=j(c),b=l(c,b,f);var p=m();b=p?b.$asArray(p,f===d.SEARCH):b;var q=void 0!==c.value,r=c.dynamic===!0,s=n(c,q),t=o(c,p,q,s);e.extend(this,{id:a,type:b,location:f,squash:s,replace:t,isOptional:q,dynamic:r,config:c,array:p})}return a.prototype.isDefaultValue=function(a){return this.isOptional&&this.type.equals(this.value(),a)},a.prototype.value=function(a){var b=this,c=function(){if(!f.services.$injector)throw new Error("Injectable functions cannot be called at configuration time");var a=f.services.$injector.invoke(b.config.$$fn);if(null!==a&&void 0!==a&&!b.type.is(a))throw new Error("Default value ("+a+") for parameter '"+b.id+"' is not an instance of Type ("+b.type.name+")");return a},d=function(a){var c=e.map(e.filter(b.replace,e.propEq("from",a)),e.prop("to"));return c.length?c[0]:a};return a=d(a),e.isDefined(a)?this.type.$normalize(a):c()},a.prototype.isSearch=function(){return this.location===d.SEARCH},a.prototype.validates=function(a){if((!e.isDefined(a)||null===a)&&this.isOptional)return!0;var b=this.type.$normalize(a);if(!this.type.is(b))return!1;var c=this.type.encode(b);return e.isString(c)&&!this.type.pattern.exec(c)?!1:!0},a.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},a.fromConfig=function(b,c,e){return new a(b,c,e,d.CONFIG)},a.fromPath=function(b,c,e){return new a(b,c,e,d.PATH)},a.fromSearch=function(b,c,e){return new a(b,c,e,d.SEARCH)},a.values=function(a,b){return b=b||{},a.map(function(a){return[a.id,a.value(b[a.id])]}).reduce(e.applyPairs,{})},a.equals=function(a,b,c){return b=b||{},c=c||{},-1===a.map(function(a){return a.type.equals(b[a.id],c[a.id])}).indexOf(!1)},a.validates=function(a,b){return b=b||{},-1===a.map(function(a){return a.validates(b[a.id])}).indexOf(!1)},a}();b.Param=l},function(a,b,c){var d=c(3),e=function(){function a(){this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1}return a.prototype.caseInsensitive=function(a){return this._isCaseInsensitive=d.isDefined(a)?a:this._isCaseInsensitive},a.prototype.strictMode=function(a){return this._isStrictMode=d.isDefined(a)?a:this._isStrictMode},a.prototype.defaultSquashPolicy=function(a){if(d.isDefined(a)&&a!==!0&&a!==!1&&!d.isString(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=d.isDefined(a)?a:this._defaultSquashPolicy},a}();b.matcherConfig=new e},function(a,b,c){function d(a,b){function c(a){return e.isArray(a)?a:e.isDefined(a)?[a]:[]}function d(a){switch(a.length){case 0:return void 0;case 1:return"auto"===b?a[0]:a;default:return a}}function f(a,b){return function(f){var g=c(f),h=e.map(g,a);return b===!0?0===e.filter(h,function(a){return!a}).length:d(h)}}function g(a){return function(b,d){var e=c(b),f=c(d);if(e.length!==f.length)return!1;for(var g=0;g<e.length;g++)if(!a(e[g],f[g]))return!1;return!0}}var h=this;["encode","decode","equals","$normalize"].map(function(b){h[b]=("equals"===b?g:f)(a[b].bind(a))}),e.extend(this,{name:a.name,pattern:a.pattern,is:f(a.is.bind(a),!0),$arrayMode:b})}var e=c(3),f=function(){function a(a){this.pattern=/.*/,e.extend(this,a)}return a.prototype.is=function(a,b){return!0},a.prototype.encode=function(a,b){return a},a.prototype.decode=function(a,b){return a},a.prototype.equals=function(a,b){return a==b},a.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},a.prototype.toString=function(){return"{Type:"+this.name+"}"},a.prototype.$normalize=function(a){return this.is(a)?a:this.decode(a)},a.prototype.$asArray=function(a,b){if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new d(this,a)},a}();b.Type=f},function(a,b,c){var d=c(3),e=c(4),f=c(26),g=function(a,b){return function(c){return null!=c?c.toString().replace(a,b):c}},h=g(/\//g,"%2F"),i=g(/%2F/g,"/"),j=function(){function a(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes={hash:{encode:h,decode:i,is:d.is(String),pattern:/.*/,equals:d.val(!0)},string:{encode:h,decode:i,is:d.is(String),pattern:/[^\/]*/},"int":{encode:h,decode:function(a){return parseInt(a,10)},is:function(a){return d.isDefined(a)&&this.decode(a.toString())===a},pattern:/-?\d+/},bool:{encode:function(a){return a&&1||0},decode:function(a){return 0!==parseInt(a,10)},is:d.is(Boolean),pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):void 0},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):void 0},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:d.toJson,decode:d.fromJson,is:d.is(Object),equals:d.equals,pattern:/[^\/]*/},any:{encode:d.identity,decode:d.identity,equals:d.equals,pattern:/.*/}};var a=function(a,b){return new f.Type(d.extend({name:b},a))};this.types=d.inherit(d.map(this.defaultTypes,a),{})}return a.prototype.type=function(a,b,c){if(!d.isDefined(b))return this.types[a];if(this.types.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return this.types[a]=new f.Type(d.extend({name:a},b)),c&&(this.typeQueue.push({name:a,def:c}),this.enqueue||this._flushTypeQueue()),this},a.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var a=this.typeQueue.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");d.extend(this.types[a.name],e.services.$injector.invoke(a.def))}},a}();b.paramTypes=new j},function(a,b,c){"use strict";var d=c(3),e=c(4);!function(a){a[a.SUPERSEDED=2]="SUPERSEDED",a[a.ABORTED=3]="ABORTED",a[a.INVALID=4]="INVALID",a[a.IGNORED=5]="IGNORED"}(b.RejectType||(b.RejectType={}));var f=b.RejectType,g=function(){function a(a,b,c){d.extend(this,{type:a,message:b,detail:c})}return a.prototype.toString=function(){var a=function(a){return a&&a.toString!==Object.prototype.toString?a.toString():JSON.stringify(a)},b=this.type,c=this.message,d=a(this.detail);return"TransitionRejection(type: "+b+", message: "+c+", detail: "+d+")"},a}();b.TransitionRejection=g;var h=function(){function a(){}return a.prototype.superseded=function(a,b){var c="The transition has been superseded by a different transition (see detail).",h=new g(f.SUPERSEDED,c,a);return b&&b.redirected&&(h.redirected=!0),d.extend(e.services.$q.reject(h),{reason:h})},a.prototype.redirected=function(a){return this.superseded(a,{redirected:!0})},a.prototype.invalid=function(a){var b="This transition is invalid (see detail)",c=new g(f.INVALID,b,a);return d.extend(e.services.$q.reject(c),{reason:c})},a.prototype.ignored=function(a){var b="The transition was ignored.",c=new g(f.IGNORED,b,a);return d.extend(e.services.$q.reject(c),{reason:c})},a.prototype.aborted=function(a){var b="The transition has been aborted.",c=new g(f.ABORTED,b,a);return d.extend(e.services.$q.reject(c),{reason:c})},a}();b.RejectFactory=h},function(a,b){var c=function(){function a(a,b,c,d){void 0===c&&(c={}),void 0===d&&(d={}),this._identifier=a,this._definition=b,this._options=d,this._params=c||{}}return a.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},a.prototype.identifier=function(){return this._identifier},a.prototype.params=function(){return this._params},a.prototype.$state=function(){return this._definition},a.prototype.state=function(){return this._definition&&this._definition.self},a.prototype.options=function(){return this._options},a.prototype.exists=function(){return!(!this._definition||!this._definition.self)},a.prototype.valid=function(){return!this.error()},a.prototype.error=function(){var a=this.options().relative;if(!this._definition&&a){var b=a.name?a.name:a;return"Could not resolve '"+this.name()+"' from state '"+b+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},a}();b.TargetState=c},function(a,b,c){var d=c(3),e=c(4),f=c(31),g=function(){function a(a,b){this.transition=a,this.$view=b,this.treeChanges=a.treeChanges(),this.enteringViews=a.views("entering"),this.exitingViews=a.views("exiting")}return a.prototype.loadAllEnteringViews=function(){var a=this,b=function(b){var c=d.find(a.treeChanges.to,d.propEq("state",b.context)).resolveInjector;return a.$view.load(b,c)};return e.services.$q.all(this.enteringViews.map(b)).then(d.noop)},a.prototype.loadAllControllerLocals=function(){var a=this,b=function(b){function c(){}var g=f.annotateController(b.controller),h=d.find(a.treeChanges.to,d.propEq("state",b.context)).resolveInjector;return c.$inject=g,e.services.$q.all(h.getLocals(c)).then(function(a){return b.locals=a})},c=this.enteringViews.filter(function(a){return!!a.controller}).map(b);return e.services.$q.all(c).then(d.noop)},a.prototype.updateViews=function(){var a=this.$view;this.exitingViews.forEach(function(b){return a.reset(b)}),this.enteringViews.forEach(function(b){return a.registerStateViewConfig(b)}),a.sync()},a.prototype.registerHooks=function(){this.enteringViews.length&&(this.transition.onStart({},this.loadAllEnteringViews.bind(this)),this.transition.onFinish({},this.loadAllControllerLocals.bind(this))),(this.exitingViews.length||this.enteringViews.length)&&this.transition.onSuccess({},this.updateViews.bind(this))},a}();b.ViewHooks=g},function(a,b,c){function d(a){var b=h.services.$injector,c=b.get("$controller"),d=b.instantiate;try{var e;return b.instantiate=function(a){b.instantiate=d,e=b.annotate(a)},c(a,{$scope:{}}),e}finally{b.instantiate=d}}function e(a,b){h.services.$injector=a,h.services.$q=b}function f(a){function b(b,c,d){return h.services.locationConfig.html5Mode=function(){var b=a.html5Mode();return b=i.isObject(b)?b.enabled:b,b&&d.history},k(["replace","url","path","search","hash"],b,h.services.location),k(["port","protocol","host"],b,h.services.locationConfig),k(["baseHref"],c,h.services.locationConfig),l}l=new g.Router,k(["hashPrefix"],a,h.services.locationConfig),this.$get=b,b.$inject=["$location","$browser","$sniffer"]}var g=c(32),h=c(4),i=c(3),j=angular.module("ui.router.angular1",[]);b.annotateController=d,e.$inject=["$injector","$q"],j.run(e);var k=function(a,b,c){return a.forEach(function(a){return c[a]=b[a].bind(b)})},l=null;f.$inject=["$locationProvider"],angular.module("ui.router.init",[]).provider("ng1UIRouter",f),angular.module("ui.router.util").provider("$urlMatcherFactory",["ng1UIRouterProvider",function(){return l.urlMatcherFactory}]),angular.module("ui.router.router").provider("$urlRouter",["ng1UIRouterProvider",function(){return l.urlRouterProvider}]),angular.module("ui.router.state").provider("$state",["ng1UIRouterProvider",function(){return l.stateProvider}]),angular.module("ui.router.init").run(["ng1UIRouter",function(a){}]),angular.module("ui.router.state").run(["$state",function(a){}]),angular.module("ui.router.util").run(["$urlMatcherFactory",function(a){}])},function(a,b,c){var d=c(33),e=c(38),f=c(14),g=function(){function a(){this.urlMatcherFactory=new d.UrlMatcherFactory,this.urlRouterProvider=new e.$UrlRouterProvider(this.urlMatcherFactory),this.stateProvider=new f.$StateProvider(this.urlRouterProvider,this.urlMatcherFactory)}return a}();b.Router=g},function(a,b,c){function d(){return{strict:f.matcherConfig.strictMode(),caseInsensitive:f.matcherConfig.caseInsensitive()}}var e=c(3),f=c(34),g=c(36),h=function(){function a(){e.extend(this,{UrlMatcher:f.UrlMatcher,Param:g.Param})}return a.prototype.caseInsensitive=function(a){return f.matcherConfig.caseInsensitive(a)},a.prototype.strictMode=function(a){return f.matcherConfig.strictMode(a)},a.prototype.defaultSquashPolicy=function(a){return f.matcherConfig.defaultSquashPolicy(a)},a.prototype.compile=function(a,b){return new f.UrlMatcher(a,e.extend(d(),b))},a.prototype.isMatcher=function(a){if(!e.isObject(a))return!1;var b=!0;return e.forEach(f.UrlMatcher.prototype,function(c,d){e.isFunction(c)&&(b=b&&e.isDefined(a[d])&&e.isFunction(a[d]))}),b},a.prototype.type=function(a,b,c){var d=g.paramTypes.type(a,b,c);return e.isDefined(b)?this:d},a.prototype.$get=function(){return g.paramTypes.enqueue=!1,g.paramTypes._flushTypeQueue(),this},a}();b.UrlMatcherFactory=h},function(a,b,c){function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(35)),d(c(25)),d(c(33)),d(c(38))},function(a,b,c){function d(a,b){var c=["",""],d=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return d;switch(b.squash){case!1:c=["(",")"+(b.isOptional?"?":"")];break;case!0:c=["?(",")?"];break;default:c=["("+b.squash+"|",")?"]}return d+c[0]+b.type.pattern.source+c[1]}var e=c(3),f=c(36),g=function(a,b,c){return a[b]=a[b]||c()},h=function(){function a(b,c){var g=this;this.pattern=b,this.config=c,this._cache={path:[],pattern:null},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.config=e.defaults(this.config,{params:{},strict:!0,caseInsensitive:!1,paramMap:e.identity});for(var h,i,j,k=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,m=0,n=[],o=function(c){if(!a.nameValidator.test(c))throw new Error("Invalid parameter name '"+c+"' in pattern '"+b+"'");if(e.find(g._params,e.propEq("id",c)))throw new Error("Duplicate parameter name '"+c+"' in pattern '"+b+"'")},p=function(a,c){var d=a[2]||a[3],h=c?a[4]:a[4]||("*"===a[1]?".*":null);return{id:d,regexp:h,cfg:g.config.params[d],segment:b.substring(m,a.index),type:h?f.paramTypes.type(h||"string")||e.inherit(f.paramTypes.type("string"),{pattern:new RegExp(h,g.config.caseInsensitive?"i":void 0)}):null}};(h=k.exec(b))&&(i=p(h,!1),!(i.segment.indexOf("?")>=0));)o(i.id),this._params.push(f.Param.fromPath(i.id,i.type,this.config.paramMap(i.cfg,!1))),this._segments.push(i.segment),n.push([i.segment,e.tail(this._params)]),m=k.lastIndex;j=b.substring(m);var q=j.indexOf("?");if(q>=0){var r=j.substring(q);if(j=j.substring(0,q),r.length>0)for(m=0;h=l.exec(r);)i=p(h,!0),o(i.id),this._params.push(f.Param.fromSearch(i.id,i.type,this.config.paramMap(i.cfg,!0))),m=k.lastIndex}this._segments.push(j),e.extend(this,{_compiled:n.map(function(a){return d.apply(null,a)}).concat(d(j)),prefix:this._segments[0]}),Object.freeze(this)}return a.prototype.append=function(a){return this._children.push(a),e.forEach(a._cache,function(b,c){return a._cache[c]=e.isArray(b)?[]:null}),a._cache.path=this._cache.path.concat(this),a},a.prototype.isRoot=function(){return 0===this._cache.path.length},a.prototype.toString=function(){return this.pattern},a.prototype.exec=function(a,b,c,d){function f(a){var b=function(a){return a.split("").reverse().join("")},c=function(a){return a.replace(/\\-/g,"-")},d=b(a).split(/-(?!\\)/),f=e.map(d,b);return e.map(f,c).reverse()}var h=this;void 0===b&&(b={}),void 0===d&&(d={});var i=g(this._cache,"pattern",function(){return new RegExp(["^",e.unnest(h._cache.path.concat(h).map(e.prop("_compiled"))).join(""),h.config.strict===!1?"/?":"","$"].join(""),h.config.caseInsensitive?"i":void 0)}).exec(a);if(!i)return null;var j=this.parameters(),k=j.filter(function(a){return!a.isSearch()}),l=j.filter(function(a){return a.isSearch()}),m=this._cache.path.concat(this).map(function(a){return a._segments.length-1}).reduce(function(a,b){return a+b}),n={};if(m!==i.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var o=0;m>o;o++){for(var p=k[o],q=i[o+1],r=0;r<p.replace;r++)p.replace[r].from===q&&(q=p.replace[r].to);q&&p.array===!0&&(q=f(q)),n[p.id]=p.value(q)}return e.forEach(l,function(a){n[a.id]=a.value(b[a.id])}),c&&(n["#"]=c),n},a.prototype.parameters=function(a){return void 0===a&&(a={}),a.inherit===!1?this._params:e.unnest(this._cache.path.concat(this).map(e.prop("_params")))},a.prototype.parameter=function(a,b){void 0===b&&(b={});var c=e.tail(this._cache.path);return e.find(this._params,e.propEq("id",a))||b.inherit!==!1&&c&&c.parameter(a)||null},a.prototype.validates=function(a){var b=this,c=function(a,b){return!a||a.validates(b)};return e.pairs(a||{}).map(function(a){var d=a[0],e=a[1];return c(b.parameter(d),e)}).reduce(e.allTrueR,!0)},a.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})}void 0===a&&(a={});var c=this._segments,d=c[0],f=!1,g=this.parameters({inherit:!1}),h=e.tail(this._cache.path);if(!this.validates(a))return null;g.map(function(g,h){var i=h<c.length-1,j=g.value(a[g.id]),k=g.isDefaultValue(j),l=k?g.squash:!1,m=g.type.encode(j);if(!i){if(null==m||k&&l!==!1)return;return e.isArray(m)||(m=[m]),m=e.map(m,encodeURIComponent).join("&"+g.id+"="),d+=(f?"&":"?")+(g.id+"="+m),void(f=!0)}d+=function(a,c){return l===!0?a.match(c.match(/\/$/)?/\/?(.*)/:/(.*)/)[1]:e.isString(l)?l+a:l!==!1?"":null==m?a:e.isArray(m)?e.map(m,b).join("-")+a:g.type.raw?m+a:encodeURIComponent(m)+a}(c[h+1],d)}),a["#"]&&(d+="#"+a["#"]);var i=["#"].concat(g.map(e.prop("id")));return(h&&h.format(e.omit(a,i))||"")+d},a.nameValidator=/^\w+(-+\w+)*(?:\[\])?$/,a}();b.UrlMatcher=h},function(a,b,c){function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(24)),d(c(27)),d(c(37)),d(c(26))},function(a,b,c){function d(){function a(){function a(a,b){return function(){e.forEach(a.split(" "),function(a){return c[a].splice(c[a].indexOf(b),1)})}}function b(a,b){c[a]&&c[a].length&&e.forEach(c[a],function(a){return a(b)})}var c={},d={};return f.prototype.$digest=function(){var a=this;e.forEach(this,function(c,e){c!==d[e]&&a.hasOwnProperty(e)&&(d[e]=c,b(e,c))})},f.prototype.$inherit=function(a,b,c){var d,f=e.ancestors(b,c),g={},h=[];for(var i in f)if(f[i].params&&(d=Object.keys(f[i].params),d.length))for(var j in d)h.indexOf(d[j])>=0||(h.push(d[j]),g[d[j]]=this[d[j]]);return e.extend({},g,a)},f.prototype.$set=function(a,c){var d=this,f=!1,g=!1;return c&&e.forEach(a,function(a,b){(c.parameter(b)||{}).dynamic!==!0&&(g=!0)}),g?!1:(e.forEach(a,function(a,c){a!==d[c]&&(d[c]=a,b(c),f=!0)}),this.$sync(),f)},f.prototype.$sync=function(){return e.copy(this,d),this},f.prototype.$off=function(){return c={},this},f.prototype.$raw=function(){return e.omit(this,Object.keys(this).filter(f.prototype.hasOwnProperty.bind(f.prototype)))},f.prototype.$localize=function(a,b){return new f(e.pick(b||this,Object.keys(a.params)))},f.prototype.$observe=function(b,d){return e.forEach(b.split(" "),function(a){return(c[a]||(c[a]=[])).push(d)}),a(b,d)},new f}function b(a){return a.$watch(function(){c.$digest()}),c}var c=a();this.$get=b,b.$inject=["$rootScope"]}var e=c(3),f=function(){function a(a){void 0===a&&(a={}),e.extend(this,a)}return a.prototype.$digest=function(){},a.prototype.$inherit=function(a,b,c){},a.prototype.$set=function(a,b){},a.prototype.$sync=function(){},a.prototype.$off=function(){},a.prototype.$raw=function(){},a.prototype.$localize=function(a,b){},a.prototype.$observe=function(a,b){},a}();b.StateParams=f,d.$inject=[],angular.module("ui.router.state").provider("$stateParams",d)},function(a,b,c){function d(a){function b(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function c(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function d(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return e.isDefined(d)?d:!0}function h(a){function b(a,b,c){var d=f.services.locationConfig.baseHref();return"/"===d?a:b?d.slice(0,-1)+a:c?d.slice(1)+a:a}function c(a){function b(a){var b=a(f.services.$injector,g);return b?(e.isString(b)&&(g.replace(),g.url(b)),!0):!1}if(!a||!a.defaultPrevented){var c,d=j.length;for(c=0;d>c;c++)if(b(j[c]))return;k&&b(k)}}function d(){return i=i||a.$on("$locationChangeSuccess",c)}var h=g.url();return l||d(),{sync:function(){c()},listen:function(){return d()},update:function(a){return a?void(h=g.url()):void(g.url()!==h&&(g.url(h),g.replace()))},push:function(a,b,c){g.url(a.format(b||{})),c&&c.replace&&g.replace()},href:function(a,c,d){if(!a.validates(c))return null;var e=a.format(c);d=d||{};var g=f.services.locationConfig,h=g.html5Mode();if(h||null===e||(e="#"+g.hashPrefix()+e),e=b(e,h,d.absolute),!d.absolute||!e)return e;var i=!h&&e?"/":"",j=g.port();return j=80===j||443===j?"":":"+j,[g.protocol(),"://",g.host(),j,i,e].join("")}}}var i,j=[],k=null,l=!1;this.rule=function(a){if(!e.isFunction(a))throw new Error("'rule' must be a function");return j.push(a),this},this.otherwise=function(a){if(!e.isFunction(a)&&!e.isString(a))throw new Error("'rule' must be a string or function");return k=e.isString(a)?function(){return a}:a,this},this.when=function(h,i){var j,k=e.isString(i);if(e.isString(h)&&(h=a.compile(h)),!k&&!e.isFunction(i)&&!e.isArray(i))throw new Error("invalid 'handler' in when()");var l={matcher:function(b,c){return k&&(j=a.compile(c),c=["$match",j.format.bind(j)]),e.extend(function(){return d(f.services.$injector,c,b.exec(g.path(),g.search(),g.hash()))},{prefix:e.isString(b.prefix)?b.prefix:""})},regex:function(a,h){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return k&&(j=h,h=["$match",function(a){return c(j,a)}]),e.extend(function(){return d(f.services.$injector,h,a.exec(g.path()))},{prefix:b(a)})}},m={matcher:a.isMatcher(h),regex:h instanceof RegExp};for(var n in m)if(m[n])return this.rule(l[n](h,i));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){void 0===a&&(a=!0),l=a},this.$get=h,h.$inject=["$rootScope"]}var e=c(3),f=c(4),g=f.services.location;b.$UrlRouterProvider=d},function(a,b){var c=function(){function a(a){this.transition=a}return a.prototype.registerHooks=function(){this.registerOnEnterHooks(),this.registerOnRetainHooks(),this.registerOnExitHooks()},a.prototype.registerOnEnterHooks=function(){var a=this,b=function(b){return a.transition.onEnter({to:b.name},b.onEnter)};this.transition.entering().filter(function(a){return!!a.onEnter}).forEach(b)},a.prototype.registerOnRetainHooks=function(){var a=this,b=function(b){return a.transition.onRetain({},b.onRetain)};this.transition.retained().filter(function(a){return!!a.onRetain}).forEach(b)},a.prototype.registerOnExitHooks=function(){var a=this,b=function(b){return a.transition.onExit({from:b.name},b.onExit)};this.transition.exiting().filter(function(a){return!!a.onExit}).forEach(b)},a}();b.EnterExitHooks=c},function(a,b,c){var d=c(3),e=c(19),f=e.ResolvePolicy[e.ResolvePolicy.LAZY],g=e.ResolvePolicy[e.ResolvePolicy.EAGER],h=function(){function a(a){this.transition=a}return a.prototype.registerHooks=function(){function a(a){return d.tail(c.to).resolveContext.resolvePath(d.extend({transition:a},{resolvePolicy:g}))}function b(a,b){var e=d.find(c.entering,d.propEq("state",a));return e.resolveContext.resolvePathElement(e.state,d.extend({transition:b},{resolvePolicy:f}))}var c=this.transition.treeChanges();a.$inject=["$transition$"],b.$inject=["$state$","$transition$"],this.transition.onStart({},a,{priority:1e3}),this.transition.onEnter({},b,{priority:1e3})},a}();b.ResolveHooks=h},function(a,b,c){var d=c(3),e=c(36),f=function(a){if(!d.isString(a))return!1;var b="^"===a.charAt(0);return{val:b?a.substring(1):a,root:b}},g=function(){function a(a,b,c){this.matcher=b;var g=this;this.builders={parent:[function(c){return c===a()?null:b.find(g.parentName(c))||a()}],data:[function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=d.extend({},a.parent.data,a.data)),a.data}],url:[function(b){var e=b,g=f(e.url),h=b.parent,i=g?c.compile(g.val,{params:b.params||{},paramMap:function(a,b){return e.reloadOnSearch===!1&&b&&(a=d.extend(a||{},{dynamic:!0})),a}}):e.url;if(!i)return null;if(!c.isMatcher(i))throw new Error("Invalid url '"+i+"' in state '"+b+"'");return g&&g.root?i:(h&&h.navigable||a()).url.append(i)}],navigable:[function(b){
return b!==a()&&b.url?b:b.parent?b.parent.navigable:null}],params:[function(a){var b=function(a,b){return e.Param.fromConfig(b,null,a)},c=a.url&&a.url.parameters({inherit:!1})||[],f=d.values(d.map(d.omit(a.params||{},c.map(d.prop("id"))),b));return c.concat(f).map(function(a){return[a.id,a]}).reduce(d.applyPairs,{})}],views:[function(a){var b={},c=["templateProvider","templateUrl","template","notify","async"],e=["controller","controllerProvider","controllerAs"],f=c.concat(e);return d.forEach(a.views||{$default:d.pick(a,f)},function(c,f){f=f||"$default",d.forEach(e,function(b){a[b]&&!c[b]&&(c[b]=a[b])}),Object.keys(c).length>0&&(b[f]=c)}),b}],path:[function(a){return a.parent?a.parent.path.concat(a):[a]}],includes:[function(a){var b=a.parent?d.extend({},a.parent.includes):{};return b[a.name]=!0,b}]}}return a.prototype.builder=function(a,b){var c=this.builders,e=c[a]||[];return d.isString(a)&&!d.isDefined(b)?e.length>1?e:e[0]:d.isString(a)&&d.isFunction(b)?(c[a]=e,c[a].push(b),function(){return c[a].splice(c[a].indexOf(b,1))&&null}):void 0},a.prototype.build=function(a){var b=this,c=b.matcher,e=b.builders,f=this.parentName(a);if(f&&!c.find(f))return null;for(var g in e)if(e.hasOwnProperty(g)){var h=e[g].reduce(function(a,b){return function(c){return b(c,a)}},d.noop);a[g]=h(a)}return a},a.prototype.parentName=function(a){var b=a.name||"";return-1!==b.indexOf(".")?b.substring(0,b.lastIndexOf(".")):a.parent?d.isString(a.parent)?a.parent:a.parent.name:""},a.prototype.name=function(a){var b=a.name;if(-1!==b.indexOf(".")||!a.parent)return b;var c=d.isString(a.parent)?a.parent:a.parent.name;return c?c+"."+b:b},a}();b.StateBuilder=g},function(a,b,c){function d(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!c||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function e(a){var b=a.parent().inheritedData("$uiView");return b&&b.context&&b.context.name?b.context:void 0}function f(a,b){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(c,f,g,j){var k=d(g.uiSref,a.current.name),l=null,m=e(f)||a.$current,n=null,o="A"===f.prop("tagName"),p="FORM"===f[0].nodeName,q=p?"action":"href",r=!0,s=c.$eval(g.uiSrefOpts),t={relative:m,inherit:!0},u=h.defaults(s,t,i.defaultTransOpts),v=function(b){if(b&&(l=h.copy(b)),r){n=a.href(k.state,l,u);var c=j[1]||j[0];return c&&c.$$addStateInfo(k.state,l),null===n?(r=!1,!1):void g.$set(q,n)}};k.paramExpr&&(c.$watch(k.paramExpr,function(a){a!==l&&v(a)},!0),l=h.copy(c.$eval(k.paramExpr))),v(),p||f.bind("click",function(c){var d=c.which||c.button;if(!(d>1||c.ctrlKey||c.metaKey||c.shiftKey||f.attr("target"))){var e=b(function(){a.go(k.state,l,u)});c.preventDefault();var g=o&&!n?1:0;c.preventDefault=function(){g--<=0&&b.cancel(e)}}})}}}function g(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout","$transitions",function(b,f,g,i,j){function k(b,c,d){var g=a.get(b,e(f)),h=m(b,c);t.push({state:g||{name:b},params:c,hash:h}),u[h]=d}function l(a){a.promise.then(n)}function m(a,c){if(!h.isString(a))throw new Error("state should be a string");return h.isObject(c)?a+h.toJson(c):(c=b.$eval(c),h.isObject(c)?a+h.toJson(c):a)}function n(){for(var a=0;a<t.length;a++)q(t[a].state,t[a].params)?o(f,u[t[a].hash]):p(f,u[t[a].hash]),r(t[a].state,t[a].params)?o(f,s):p(f,s)}function o(a,b){i(function(){a.addClass(b)})}function p(a,b){a.removeClass(b)}function q(b,c){return a.includes(b.name,c)}function r(b,c){return a.is(b.name,c)}var s,t=[],u={};s=c(g.uiSrefActiveEq||"",!1)(b);var v=b.$eval(g.uiSrefActive)||c(g.uiSrefActive||"",!1)(b);h.isObject(v)&&h.forEach(v,function(c,e){if(h.isString(c)){var f=d(c,a.current.name);k(f.state,b.$eval(f.paramExpr),e)}}),this.$$addStateInfo=function(a,b){h.isObject(v)&&t.length>0||(k(a,b,v),n())},b.$on("$stateChangeSuccess",n),l.$inject=["$transition$"];var w=j.onStart({},l);b.$on("$destroy",w)}]}}var h=c(3),i=c(9);f.$inject=["$state","$timeout"],g.$inject=["$state","$stateParams","$interpolate"],angular.module("ui.router.state").directive("uiSref",f).directive("uiSrefActive",g).directive("uiSrefActiveEq",g)},function(a,b){function c(a){return function(b){return a.is(b)}}function d(a){return function(b,c,d){return a.includes(b,c,d)}}c.$inject=["$state"],b.$IsStateFilter=c,d.$inject=["$state"],b.$IncludedByStateFilter=d,angular.module("ui.router.state").filter("isState",c).filter("includedByState",d)},function(a,b,c){var d=c(2),e=function(){function a(a){d.extend(this,a)}return a.prototype.is=function(a){return this===a||this.self===a||this.fqn()===a},a.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var a=this.parent.fqn();return a?a+"."+this.name:this.name},a.prototype.root=function(){return this.parent&&this.parent.root()||this},a.prototype.parameters=function(a){a=d.defaults(a,{inherit:!0});var b=a.inherit&&this.parent&&this.parent.parameters()||[];return b.concat(d.values(this.params))},a.prototype.parameter=function(a,b){return void 0===b&&(b={}),this.url&&this.url.parameter(a,b)||d.find(d.values(this.params),d.propEq("id",a))||b.inherit&&this.parent&&this.parent.parameter(a)},a.prototype.toString=function(){return this.fqn()},a}();b.State=e},function(a,b,c){var d=c(3),e=function(){function a(a){this._states=a}return a.prototype.isRelative=function(a){return a=a||"",0===a.indexOf(".")||0===a.indexOf("^")},a.prototype.find=function(a,b){if(!a&&""!==a)return void 0;var c=d.isString(a),e=c?a:a.name;this.isRelative(e)&&(e=this.resolvePath(e,b));var f=this._states[e];return!f||!c&&(c||f!==a&&f.self!==a)?void 0:f},a.prototype.resolvePath=function(a,b){if(!b)throw new Error("No reference point given for path '"+a+"'");for(var c=this.find(b),d=a.split("."),e=0,f=d.length,g=c;f>e;e++)if(""!==d[e]||0!==e){if("^"!==d[e])break;if(!g.parent)throw new Error("Path '"+a+"' not valid for state '"+c.name+"'");g=g.parent}else g=c;var h=d.slice(e).join(".");return g.name+(g.name&&h?".":"")+h},a}();b.StateMatcher=e},function(a,b,c){var d=c(3),e=c(12),f=function(){function a(a,b,c,d){this.states=a,this.builder=b,this.$urlRouterProvider=c,this.$state=d,this.autoFlush=!1,this.queue=[]}return a.prototype.register=function(a,b){var c=this,f=c.states,g=c.queue,h=c.$state,i=d.inherit(new e.State,d.extend({},a,{self:a,resolve:a.resolve||{},toString:function(){return a.name}}));if(!d.isString(i.name))throw new Error("State must have a valid name");if(f.hasOwnProperty(i.name)||-1!==d.pluck(g,"name").indexOf(i.name))throw new Error("State '"+i.name+"' is already defined");return g[b?"unshift":"push"](i),this.autoFlush&&this.flush(h),i},a.prototype.flush=function(a){for(var b,c,d,e=this,f=e.queue,g=e.states,h=e.builder,i=[],j={};f.length>0;)if(c=f.shift(),b=h.build(c),d=i.indexOf(c),b){if(g.hasOwnProperty(c.name))throw new Error("State '"+name+"' is already defined");g[c.name]=c,this.attachRoute(a,c),d>=0&&i.splice(d,1)}else{var k=j[c.name];if(j[c.name]=f.length,d>=0&&k===f.length)throw new Error("Cannot register orphaned state '"+c.name+"'");0>d&&i.push(c),f.push(c)}return g},a.prototype.attachRoute=function(a,b){var c=this.$urlRouterProvider;!b[d.abstractKey]&&b.url&&c.when(b.url,["$match","$stateParams",function(c,e){a.$current.navigable===b&&d.equalForKeys(c,e)||a.transitionTo(b,c,{inherit:!0,location:!1})}])},a}();b.StateQueueManager=f},function(a,b,c){var d=c(3),e=c(6),f=c(4),g=c(28),h=c(12),i=new g.RejectFactory,j={async:!0,rejectIfSuperseded:!0,current:d.noop,transition:null,traceData:{}},k=function(){function a(a,b,c,f){var g=this;this.fn=a,this.locals=b,this.resolveContext=c,this.options=f,this.isSuperseded=function(){return g.options.current()!==g.options.transition},this.mapHookResult=d.pattern([[this.isSuperseded,function(){return i.superseded(g.options.current())}],[d.eq(!1),d.val(i.aborted("Hook aborted transition"))],[d.is(h.TargetState),function(a){return i.redirected(a)}],[d.isPromise,function(a){return a.then(g.handleHookResult.bind(g))}]]),this.invokeStep=function(a){var b=g,c=b.options,f=b.fn,h=b.resolveContext,j=d.extend({},g.locals,a);if(e.trace.traceHookInvocation(g,c),c.rejectIfSuperseded&&g.isSuperseded())return i.superseded(c.current());if(!c.async){var k=h.invokeNow(f,j,c);return g.handleHookResult(k)}return h.invokeLater(f,j,c).then(g.handleHookResult.bind(g))},this.options=d.defaults(f,j)}return a.prototype.handleHookResult=function(a){if(!d.isDefined(a))return void 0;e.trace.traceHookResult(a,void 0,this.options);var b=this.mapHookResult(a);return b&&e.trace.traceHookResult(a,b,this.options),b},a.prototype.toString=function(){var a=this,b=a.options,c=a.fn,e=d.parse("traceData.hookType")(b)||"internal",f=d.parse("traceData.context.state.name")(b)||d.parse("traceData.context")(b)||"unknown",g=d.fnToString(c);return e+" context: "+f+", "+d.maxLength(200,g)},a.runSynchronousHooks=function(b,c,e){void 0===c&&(c={}),void 0===e&&(e=!1);for(var g=[],h=0;h<b.length;h++)try{g.push(b[h].invokeStep(c))}catch(i){if(!e)throw i;console.log("Swallowed exception during synchronous hook handler: "+i)}var j=g.filter(a.isRejection);return j.length?j[0]:g.filter(d.not(a.isRejection)).filter(d.isPromise).reduce(function(a,b){return a.then(d.val(b))},f.services.$q.when())},a.isRejection=function(a){return a&&a.reason instanceof g.TransitionRejection&&a},a}();b.TransitionHook=k},function(a,b,c){function d(){this._reinit.bind(b.$transitions)(),this.$get=function(){return b.$transitions}}var e=c(8),f=c(11);b.defaultTransOpts={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null}};var g=function(){function a(){this._defaultErrorHandler=function(a){a instanceof Error&&console.log(a)},this._reinit()}return a.prototype.defaultErrorHandler=function(a){return this._defaultErrorHandler=a||this._defaultErrorHandler},a.prototype._reinit=function(){f.HookRegistry.mixin(new f.HookRegistry,this)},a.prototype.create=function(a,b){return new e.Transition(a,b)},a}();b.$transitions=new g,d.prototype=b.$transitions,b.$transitionsProvider=d,angular.module("ui.router.state").provider("$transitions",b.$transitionsProvider)},function(a,b,c){function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(50)),d(c(21)),d(c(51)),d(c(52))},function(a,b,c){function d(a,b){this.fromConfig=function(a,b,c){return e.isDefined(a.template)?this.fromString(a.template,b):e.isDefined(a.templateUrl)?this.fromUrl(a.templateUrl,b):e.isDefined(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return e.isFunction(a)?a(b):a},this.fromUrl=function(c,d){return e.isFunction(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(e.prop("data"))},this.fromProvider=function(a,b,c){return c(a)}}var e=c(3);d.$inject=["$http","$templateCache"],angular.module("ui.router.util").service("$templateFactory",d)},function(a,b,c){function d(a,b,c,d,e){function h(a,c){return{enter:function(a,c,d){angular.version.minor>2?b.enter(a,null,c).then(d):b.enter(a,null,c,d)},leave:function(a,c){angular.version.minor>2?b.leave(a).then(c):b.leave(a,c)}}}function i(a,b){return a===b}var j={context:a.rootContext()},k={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(b,e,l){return function(b,e,m){function n(a){i(x,a)||(g.trace.traceUiViewConfigUpdated(A,a&&a.context),x=a,p(a))}function o(){q&&(g.trace.traceUiViewEvent("Removing    (previous) el",A),q.remove(),q=null),s&&(g.trace.traceUiViewEvent("Destroying  (previous) scope",A),s.$destroy(),s=null),r&&(g.trace.traceUiViewEvent("Animate out (previous)",A),w.leave(r,function(){q=null}),q=r,r=null)}function p(a){a=a||{};var d=b.$new();g.trace.traceUiViewScopeCreated(A,d),f.extend(A,{context:a.context,$template:a.template,$controller:a.controller,$controllerAs:a.controllerAs,$locals:a.locals});var h=l(d,function(a){w.enter(a.data("$uiView",A),e,function(){s&&s.$emit("$viewContentAnimationEnded"),(f.isDefined(v)&&!v||b.$eval(v))&&c(a)}),o()});r=h,s=d,s.$emit("$viewContentLoaded",a||x),s.$eval(u)}var q,r,s,t,u=m.onload||"",v=m.autoscroll,w=h(m,b),x=void 0,y=e.inheritedData("$uiView")||j,z=d(m.uiView||m.name||"")(b)||"$default",A={id:k.count++,name:z,fqn:y.name?y.fqn+"."+z:z,config:null,configUpdated:n,get creationContext(){return y.context}};g.trace.traceUiViewEvent("Linking",A),e.data("$uiView",A),p(),t=a.registerUiView(A),b.$on("$destroy",function(){g.trace.traceUiViewEvent("Destroying/Unregistering",A),t()})}}};return k}function e(a,b,c,d,e){return{restrict:"ECA",priority:-400,compile:function(c){var d=c.html();return function(c,e){var h=e.data("$uiView");if(h){e.html(h.$template||d),g.trace.traceUiViewFill(h,e.html());var i=a(e.contents()),j=h.$controller,k=h.$controllerAs;if(j){var l=h.$locals,m=b(j,f.extend(l,{$scope:c}));k&&(c[k]=m),e.data("$ngControllerController",m),e.children().data("$ngControllerController",m)}i(c)}}}}}var f=c(3),g=c(6);d.$inject=["$view","$animate","$uiViewScroll","$interpolate","$q"],e.$inject=["$compile","$controller","$interpolate","$injector","$q"],angular.module("ui.router.state").directive("uiView",d),angular.module("ui.router.state").directive("uiView",e)},function(a,b){function c(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){return c(function(){a[0].scrollIntoView()},0,!1)}}]}angular.module("ui.router.state").provider("$uiViewScroll",c)}])});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJhbmd1bGFyLXVpLXJvdXRlci5taW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTdGF0ZS1iYXNlZCByb3V0aW5nIGZvciBBbmd1bGFySlNcbiAqIEB2ZXJzaW9uIHYxLjAuMGFscGhhMC1kZXYtMjAxNS0xMi0zMVxuICogQGxpbmsgaHR0cDovL2FuZ3VsYXItdWkuZ2l0aHViLmNvbS9cbiAqIEBsaWNlbnNlIE1JVCBMaWNlbnNlLCBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICovXG4hZnVuY3Rpb24oYSxiKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1iKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSxiKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzW1widWkucm91dGVyXCJdPWIoKTphW1widWkucm91dGVyXCJdPWIoKX0odGhpcyxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGQpe2lmKGNbZF0pcmV0dXJuIGNbZF0uZXhwb3J0czt2YXIgZT1jW2RdPXtleHBvcnRzOnt9LGlkOmQsbG9hZGVkOiExfTtyZXR1cm4gYVtkXS5jYWxsKGUuZXhwb3J0cyxlLGUuZXhwb3J0cyxiKSxlLmxvYWRlZD0hMCxlLmV4cG9ydHN9dmFyIGM9e307cmV0dXJuIGIubT1hLGIuYz1jLGIucD1cIlwiLGIoMCl9KFtmdW5jdGlvbihhLGIsYyl7YS5leHBvcnRzPWMoMSl9LGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jKDIpO2IuY29tbW9uPWQ7dmFyIGU9YygzNik7Yi5wYXJhbXM9ZTt2YXIgZj1jKDE1KTtiLnBhdGg9Zjt2YXIgZz1jKDE3KTtiLnJlc29sdmU9Zzt2YXIgaD1jKDEyKTtiLnN0YXRlPWg7dmFyIGk9Yyg5KTtiLnRyYW5zaXRpb249aTt2YXIgaj1jKDM0KTtiLnVybD1qO3ZhciBrPWMoNDkpO2Iudmlldz1rLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShiLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGJbXCJkZWZhdWx0XCJdPVwidWkucm91dGVyXCJ9LGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe2Zvcih2YXIgYyBpbiBhKWIuaGFzT3duUHJvcGVydHkoYyl8fChiW2NdPWFbY10pfWQoYygzKSksZChjKDQpKSxkKGMoNSkpLGQoYyg2KSl9LGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtmdW5jdGlvbiBiKGMpe3JldHVybiBjLmxlbmd0aD49ZD9hLmFwcGx5KG51bGwsYyk6ZnVuY3Rpb24oKXtyZXR1cm4gYihjLmNvbmNhdChbXS5zbGljZS5hcHBseShhcmd1bWVudHMpKSl9fXZhciBjPVtdLnNsaWNlLmFwcGx5KGFyZ3VtZW50cyxbMV0pLGQ9YS5sZW5ndGg7cmV0dXJuIGIoYyl9ZnVuY3Rpb24gZCgpe3ZhciBhPWFyZ3VtZW50cyxiPWEubGVuZ3RoLTE7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciBjPWIsZD1hW2JdLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtjLS07KWQ9YVtjXS5jYWxsKHRoaXMsZCk7cmV0dXJuIGR9fWZ1bmN0aW9uIGUoKXtmb3IodmFyIGE9W10sYj0wO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspYVtiLTBdPWFyZ3VtZW50c1tiXTtyZXR1cm4gZC5hcHBseShudWxsLFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5yZXZlcnNlKCkpfWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIGM9W10sZD0wO2Q8YXJndW1lbnRzLmxlbmd0aDtkKyspY1tkLTBdPWFyZ3VtZW50c1tkXTtyZXR1cm4gYS5hcHBseShudWxsLGMpJiZiLmFwcGx5KG51bGwsYyl9fWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIGM9W10sZD0wO2Q8YXJndW1lbnRzLmxlbmd0aDtkKyspY1tkLTBdPWFyZ3VtZW50c1tkXTtyZXR1cm4gYS5hcHBseShudWxsLGMpfHxiLmFwcGx5KG51bGwsYyl9fWZ1bmN0aW9uIGgoYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyl7cmV0dXJuIGNbYV0uYXBwbHkoYyxiKX19ZnVuY3Rpb24gaShhKXtyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspaWYoYVtjXVswXShiKSlyZXR1cm4gYVtjXVsxXShiKX19ZnVuY3Rpb24gaihhKXt2b2lkIDA9PT1hJiYoYT17fSk7Zm9yKHZhciBiPVtdLGM9MTtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKWJbYy0xXT1hcmd1bWVudHNbY107dmFyIGQ9ay5hcHBseShudWxsLFt7fV0uY29uY2F0KGIpKTtyZXR1cm4gSih7fSxkLG8oYXx8e30sT2JqZWN0LmtleXMoZCkpKX1mdW5jdGlvbiBrKGEpe2Zvcih2YXIgYj1bXSxjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKyliW2MtMV09YXJndW1lbnRzW2NdO3JldHVybiBJKGIsZnVuY3Rpb24oYil7SShiLGZ1bmN0aW9uKGIsYyl7YS5oYXNPd25Qcm9wZXJ0eShjKXx8KGFbY109Yil9KX0pLGF9ZnVuY3Rpb24gbChhLGIpe3ZhciBjPVtdO2Zvcih2YXIgZCBpbiBhLnBhdGgpe2lmKGEucGF0aFtkXSE9PWIucGF0aFtkXSlicmVhaztjLnB1c2goYS5wYXRoW2RdKX1yZXR1cm4gY31mdW5jdGlvbiBtKGEsYixjKXt2b2lkIDA9PT1jJiYoYz1PYmplY3Qua2V5cyhhKSk7Zm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF07aWYoYVtlXSE9YltlXSlyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBuKGEsYil7dmFyIGM9e30sZD1RKGFyZ3VtZW50cywyKTtmb3IodmFyIGUgaW4gYilhKGQsZSkmJihjW2VdPWJbZV0pO3JldHVybiBjfWZ1bmN0aW9uIG8oYSl7cmV0dXJuIG4uYXBwbHkobnVsbCxbUl0uY29uY2F0KFEoYXJndW1lbnRzKSkpfWZ1bmN0aW9uIHAoYSl7cmV0dXJuIG4uYXBwbHkobnVsbCxbYi5ub3QoUildLmNvbmNhdChRKGFyZ3VtZW50cykpKX1mdW5jdGlvbiBxKGEsYyl7cmV0dXJuIHQoYSxiLnByb3AoYykpfWZ1bmN0aW9uIHIoYSxiKXt2YXIgYz1IKGEpLGQ9Yz9bXTp7fSxlPWM/ZnVuY3Rpb24oYSl7cmV0dXJuIGQucHVzaChhKX06ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZFtiXT1hfTtyZXR1cm4gSShhLGZ1bmN0aW9uKGEsYyl7YihhLGMpJiZlKGEsYyl9KSxkfWZ1bmN0aW9uIHMoYSxiKXt2YXIgYztyZXR1cm4gSShhLGZ1bmN0aW9uKGEsZCl7Y3x8YihhLGQpJiYoYz1hKX0pLGN9ZnVuY3Rpb24gdChhLGIpe3ZhciBjPUgoYSk/W106e307cmV0dXJuIEkoYSxmdW5jdGlvbihhLGQpe3JldHVybiBjW2RdPWIoYSxkKX0pLGN9ZnVuY3Rpb24gdShhLGIpe3JldHVybiB2b2lkIDA9PT1iJiYoYj1cImFzc2VydCBmYWlsdXJlXCIpLGZ1bmN0aW9uKGMpe2lmKCFhKGMpKXRocm93IG5ldyBFcnJvcihiKTtyZXR1cm4hMH19ZnVuY3Rpb24gdigpe2Zvcih2YXIgYT1bXSxjPTA7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKylhW2MtMF09YXJndW1lbnRzW2NdO2lmKDA9PT1hLmxlbmd0aClyZXR1cm5bXTt2YXIgZD1hLnJlZHVjZShmdW5jdGlvbihhLGIpe3JldHVybiBNYXRoLm1pbihiLmxlbmd0aCxhKX0sOTAwNzE5OTI1NDc0MDk5MSk7cmV0dXJuIEFycmF5LmFwcGx5KG51bGwsQXJyYXkoZCkpLm1hcChmdW5jdGlvbihjLGQpe3JldHVybiBhLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYVtkXX0pLnJlZHVjZShiLnB1c2hSLFtdKX0pfWZ1bmN0aW9uIHcoYSxiKXt2YXIgYyxkO2lmKEgoYikmJihjPWJbMF0sZD1iWzFdKSwhRihjKSl0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIHBhcmFtZXRlcnMgdG8gYXBwbHlQYWlyc1wiKTtyZXR1cm4gYVtjXT1kLGF9ZnVuY3Rpb24geChhKXtpZihIKGEpJiZhLmxlbmd0aCl7dmFyIGM9YS5zbGljZSgwLC0xKSxkPWEuc2xpY2UoLTEpO2lmKGMuZmlsdGVyKGIubm90KEYpKS5sZW5ndGh8fGQuZmlsdGVyKGIubm90KEQpKS5sZW5ndGgpcmV0dXJuITF9cmV0dXJuIEQoYSl9ZnVuY3Rpb24geShhKXt2YXIgYz1pKFtbSCxmdW5jdGlvbihhKXtyZXR1cm4gYS5zbGljZSgtMSlbMF19XSxbYi52YWwoITApLFBdXSkoYSk7cmV0dXJuIGMmJmMudG9TdHJpbmcoKXx8XCJ1bmRlZmluZWRcIn1mdW5jdGlvbiB6KGEsYil7cmV0dXJuIGIubGVuZ3RoPD1hP2I6Yi5zdWJzdHIoMCxhLTMpK1wiLi4uXCJ9ZnVuY3Rpb24gQShhLGIpe2Zvcig7Yi5sZW5ndGg8YTspYis9XCIgXCI7cmV0dXJuIGJ9ZnVuY3Rpb24gQihhKXtyZXR1cm4gYS5sZW5ndGgmJmFbYS5sZW5ndGgtMV18fHZvaWQgMH12YXIgQz1hbmd1bGFyLmlzRGVmaW5lZCxEPWFuZ3VsYXIuaXNGdW5jdGlvbixFPWFuZ3VsYXIuaXNOdW1iZXIsRj1hbmd1bGFyLmlzU3RyaW5nLEc9YW5ndWxhci5pc09iamVjdCxIPWFuZ3VsYXIuaXNBcnJheSxJPWFuZ3VsYXIuZm9yRWFjaCxKPWFuZ3VsYXIuZXh0ZW5kLEs9YW5ndWxhci5jb3B5LEw9YW5ndWxhci5ub29wLE09YW5ndWxhci50b0pzb24sTj1hbmd1bGFyLmZyb21Kc29uLE89YW5ndWxhci5lcXVhbHMsUD1hbmd1bGFyLmlkZW50aXR5O2IuaXNEZWZpbmVkPUMsYi5pc0Z1bmN0aW9uPUQsYi5pc051bWJlcj1FLGIuaXNTdHJpbmc9RixiLmlzT2JqZWN0PUcsYi5pc0FycmF5PUgsYi5mb3JFYWNoPUksYi5leHRlbmQ9SixiLmNvcHk9SyxiLm5vb3A9TCxiLnRvSnNvbj1NLGIuZnJvbUpzb249TixiLmVxdWFscz1PLGIuaWRlbnRpdHk9UCxiLmFic3RyYWN0S2V5PVwiYWJzdHJhY3RcIixiLmN1cnJ5PWMsYi5jb21wb3NlPWQsYi5waXBlPWUsYi5wcm9wPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYiYmYlthXX19LGIucHJvcEVxPWMoZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjJiZjW2FdPT09Yn0pLGIucGFyc2U9ZnVuY3Rpb24oYSl7cmV0dXJuIGUuYXBwbHkobnVsbCxhLnNwbGl0KFwiLlwiKS5tYXAoYi5wcm9wKSl9LGIubm90PWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgYj1bXSxjPTA7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKyliW2MtMF09YXJndW1lbnRzW2NdO3JldHVybiFhLmFwcGx5KG51bGwsYil9fSxiLmFuZD1mLGIub3I9ZyxiLmlzPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gbnVsbCE9YiYmYi5jb25zdHJ1Y3Rvcj09PWF8fGIgaW5zdGFuY2VvZiBhfX0sYi5lcT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGE9PT1ifX0sYi52YWw9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGF9fSxiLmludm9rZT1oLGIucGF0dGVybj1pLGIuaW5oZXJpdD1mdW5jdGlvbihhLGIpe3JldHVybiBKKG5ldyhKKGZ1bmN0aW9uKCl7fSx7cHJvdG90eXBlOmF9KSksYil9O3ZhciBRPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHZvaWQgMD09PWImJihiPTApLEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoQXJyYXkucHJvdG90eXBlLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGEsYikpfSxSPWZ1bmN0aW9uKGEsYil7cmV0dXJuLTEhPT1hLmluZGV4T2YoYil9O2IucmVtb3ZlRnJvbT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9YS5pbmRleE9mKGIpO3JldHVybiBjPj0wJiZhLnNwbGljZShjLDEpLGF9fSxiLmRlZmF1bHRzPWosYi5tZXJnZT1rLGIubWVyZ2VSPWZ1bmN0aW9uKGEsYil7cmV0dXJuIEooYSxiKX0sYi5hbmNlc3RvcnM9bCxiLmVxdWFsRm9yS2V5cz1tLGIucGljaz1vLGIub21pdD1wLGIucGx1Y2s9cSxiLmZpbHRlcj1yLGIuZmluZD1zLGIubWFwPXQsYi52YWx1ZXM9ZnVuY3Rpb24oYSl7cmV0dXJuIE9iamVjdC5rZXlzKGEpLm1hcChmdW5jdGlvbihiKXtyZXR1cm4gYVtiXX0pfSxiLmFsbFRydWVSPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEmJmJ9LGIuYW55VHJ1ZVI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXx8Yn0sYi5wdXNoUj1mdW5jdGlvbihhLGIpe3JldHVybiBhLnB1c2goYiksYX0sYi51bm5lc3RSPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuY29uY2F0KGIpfSxiLmZsYXR0ZW5SPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIEgoYyk/YS5jb25jYXQoYy5yZWR1Y2UoYi5mbGF0dGVuUixbXSkpOmIucHVzaFIoYSxjKX0sYi51bm5lc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVkdWNlKGIudW5uZXN0UixbXSl9LGIuZmxhdHRlbj1mdW5jdGlvbihhKXtyZXR1cm4gYS5yZWR1Y2UoYi5mbGF0dGVuUixbXSl9LGIuYXNzZXJ0UHJlZGljYXRlPXUsYi5wYWlycz1mdW5jdGlvbihhKXtyZXR1cm4gT2JqZWN0LmtleXMoYSkubWFwKGZ1bmN0aW9uKGIpe3JldHVybltiLGFbYl1dfSl9LGIuYXJyYXlUdXBsZXM9dixiLmFwcGx5UGFpcnM9dyxiLmlzSW5qZWN0YWJsZT14LGIuaXNOdWxsPWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT09YX0sYi5pc1Byb21pc2U9ZihHLGUoYi5wcm9wKFwidGhlblwiKSxEKSksYi5mblRvU3RyaW5nPXksYi5tYXhMZW5ndGg9eixiLnBhZFN0cmluZz1BLGIudGFpbD1CLGFuZ3VsYXIubW9kdWxlKFwidWkucm91dGVyLnV0aWxcIixbXCJuZ1wiLFwidWkucm91dGVyLmluaXRcIl0pLGFuZ3VsYXIubW9kdWxlKFwidWkucm91dGVyLnJvdXRlclwiLFtcInVpLnJvdXRlci51dGlsXCJdKSxhbmd1bGFyLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiLFtcInVpLnJvdXRlci5yb3V0ZXJcIixcInVpLnJvdXRlci51dGlsXCIsXCJ1aS5yb3V0ZXIuYW5ndWxhcjFcIl0pLGFuZ3VsYXIubW9kdWxlKFwidWkucm91dGVyXCIsW1widWkucm91dGVyLmluaXRcIixcInVpLnJvdXRlci5zdGF0ZVwiLFwidWkucm91dGVyLmFuZ3VsYXIxXCJdKSxhbmd1bGFyLm1vZHVsZShcInVpLnJvdXRlci5jb21wYXRcIixbXCJ1aS5yb3V0ZXJcIl0pfSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihhK1wiKCk6IE5vIGNvcmVzZXJ2aWNlcyBpbXBsZW1lbnRhdGlvbiBmb3IgVUktUm91dGVyIGlzIGxvYWRlZC4gWW91IHNob3VsZCBpbmNsdWRlIG9uZSBvZjogWydhbmd1bGFyMS5qcyddXCIpfX0sZD17JHE6dm9pZCAwLCRpbmplY3Rvcjp2b2lkIDAsbG9jYXRpb246e30sbG9jYXRpb25Db25maWc6e319O2Iuc2VydmljZXM9ZCxbXCJyZXBsYWNlXCIsXCJ1cmxcIixcInBhdGhcIixcInNlYXJjaFwiLFwiaGFzaFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3JldHVybiBkLmxvY2F0aW9uW2FdPWMoYSl9KSxbXCJwb3J0XCIsXCJwcm90b2NvbFwiLFwiaG9zdFwiLFwiYmFzZUhyZWZcIixcImh0bWw1TW9kZVwiLFwiaGFzaFByZWZpeFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3JldHVybiBkLmxvY2F0aW9uQ29uZmlnW2FdPWMoYSl9KX0sZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dm9pZCAwPT09YSYmKGE9W10pLHRoaXMuX2l0ZW1zPWF9cmV0dXJuIGEucHJvdG90eXBlLmVucXVldWU9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX2l0ZW1zLnB1c2goYSksYX0sYS5wcm90b3R5cGUuZGVxdWV1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemUoKT90aGlzLl9pdGVtcy5zcGxpY2UoMCwxKVswXTp2b2lkIDB9LGEucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5faXRlbXM7cmV0dXJuIHRoaXMuX2l0ZW1zPVtdLGF9LGEucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXRlbXMubGVuZ3RofSxhLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5faXRlbXMuaW5kZXhPZihhKTtyZXR1cm4gYj4tMSYmdGhpcy5faXRlbXMuc3BsaWNlKGIsMSlbMF19LGEucHJvdG90eXBlLnBlZWtUYWlsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2l0ZW1zW3RoaXMuX2l0ZW1zLmxlbmd0aC0xXX0sYS5wcm90b3R5cGUucGVla0hlYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplKCk/dGhpcy5faXRlbXNbMF06dm9pZCAwfSxhfSgpO2IuUXVldWU9Y30sZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGouaXMobS5UcmFuc2l0aW9uUmVqZWN0aW9uKShhLnJlYXNvbik/YS5yZWFzb24udG9TdHJpbmcoKTpcIlByb21pc2UoXCIrSlNPTi5zdHJpbmdpZnkoYSkrXCIpXCJ9ZnVuY3Rpb24gZShhKXt2YXIgYj1qLmZuVG9TdHJpbmcoYSksYz1iLm1hdGNoKC9eKGZ1bmN0aW9uIFteIF0rXFwoW14pXSpcXCkpLyk7cmV0dXJuIGM/Y1sxXTpifWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGouaXNOdW1iZXIoYSk/aVthXTppW2lbYV1dfWZ1bmN0aW9uIGcoYSl7dmFyIGI9ai5wYXR0ZXJuKFtbai5ub3Qoai5pc0RlZmluZWQpLGoudmFsKFwidW5kZWZpbmVkXCIpXSxbai5pc051bGwsai52YWwoXCJudWxsXCIpXSxbai5pc1Byb21pc2UsZF0sW2ouaXMobC5UcmFuc2l0aW9uKSxqLmludm9rZShcInRvU3RyaW5nXCIpXSxbai5pcyhrLlJlc29sdmFibGUpLGouaW52b2tlKFwidG9TdHJpbmdcIildLFtqLmlzSW5qZWN0YWJsZSxlXSxbai52YWwoITApLGouaWRlbnRpdHldXSk7cmV0dXJuIEpTT04uc3RyaW5naWZ5KGEsZnVuY3Rpb24oYSxjKXtyZXR1cm4gYihjKX0pLnJlcGxhY2UoL1xcXFxcIi9nLCdcIicpfWZ1bmN0aW9uIGgoYSl7YS4kd2F0Y2goZnVuY3Rpb24oKXtxLmFwcHJveGltYXRlRGlnZXN0cysrfSl9dmFyIGksaj1jKDMpLGs9Yyg3KSxsPWMoOCksbT1jKDI4KSxuPWZ1bmN0aW9uKGEpe3JldHVyblwidWktdmlldyBpZCNcIithLmlkK1wiLCBjb250ZXh0dWFsIG5hbWUgJ1wiK2EubmFtZStcIkBcIithLmNyZWF0aW9uQ29udGV4dCtcIicsIGZxbjogJ1wiK2EuZnFuK1wiJ1wifSxvPWZ1bmN0aW9uKGEpe3JldHVyblwiVmlld0NvbmZpZyB0YXJnZXRpbmcgdWktdmlldzogJ1wiK2EudWlWaWV3TmFtZStcIkBcIithLnVpVmlld0NvbnRleHRBbmNob3IrXCInLCBjb250ZXh0OiAnXCIrYS5jb250ZXh0Lm5hbWUrXCInXCJ9OyFmdW5jdGlvbihhKXthW2EuUkVTT0xWRT0wXT1cIlJFU09MVkVcIixhW2EuVFJBTlNJVElPTj0xXT1cIlRSQU5TSVRJT05cIixhW2EuSE9PSz0yXT1cIkhPT0tcIixhW2EuSU5WT0tFPTNdPVwiSU5WT0tFXCIsYVthLlVJVklFVz00XT1cIlVJVklFV1wiLGFbYS5WSUVXQ09ORklHPTVdPVwiVklFV0NPTkZJR1wifShpfHwoaT17fSkpO3ZhciBwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3ZhciBhPXRoaXM7dGhpcy5fZW5hYmxlZD17fSx0aGlzLmVuYWJsZT1mdW5jdGlvbigpe2Zvcih2YXIgYj1bXSxjPTA7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKyliW2MtMF09YXJndW1lbnRzW2NdO3JldHVybiBhLl9zZXQoITAsYil9LHRoaXMuZGlzYWJsZT1mdW5jdGlvbigpe2Zvcih2YXIgYj1bXSxjPTA7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKyliW2MtMF09YXJndW1lbnRzW2NdO3JldHVybiBhLl9zZXQoITEsYil9LHRoaXMuYXBwcm94aW1hdGVEaWdlc3RzPTB9cmV0dXJuIGEucHJvdG90eXBlLl9zZXQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO2IubGVuZ3RofHwoYj1PYmplY3Qua2V5cyhpKS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGlzTmFOKHBhcnNlSW50KGEsMTApKX0pLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gaVthXX0pKSxiLm1hcChmKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3JldHVybiBjLl9lbmFibGVkW2JdPWF9KX0sYS5wcm90b3R5cGUuZW5hYmxlZD1mdW5jdGlvbihhKXtyZXR1cm4hIXRoaXMuX2VuYWJsZWRbZihhKV19LGEucHJvdG90eXBlLnRyYWNlVHJhbnNpdGlvblN0YXJ0PWZ1bmN0aW9uKGEpe2lmKHRoaXMuZW5hYmxlZChpLlRSQU5TSVRJT04pKXt2YXIgYj1hLiRpZCxjPXRoaXMuYXBwcm94aW1hdGVEaWdlc3RzLGQ9ZyhhKTtjb25zb2xlLmxvZyhcIlRyYW5zaXRpb24gI1wiK2IrXCIgRGlnZXN0ICNcIitjK1wiOiBTdGFydGVkICAtPiBcIitkKX19LGEucHJvdG90eXBlLnRyYWNlVHJhbnNpdGlvbklnbm9yZWQ9ZnVuY3Rpb24oYSl7aWYodGhpcy5lbmFibGVkKGkuVFJBTlNJVElPTikpe3ZhciBiPWEuJGlkLGM9dGhpcy5hcHByb3hpbWF0ZURpZ2VzdHMsZD1nKGEpO2NvbnNvbGUubG9nKFwiVHJhbnNpdGlvbiAjXCIrYitcIiBEaWdlc3QgI1wiK2MrXCI6IElnbm9yZWQgIDw+IFwiK2QpfX0sYS5wcm90b3R5cGUudHJhY2VIb29rSW52b2NhdGlvbj1mdW5jdGlvbihhLGIpe2lmKHRoaXMuZW5hYmxlZChpLkhPT0spKXt2YXIgYz1qLnBhcnNlKFwidHJhbnNpdGlvbi4kaWRcIikoYiksZD10aGlzLmFwcHJveGltYXRlRGlnZXN0cyxmPWoucGFyc2UoXCJ0cmFjZURhdGEuaG9va1R5cGVcIikoYil8fFwiaW50ZXJuYWxcIixnPWoucGFyc2UoXCJ0cmFjZURhdGEuY29udGV4dC5zdGF0ZS5uYW1lXCIpKGIpfHxqLnBhcnNlKFwidHJhY2VEYXRhLmNvbnRleHRcIikoYil8fFwidW5rbm93blwiLGg9ZShhLmZuKTtjb25zb2xlLmxvZyhcIlRyYW5zaXRpb24gI1wiK2MrXCIgRGlnZXN0ICNcIitkK1wiOiAgIEhvb2sgLT4gXCIrZitcIiBjb250ZXh0OiBcIitnK1wiLCBcIitqLm1heExlbmd0aCgyMDAsaCkpfX0sYS5wcm90b3R5cGUudHJhY2VIb29rUmVzdWx0PWZ1bmN0aW9uKGEsYixjKXtpZih0aGlzLmVuYWJsZWQoaS5IT09LKSl7dmFyIGQ9ai5wYXJzZShcInRyYW5zaXRpb24uJGlkXCIpKGMpLGU9dGhpcy5hcHByb3hpbWF0ZURpZ2VzdHMsZj1nKGEpLGg9ZyhiKTtjb25zb2xlLmxvZyhcIlRyYW5zaXRpb24gI1wiK2QrXCIgRGlnZXN0ICNcIitlK1wiOiAgIDwtIEhvb2sgcmV0dXJuZWQ6IFwiK2oubWF4TGVuZ3RoKDIwMCxmKStcIiwgdHJhbnNpdGlvbiByZXN1bHQ6IFwiK2oubWF4TGVuZ3RoKDIwMCxoKSl9fSxhLnByb3RvdHlwZS50cmFjZVJlc29sdmVQYXRoPWZ1bmN0aW9uKGEsYil7aWYodGhpcy5lbmFibGVkKGkuUkVTT0xWRSkpe3ZhciBjPWoucGFyc2UoXCJ0cmFuc2l0aW9uLiRpZFwiKShiKSxkPXRoaXMuYXBwcm94aW1hdGVEaWdlc3RzLGU9YSYmYS50b1N0cmluZygpLGY9YiYmYi5yZXNvbHZlUG9saWN5O2NvbnNvbGUubG9nKFwiVHJhbnNpdGlvbiAjXCIrYytcIiBEaWdlc3QgI1wiK2QrXCI6ICAgICAgICAgUmVzb2x2aW5nIFwiK2UrXCIgKFwiK2YrXCIpXCIpfX0sYS5wcm90b3R5cGUudHJhY2VSZXNvbHZlUGF0aEVsZW1lbnQ9ZnVuY3Rpb24oYSxiLGMpe2lmKHRoaXMuZW5hYmxlZChpLlJFU09MVkUpJiZiLmxlbmd0aCl7dmFyIGQ9ai5wYXJzZShcInRyYW5zaXRpb24uJGlkXCIpKGMpLGU9dGhpcy5hcHByb3hpbWF0ZURpZ2VzdHMsZj1PYmplY3Qua2V5cyhiKS5qb2luKFwiLCBcIiksZz1hJiZhLnRvU3RyaW5nKCksaD1jJiZjLnJlc29sdmVQb2xpY3k7Y29uc29sZS5sb2coXCJUcmFuc2l0aW9uICNcIitkK1wiIERpZ2VzdCAjXCIrZStcIjogICAgICAgICBSZXNvbHZlIFwiK2crXCIgcmVzb2x2YWJsZXM6IFtcIitmK1wiXSAoXCIraCtcIilcIil9fSxhLnByb3RvdHlwZS50cmFjZVJlc29sdmVSZXNvbHZhYmxlPWZ1bmN0aW9uKGEsYil7aWYodGhpcy5lbmFibGVkKGkuUkVTT0xWRSkpe3ZhciBjPWoucGFyc2UoXCJ0cmFuc2l0aW9uLiRpZFwiKShiKSxkPXRoaXMuYXBwcm94aW1hdGVEaWdlc3RzLGU9YSYmYS50b1N0cmluZygpO2NvbnNvbGUubG9nKFwiVHJhbnNpdGlvbiAjXCIrYytcIiBEaWdlc3QgI1wiK2QrXCI6ICAgICAgICAgICAgICAgUmVzb2x2aW5nIC0+IFwiK2UpfX0sYS5wcm90b3R5cGUudHJhY2VSZXNvbHZhYmxlUmVzb2x2ZWQ9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmVuYWJsZWQoaS5SRVNPTFZFKSl7dmFyIGM9ai5wYXJzZShcInRyYW5zaXRpb24uJGlkXCIpKGIpLGQ9dGhpcy5hcHByb3hpbWF0ZURpZ2VzdHMsZT1hJiZhLnRvU3RyaW5nKCksZj1nKGEuZGF0YSk7Y29uc29sZS5sb2coXCJUcmFuc2l0aW9uICNcIitjK1wiIERpZ2VzdCAjXCIrZCtcIjogICAgICAgICAgICAgICA8LSBSZXNvbHZlZCAgXCIrZStcIiB0bzogXCIrai5tYXhMZW5ndGgoMjAwLGYpKX19LGEucHJvdG90eXBlLnRyYWNlUGF0aEVsZW1lbnRJbnZva2U9ZnVuY3Rpb24oYSxiLGMsZCl7aWYodGhpcy5lbmFibGVkKGkuSU5WT0tFKSl7dmFyIGY9ai5wYXJzZShcInRyYW5zaXRpb24uJGlkXCIpKGQpLGc9dGhpcy5hcHByb3hpbWF0ZURpZ2VzdHMsaD1hJiZhLnN0YXRlJiZhLnN0YXRlLnRvU3RyaW5nKCksaz1lKGIpO2NvbnNvbGUubG9nKFwiVHJhbnNpdGlvbiAjXCIrZitcIiBEaWdlc3QgI1wiK2crXCI6ICAgICAgICAgSW52b2tlIFwiK2Qud2hlbitcIjogY29udGV4dDogXCIraCtcIiBcIitqLm1heExlbmd0aCgyMDAsaykpfX0sYS5wcm90b3R5cGUudHJhY2VFcnJvcj1mdW5jdGlvbihhLGIpe2lmKHRoaXMuZW5hYmxlZChpLlRSQU5TSVRJT04pKXt2YXIgYz1iLiRpZCxkPXRoaXMuYXBwcm94aW1hdGVEaWdlc3RzLGU9ZyhiKTtjb25zb2xlLmxvZyhcIlRyYW5zaXRpb24gI1wiK2MrXCIgRGlnZXN0ICNcIitkK1wiOiA8LSBSZWplY3RlZCBcIitlK1wiLCByZWFzb246IFwiK2EpfX0sYS5wcm90b3R5cGUudHJhY2VTdWNjZXNzPWZ1bmN0aW9uKGEsYil7aWYodGhpcy5lbmFibGVkKGkuVFJBTlNJVElPTikpe3ZhciBjPWIuJGlkLGQ9dGhpcy5hcHByb3hpbWF0ZURpZ2VzdHMsZT1hLm5hbWUsZj1nKGIpO2NvbnNvbGUubG9nKFwiVHJhbnNpdGlvbiAjXCIrYytcIiBEaWdlc3QgI1wiK2QrXCI6IDwtIFN1Y2Nlc3MgIFwiK2YrXCIsIGZpbmFsIHN0YXRlOiBcIitlKX19LGEucHJvdG90eXBlLnRyYWNlVWlWaWV3RXZlbnQ9ZnVuY3Rpb24oYSxiLGMpe3ZvaWQgMD09PWMmJihjPVwiXCIpLHRoaXMuZW5hYmxlZChpLlVJVklFVykmJmNvbnNvbGUubG9nKFwidWktdmlldzogXCIrai5wYWRTdHJpbmcoMzAsYSkrXCIgXCIrbihiKStjKX0sYS5wcm90b3R5cGUudHJhY2VVaVZpZXdDb25maWdVcGRhdGVkPWZ1bmN0aW9uKGEsYil7dGhpcy5lbmFibGVkKGkuVUlWSUVXKSYmdGhpcy50cmFjZVVpVmlld0V2ZW50KFwiVXBkYXRpbmdcIixhLFwiIHdpdGggVmlld0NvbmZpZyBmcm9tIGNvbnRleHQ9J1wiK2IrXCInXCIpfSxhLnByb3RvdHlwZS50cmFjZVVpVmlld1Njb3BlQ3JlYXRlZD1mdW5jdGlvbihhLGIpe3RoaXMuZW5hYmxlZChpLlVJVklFVykmJnRoaXMudHJhY2VVaVZpZXdFdmVudChcIkNyZWF0ZWQgc2NvcGUgZm9yXCIsYSxcIiwgc2NvcGUgI1wiK2IuJGlkKX0sYS5wcm90b3R5cGUudHJhY2VVaVZpZXdGaWxsPWZ1bmN0aW9uKGEsYil7dGhpcy5lbmFibGVkKGkuVUlWSUVXKSYmdGhpcy50cmFjZVVpVmlld0V2ZW50KFwiRmlsbFwiLGEsXCIgd2l0aDogXCIrai5tYXhMZW5ndGgoMjAwLGIpKX0sYS5wcm90b3R5cGUudHJhY2VWaWV3U2VydmljZUV2ZW50PWZ1bmN0aW9uKGEsYil7dGhpcy5lbmFibGVkKGkuVklFV0NPTkZJRykmJmNvbnNvbGUubG9nKFwiJHZpZXcuVmlld0NvbmZpZzogXCIrYStcIiBcIitvKGIpKX0sYS5wcm90b3R5cGUudHJhY2VWaWV3U2VydmljZVVpVmlld0V2ZW50PWZ1bmN0aW9uKGEsYil7dGhpcy5lbmFibGVkKGkuVklFV0NPTkZJRykmJmNvbnNvbGUubG9nKFwiJHZpZXcuVmlld0NvbmZpZzogXCIrYStcIiBcIituKGIpKX0sYX0oKSxxPW5ldyBwO2IudHJhY2U9cSxoLiRpbmplY3Q9W1wiJHJvb3RTY29wZVwiXSxhbmd1bGFyLm1vZHVsZShcInVpLnJvdXRlclwiKS5ydW4oaCksYW5ndWxhci5tb2R1bGUoXCJ1aS5yb3V0ZXJcIikuc2VydmljZShcIiR0cmFjZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHF9KX0sZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMoMyksZT1jKDQpLGY9Yyg2KSxnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyl7dGhpcy5wcm9taXNlPXZvaWQgMCxkLmV4dGVuZCh0aGlzLHtuYW1lOmEscmVzb2x2ZUZuOmIsZGVwczplLnNlcnZpY2VzLiRpbmplY3Rvci5hbm5vdGF0ZShiKSxkYXRhOmN9KX1yZXR1cm4gYS5wcm90b3R5cGUucmVzb2x2ZVJlc29sdmFibGU9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO3ZvaWQgMD09PWImJihiPXt9KTt2YXIgZz10aGlzLGg9Zy5uYW1lLGk9Zy5kZXBzLGo9Zy5yZXNvbHZlRm47Zi50cmFjZS50cmFjZVJlc29sdmVSZXNvbHZhYmxlKHRoaXMsYik7dmFyIGs9ZS5zZXJ2aWNlcy4kcS5kZWZlcigpO3RoaXMucHJvbWlzZT1rLnByb21pc2U7dmFyIGw9YS5nZXRSZXNvbHZhYmxlcyhudWxsLHtvbWl0T3duTG9jYWxzOltoXX0pLG09ZC5waWNrKGwsaSksbj1kLm1hcChtLGZ1bmN0aW9uKGMpe3JldHVybiBjLmdldChhLGIpfSk7cmV0dXJuIGUuc2VydmljZXMuJHEuYWxsKG4pLnRoZW4oZnVuY3Rpb24oYSl7dHJ5e3ZhciBiPWUuc2VydmljZXMuJGluamVjdG9yLmludm9rZShqLG51bGwsYSk7ay5yZXNvbHZlKGIpfWNhdGNoKGQpe2sucmVqZWN0KGQpfXJldHVybiBjLnByb21pc2V9KS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBjLmRhdGE9YSxmLnRyYWNlLnRyYWNlUmVzb2x2YWJsZVJlc29sdmVkKGMsYiksYy5wcm9taXNlfSl9LGEucHJvdG90eXBlLmdldD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnByb21pc2V8fHRoaXMucmVzb2x2ZVJlc29sdmFibGUoYSxiKX0sYS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIlJlc29sdmFibGUobmFtZTogXCIrdGhpcy5uYW1lK1wiLCByZXF1aXJlczogW1wiK3RoaXMuZGVwcytcIl0pXCJ9LGEubWFrZVJlc29sdmFibGVzPWZ1bmN0aW9uKGIpe3ZhciBjPWQuZmlsdGVyKGIsZC5ub3QoZC5pc0Z1bmN0aW9uKSksZT1PYmplY3Qua2V5cyhjKTtpZihlLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHJlc29sdmUga2V5L3ZhbHVlOiBcIitlWzBdK1wiL1wiK2NbZVswXV0pO3JldHVybiBkLm1hcChiLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIG5ldyBhKGMsYil9KX0sYX0oKTtiLlJlc29sdmFibGU9Z30sZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMoNiksZT1jKDQpLGY9YygzKSxnPWMoOSksaD1jKDE1KSxpPWMoMTIpLGo9YygzNiksaz1jKDE3KSxsPTAsbT1uZXcgZy5SZWplY3RGYWN0b3J5LG49Zi5wcm9wKFwic2VsZlwiKSxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIpe3ZhciBjPXRoaXM7aWYodGhpcy5fZGVmZXJyZWQ9ZS5zZXJ2aWNlcy4kcS5kZWZlcigpLHRoaXMucHJvbWlzZT10aGlzLl9kZWZlcnJlZC5wcm9taXNlLHRoaXMudHJlZUNoYW5nZXM9ZnVuY3Rpb24oKXtyZXR1cm4gYy5fdHJlZUNoYW5nZXN9LHRoaXMuaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gYz09PWMuX29wdGlvbnMuY3VycmVudCgpfSwhYi52YWxpZCgpKXRocm93IG5ldyBFcnJvcihiLmVycm9yKCkpO2cuSG9va1JlZ2lzdHJ5Lm1peGluKG5ldyBnLkhvb2tSZWdpc3RyeSx0aGlzKSx0aGlzLl9vcHRpb25zPWYuZXh0ZW5kKHtjdXJyZW50OmYudmFsKHRoaXMpfSxiLm9wdGlvbnMoKSksdGhpcy4kaWQ9bCsrO3ZhciBkPWguUGF0aEZhY3RvcnkuYnVpbGRUb1BhdGgoYSxiKTt0aGlzLl90cmVlQ2hhbmdlcz1oLlBhdGhGYWN0b3J5LnRyZWVDaGFuZ2VzKGEsZCx0aGlzLl9vcHRpb25zLnJlbG9hZFN0YXRlKSxoLlBhdGhGYWN0b3J5LmJpbmRUcmFuc2l0aW9uUmVzb2x2ZSh0aGlzLl90cmVlQ2hhbmdlcyx0aGlzKX1yZXR1cm4gYS5wcm90b3R5cGUuJGZyb209ZnVuY3Rpb24oKXtyZXR1cm4gZi50YWlsKHRoaXMuX3RyZWVDaGFuZ2VzLmZyb20pLnN0YXRlfSxhLnByb3RvdHlwZS4kdG89ZnVuY3Rpb24oKXtyZXR1cm4gZi50YWlsKHRoaXMuX3RyZWVDaGFuZ2VzLnRvKS5zdGF0ZX0sYS5wcm90b3R5cGUuZnJvbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tKCkuc2VsZn0sYS5wcm90b3R5cGUudG89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8oKS5zZWxmfSxhLnByb3RvdHlwZS5pcz1mdW5jdGlvbihiKXtyZXR1cm4gYiBpbnN0YW5jZW9mIGE/dGhpcy5pcyh7dG86Yi4kdG8oKS5uYW1lLGZyb206Yi4kZnJvbSgpLm5hbWV9KTohKGIudG8mJiFnLm1hdGNoU3RhdGUodGhpcy4kdG8oKSxiLnRvKXx8Yi5mcm9tJiYhZy5tYXRjaFN0YXRlKHRoaXMuJGZyb20oKSxiLmZyb20pKX0sYS5wcm90b3R5cGUucGFyYW1zPWZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hJiYoYT1cInRvXCIpLHRoaXMuX3RyZWVDaGFuZ2VzW2FdLm1hcChmLnByb3AoXCJ2YWx1ZXNcIikpLnJlZHVjZShmLm1lcmdlUix7fSl9LGEucHJvdG90eXBlLnJlc29sdmVzPWZ1bmN0aW9uKCl7cmV0dXJuIGYubWFwKGYudGFpbCh0aGlzLl90cmVlQ2hhbmdlcy50bykucmVzb2x2ZUNvbnRleHQuZ2V0UmVzb2x2YWJsZXMoKSxmdW5jdGlvbihhKXtyZXR1cm4gYS5kYXRhfSl9LGEucHJvdG90eXBlLmFkZFJlc29sdmVzPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9XCJcIik7dmFyIGM9XCJzdHJpbmdcIj09dHlwZW9mIGI/YjpiLm5hbWUsZD10aGlzLl90cmVlQ2hhbmdlcy50byxlPWYuZmluZChkLGZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXRlLm5hbWU9PT1jfSk7Zi50YWlsKGQpLnJlc29sdmVDb250ZXh0LmFkZFJlc29sdmFibGVzKGsuUmVzb2x2YWJsZS5tYWtlUmVzb2x2YWJsZXMoYSksZS5zdGF0ZSl9LGEucHJvdG90eXBlLnByZXZpb3VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wdGlvbnMucHJldmlvdXN8fG51bGx9LGEucHJvdG90eXBlLm9wdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3B0aW9uc30sYS5wcm90b3R5cGUuZW50ZXJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gZi5tYXAodGhpcy5fdHJlZUNoYW5nZXMuZW50ZXJpbmcsZi5wcm9wKFwic3RhdGVcIikpLm1hcChuKX0sYS5wcm90b3R5cGUuZXhpdGluZz1mdW5jdGlvbigpe3JldHVybiBmLm1hcCh0aGlzLl90cmVlQ2hhbmdlcy5leGl0aW5nLGYucHJvcChcInN0YXRlXCIpKS5tYXAobikucmV2ZXJzZSgpfSxhLnByb3RvdHlwZS5yZXRhaW5lZD1mdW5jdGlvbigpe3JldHVybiBmLm1hcCh0aGlzLl90cmVlQ2hhbmdlcy5yZXRhaW5lZCxmLnByb3AoXCJzdGF0ZVwiKSkubWFwKG4pfSxhLnByb3RvdHlwZS52aWV3cz1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWEmJihhPVwiZW50ZXJpbmdcIik7dmFyIGM9dGhpcy5fdHJlZUNoYW5nZXNbYV07cmV0dXJuIGI/Zi5maW5kKGMsZi5wcm9wRXEoXCJzdGF0ZVwiLGIpKS52aWV3czpmLnVubmVzdChjLm1hcChmLnByb3AoXCJ2aWV3c1wiKSkpfSxhLnByb3RvdHlwZS5yZWRpcmVjdD1mdW5jdGlvbihiKXt2YXIgYz1mLmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMoKSxiLm9wdGlvbnMoKSx7cHJldmlvdXM6dGhpc30pO2I9bmV3IGkuVGFyZ2V0U3RhdGUoYi5pZGVudGlmaWVyKCksYi4kc3RhdGUoKSxiLnBhcmFtcygpLGMpO3ZhciBkPW5ldyBhKHRoaXMuX3RyZWVDaGFuZ2VzLmZyb20sYiksZT10aGlzLnRyZWVDaGFuZ2VzKCkudG8sZz1oLk5vZGUubWF0Y2hpbmcoZC50cmVlQ2hhbmdlcygpLnRvLGUpLGo9ZnVuY3Rpb24oYSxiKXtyZXR1cm4tMT09PVtcIiRzdGF0ZVBhcmFtc1wiLFwiJHRyYW5zaXRpb24kXCJdLmluZGV4T2YoYil9O3JldHVybiBnLmZvckVhY2goZnVuY3Rpb24oYSxiKXtyZXR1cm4gZi5leHRlbmQoYS5yZXNvbHZlcyxmLmZpbHRlcihlW2JdLnJlc29sdmVzLGopKX0pLGR9LGEucHJvdG90eXBlLmlnbm9yZWQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl90cmVlQ2hhbmdlcyxiPWEudG8sYz1hLmZyb207aWYodGhpcy5fb3B0aW9ucy5yZWxvYWR8fGYudGFpbChiKS5zdGF0ZSE9PWYudGFpbChjKS5zdGF0ZSlyZXR1cm4hMTt2YXIgZD1iLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5zY2hlbWEuZmlsdGVyKGYubm90KGYucHJvcChcImR5bmFtaWNcIikpKX0pLGU9W2IsY10ubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLm1hcChmLnByb3AoXCJ2YWx1ZXNcIikpfSksZz1lWzBdLGg9ZVsxXSxpPWYuYXJyYXlUdXBsZXMoZCxnLGgpO3JldHVybiBpLm1hcChmdW5jdGlvbihhKXt2YXIgYj1hWzBdLGM9YVsxXSxkPWFbMl07cmV0dXJuIGouUGFyYW0uZXF1YWxzKGIsYyxkKX0pLnJlZHVjZShmLmFsbFRydWVSLCEwKX0sYS5wcm90b3R5cGUuaG9va0J1aWxkZXI9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGcuSG9va0J1aWxkZXIoZy4kdHJhbnNpdGlvbnMsdGhpcyx7dHJhbnNpdGlvbjp0aGlzLGN1cnJlbnQ6dGhpcy5fb3B0aW9ucy5jdXJyZW50fSl9LGEucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj10aGlzLmhvb2tCdWlsZGVyKCksYz1nLlRyYW5zaXRpb25Ib29rLnJ1blN5bmNocm9ub3VzSG9va3MsZj1mdW5jdGlvbigpe3JldHVybiBjKGIuZ2V0T25TdWNjZXNzSG9va3MoKSx7fSwhMCl9LGg9ZnVuY3Rpb24oYSl7cmV0dXJuIGMoYi5nZXRPbkVycm9ySG9va3MoKSx7JGVycm9yJDphfSwhMCl9O3RoaXMucHJvbWlzZS50aGVuKGYsaCk7dmFyIGk9YyhiLmdldE9uQmVmb3JlSG9va3MoKSk7aWYoZy5UcmFuc2l0aW9uSG9vay5pc1JlamVjdGlvbihpKSl7dmFyIGo9aS5yZWFzb247cmV0dXJuIHRoaXMuX2RlZmVycmVkLnJlamVjdChqKSx0aGlzLnByb21pc2V9aWYoIXRoaXMudmFsaWQoKSl7dmFyIGs9bmV3IEVycm9yKHRoaXMuZXJyb3IoKSk7cmV0dXJuIHRoaXMuX2RlZmVycmVkLnJlamVjdChrKSx0aGlzLnByb21pc2V9aWYodGhpcy5pZ25vcmVkKCkpe2QudHJhY2UudHJhY2VUcmFuc2l0aW9uSWdub3JlZCh0aGlzKTt2YXIgbD1tLmlnbm9yZWQoKTtyZXR1cm4gdGhpcy5fZGVmZXJyZWQucmVqZWN0KGwucmVhc29uKSx0aGlzLnByb21pc2V9dmFyIG49ZnVuY3Rpb24oKXthLl9kZWZlcnJlZC5yZXNvbHZlKGEpLGQudHJhY2UudHJhY2VTdWNjZXNzKGEuJHRvKCksYSl9LG89ZnVuY3Rpb24oYil7cmV0dXJuIGEuX2RlZmVycmVkLnJlamVjdChiKSxkLnRyYWNlLnRyYWNlRXJyb3IoYixhKSxlLnNlcnZpY2VzLiRxLnJlamVjdChiKX07ZC50cmFjZS50cmFjZVRyYW5zaXRpb25TdGFydCh0aGlzKTt2YXIgcD1iLmFzeW5jSG9va3MoKS5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS50aGVuKGIuaW52b2tlU3RlcCl9LGkpO3JldHVybiBwLnRoZW4obixvKSx0aGlzLnByb21pc2V9LGEucHJvdG90eXBlLnZhbGlkPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuZXJyb3IoKX0sYS5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiR0bygpO3JldHVybiBhLnNlbGZbZi5hYnN0cmFjdEtleV0/XCJDYW5ub3QgdHJhbnNpdGlvbiB0byBhYnN0cmFjdCBzdGF0ZSAnXCIrYS5uYW1lK1wiJ1wiOmouUGFyYW0udmFsaWRhdGVzKGEucGFyYW1ldGVycygpLHRoaXMucGFyYW1zKCkpP3ZvaWQgMDpcIlBhcmFtIHZhbHVlcyBub3QgdmFsaWQgZm9yIHN0YXRlICdcIithLm5hbWUrXCInXCJ9LGEucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5mcm9tKCksYj10aGlzLnRvKCksYz1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9PWFbXCIjXCJdJiZ2b2lkIDAhPT1hW1wiI1wiXT9hOmYub21pdChhLFwiI1wiKX0sZD10aGlzLiRpZCxlPWYuaXNPYmplY3QoYSk/YS5uYW1lOmEsZz1mLnRvSnNvbihjKHRoaXMuX3RyZWVDaGFuZ2VzLmZyb20ubWFwKGYucHJvcChcInZhbHVlc1wiKSkucmVkdWNlKGYubWVyZ2VSLHt9KSkpLGg9dGhpcy52YWxpZCgpP1wiXCI6XCIoWCkgXCIsaT1mLmlzT2JqZWN0KGIpP2IubmFtZTpiLGo9Zi50b0pzb24oYyh0aGlzLnBhcmFtcygpKSk7cmV0dXJuXCJUcmFuc2l0aW9uI1wiK2QrXCIoICdcIitlK1wiJ1wiK2crXCIgLT4gXCIraCtcIidcIitpK1wiJ1wiK2orXCIgKVwifSxhfSgpO2IuVHJhbnNpdGlvbj1vfSxmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtmb3IodmFyIGMgaW4gYSliLmhhc093blByb3BlcnR5KGMpfHwoYltjXT1hW2NdKX1kKGMoMTApKSxkKGMoMTEpKSxkKGMoMjgpKSxkKGMoOCkpLGQoYyg0NykpLGQoYyg0OCkpfSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YygzKSxlPWMoOSksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiLGMpe3ZhciBlPXRoaXM7dGhpcy4kdHJhbnNpdGlvbnM9YSx0aGlzLnRyYW5zaXRpb249Yix0aGlzLmJhc2VIb29rT3B0aW9ucz1jLHRoaXMuZ2V0T25CZWZvcmVIb29rcz1mdW5jdGlvbigpe3JldHVybiBlLl9idWlsZFRyYW5zaXRpb25Ib29rcyhcIm9uQmVmb3JlXCIse30se2FzeW5jOiExfSl9LHRoaXMuZ2V0T25TdGFydEhvb2tzPWZ1bmN0aW9uKCl7cmV0dXJuIGUuX2J1aWxkVHJhbnNpdGlvbkhvb2tzKFwib25TdGFydFwiKX0sdGhpcy5nZXRPbkV4aXRIb29rcz1mdW5jdGlvbigpe3JldHVybiBlLl9idWlsZE5vZGVIb29rcyhcIm9uRXhpdFwiLGUudHJlZUNoYW5nZXMuZXhpdGluZy5yZXZlcnNlKCksZnVuY3Rpb24oYSl7cmV0dXJuIGUuX3RvRnJvbSh7ZnJvbTphLnN0YXRlfSl9KX0sdGhpcy5nZXRPblJldGFpbkhvb2tzPWZ1bmN0aW9uKCl7cmV0dXJuIGUuX2J1aWxkTm9kZUhvb2tzKFwib25SZXRhaW5cIixlLnRyZWVDaGFuZ2VzLnJldGFpbmVkLGZ1bmN0aW9uKGEpe3JldHVybiBlLl90b0Zyb20oKX0pfSx0aGlzLmdldE9uRW50ZXJIb29rcz1mdW5jdGlvbigpe3JldHVybiBlLl9idWlsZE5vZGVIb29rcyhcIm9uRW50ZXJcIixlLnRyZWVDaGFuZ2VzLmVudGVyaW5nLGZ1bmN0aW9uKGEpe3JldHVybiBlLl90b0Zyb20oe3RvOmEuc3RhdGV9KX0pfSx0aGlzLmdldE9uRmluaXNoSG9va3M9ZnVuY3Rpb24oKXtyZXR1cm4gZS5fYnVpbGRUcmFuc2l0aW9uSG9va3MoXCJvbkZpbmlzaFwiLHskdHJlZUNoYW5nZXMkOmUudHJlZUNoYW5nZXN9KX0sdGhpcy5nZXRPblN1Y2Nlc3NIb29rcz1mdW5jdGlvbigpe3JldHVybiBlLl9idWlsZFRyYW5zaXRpb25Ib29rcyhcIm9uU3VjY2Vzc1wiLHt9LHthc3luYzohMSxyZWplY3RJZlN1cGVyc2VkZWQ6ITF9KX0sdGhpcy5nZXRPbkVycm9ySG9va3M9ZnVuY3Rpb24oKXtyZXR1cm4gZS5fYnVpbGRUcmFuc2l0aW9uSG9va3MoXCJvbkVycm9yXCIse30se2FzeW5jOiExLHJlamVjdElmU3VwZXJzZWRlZDohMX0pfSx0aGlzLnRyZWVDaGFuZ2VzPWIudHJlZUNoYW5nZXMoKSx0aGlzLnRvU3RhdGU9ZC50YWlsKHRoaXMudHJlZUNoYW5nZXMudG8pLnN0YXRlLHRoaXMuZnJvbVN0YXRlPWQudGFpbCh0aGlzLnRyZWVDaGFuZ2VzLmZyb20pLnN0YXRlLHRoaXMudHJhbnNpdGlvbk9wdGlvbnM9Yi5vcHRpb25zKCl9cmV0dXJuIGEucHJvdG90eXBlLmFzeW5jSG9va3M9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldE9uU3RhcnRIb29rcygpLGI9dGhpcy5nZXRPbkV4aXRIb29rcygpLGM9dGhpcy5nZXRPblJldGFpbkhvb2tzKCksZT10aGlzLmdldE9uRW50ZXJIb29rcygpLGY9dGhpcy5nZXRPbkZpbmlzaEhvb2tzKCk7cmV0dXJuIGQuZmxhdHRlbihbYSxiLGMsZSxmXSkuZmlsdGVyKGQuaWRlbnRpdHkpfSxhLnByb3RvdHlwZS5fdG9Gcm9tPWZ1bmN0aW9uKGEpe3JldHVybiBkLmV4dGVuZCh7dG86dGhpcy50b1N0YXRlLGZyb206dGhpcy5mcm9tU3RhdGV9LGEpfSxhLnByb3RvdHlwZS5fYnVpbGRUcmFuc2l0aW9uSG9va3M9ZnVuY3Rpb24oYSxiLGMpe3ZhciBlPXRoaXM7dm9pZCAwPT09YiYmKGI9e30pLHZvaWQgMD09PWMmJihjPXt9KTt2YXIgZj10aGlzLnRyZWVDaGFuZ2VzLnRvLGc9ZC50YWlsKGYpO2MudHJhY2VEYXRhPXtob29rVHlwZTphLGNvbnRleHQ6Zn07dmFyIGg9ZnVuY3Rpb24oYSl7cmV0dXJuIGUuYnVpbGRIb29rKGcsYS5jYWxsYmFjayxiLGMpfTtyZXR1cm4gdGhpcy5fbWF0Y2hpbmdIb29rcyhhLHRoaXMuX3RvRnJvbSgpKS5tYXAoaCl9LGEucHJvdG90eXBlLl9idWlsZE5vZGVIb29rcz1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPXRoaXM7dm9pZCAwPT09ZCYmKGQ9e30pLHZvaWQgMD09PWUmJihlPXt9KTt2YXIgZz1mdW5jdGlvbihiKXt2YXIgZz1jKGIpO2UudHJhY2VEYXRhPXtob29rVHlwZTphLGNvbnRleHQ6Yn0sZC4kc3RhdGUkPWIuc3RhdGU7dmFyIGg9ZnVuY3Rpb24oYSl7cmV0dXJuIGYuYnVpbGRIb29rKGIsYS5jYWxsYmFjayxkLGUpfTtyZXR1cm4gZi5fbWF0Y2hpbmdIb29rcyhhLGcpLm1hcChoKX07cmV0dXJuIGIubWFwKGcpfSxhLnByb3RvdHlwZS5idWlsZEhvb2s9ZnVuY3Rpb24oYSxiLGMsZil7dm9pZCAwPT09ZiYmKGY9e30pO3ZhciBnPWQuZXh0ZW5kKHt9LHRoaXMuYmFzZUhvb2tPcHRpb25zLGYpO3JldHVybiBuZXcgZS5UcmFuc2l0aW9uSG9vayhiLGQuZXh0ZW5kKHt9LGMpLGEucmVzb2x2ZUNvbnRleHQsZyl9LGEucHJvdG90eXBlLl9tYXRjaGluZ0hvb2tzPWZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWF0Y2hlcyhiLnRvLGIuZnJvbSl9LGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5wcmlvcml0eS1hLnByaW9yaXR5fTtyZXR1cm5bdGhpcy50cmFuc2l0aW9uLHRoaXMuJHRyYW5zaXRpb25zXS5tYXAoZnVuY3Rpb24oYil7cmV0dXJuIGIuZ2V0SG9va3MoYSl9KS5maWx0ZXIoZC5hc3NlcnRQcmVkaWNhdGUoZC5pc0FycmF5LFwiYnJva2VuIGV2ZW50IG5hbWVkOiBcIithKSkucmVkdWNlKGQudW5uZXN0UikuZmlsdGVyKGMpLnNvcnQoZSl9LGF9KCk7Yi5Ib29rQnVpbGRlcj1mfSxmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhLGIpe2Z1bmN0aW9uIGMoYSl7Zm9yKHZhciBiPTA7YjxkLmxlbmd0aDtiKyspe3ZhciBjPWcuR2xvYi5mcm9tU3RyaW5nKGRbYl0pO2lmKGMmJmMubWF0Y2hlcyhhLm5hbWUpfHwhYyYmZFtiXT09PWEubmFtZSlyZXR1cm4hMH1yZXR1cm4hMX12YXIgZD1mLmlzU3RyaW5nKGIpP1tiXTpiLGU9Zi5pc0Z1bmN0aW9uKGQpP2Q6YztyZXR1cm4hIWUoYSl9ZnVuY3Rpb24gZShhLGIpe3JldHVybiBmdW5jdGlvbihjLGQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciBnPW5ldyBoKGMsZCxlKTtyZXR1cm4gYVtiXS5wdXNoKGcpLGZ1bmN0aW9uKCl7Zi5yZW1vdmVGcm9tKGFbYl0pKGcpfX19dmFyIGY9YygzKSxnPWMoMTIpO2IubWF0Y2hTdGF0ZT1kO3ZhciBoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyl7dm9pZCAwPT09YyYmKGM9e30pLHRoaXMuY2FsbGJhY2s9Yix0aGlzLm1hdGNoQ3JpdGVyaWE9Zi5leHRlbmQoe3RvOmYudmFsKCEwKSxmcm9tOmYudmFsKCEwKX0sYSksdGhpcy5wcmlvcml0eT1jLnByaW9yaXR5fHwwfXJldHVybiBhLnByb3RvdHlwZS5tYXRjaGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGQoYSx0aGlzLm1hdGNoQ3JpdGVyaWEudG8pJiZkKGIsdGhpcy5tYXRjaENyaXRlcmlhLmZyb20pfSxhfSgpO2IuRXZlbnRIb29rPWg7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dmFyIGE9dGhpczt0aGlzLl90cmFuc2l0aW9uRXZlbnRzPXtvbkJlZm9yZTpbXSxvblN0YXJ0OltdLG9uRW50ZXI6W10sb25SZXRhaW46W10sb25FeGl0OltdLG9uRmluaXNoOltdLG9uU3VjY2VzczpbXSxvbkVycm9yOltdfSx0aGlzLmdldEhvb2tzPWZ1bmN0aW9uKGIpe3JldHVybiBhLl90cmFuc2l0aW9uRXZlbnRzW2JdfSx0aGlzLm9uQmVmb3JlPWUodGhpcy5fdHJhbnNpdGlvbkV2ZW50cyxcIm9uQmVmb3JlXCIpLHRoaXMub25TdGFydD1lKHRoaXMuX3RyYW5zaXRpb25FdmVudHMsXCJvblN0YXJ0XCIpLHRoaXMub25FbnRlcj1lKHRoaXMuX3RyYW5zaXRpb25FdmVudHMsXCJvbkVudGVyXCIpLHRoaXMub25SZXRhaW49ZSh0aGlzLl90cmFuc2l0aW9uRXZlbnRzLFwib25SZXRhaW5cIiksdGhpcy5vbkV4aXQ9ZSh0aGlzLl90cmFuc2l0aW9uRXZlbnRzLFwib25FeGl0XCIpLHRoaXMub25GaW5pc2g9ZSh0aGlzLl90cmFuc2l0aW9uRXZlbnRzLFwib25GaW5pc2hcIiksdGhpcy5vblN1Y2Nlc3M9ZSh0aGlzLl90cmFuc2l0aW9uRXZlbnRzLFwib25TdWNjZXNzXCIpLHRoaXMub25FcnJvcj1lKHRoaXMuX3RyYW5zaXRpb25FdmVudHMsXCJvbkVycm9yXCIpfXJldHVybiBhLm1peGluPWZ1bmN0aW9uKGEsYil7T2JqZWN0LmtleXMoYS5fdHJhbnNpdGlvbkV2ZW50cykuY29uY2F0KFtcImdldEhvb2tzXCJdKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3JldHVybiBiW2NdPWFbY119KX0sYX0oKTtiLkhvb2tSZWdpc3RyeT1pfSxmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtmb3IodmFyIGMgaW4gYSliLmhhc093blByb3BlcnR5KGMpfHwoYltjXT1hW2NdKX1kKGMoMTMpKSxkKGMoMTQpKSxkKGMoNDEpKSxkKGMoNDIpKSxkKGMoNDMpKSxkKGMoMjMpKSxkKGMoNDQpKSxkKGMoNDUpKSxkKGMoNDYpKSxkKGMoMjkpKX0sZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dGhpcy50ZXh0PWEsdGhpcy5nbG9iPWEuc3BsaXQoXCIuXCIpfXJldHVybiBhLnByb3RvdHlwZS5tYXRjaGVzPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLnNwbGl0KFwiLlwiKSxjPTAsZD10aGlzLmdsb2IubGVuZ3RoO2Q+YztjKyspXCIqXCI9PT10aGlzLmdsb2JbY10mJihiW2NdPVwiKlwiKTtyZXR1cm5cIioqXCI9PT10aGlzLmdsb2JbMF0mJihiPWIuc2xpY2UoYi5pbmRleE9mKHRoaXMuZ2xvYlsxXSkpLGIudW5zaGlmdChcIioqXCIpKSxcIioqXCI9PT10aGlzLmdsb2JbdGhpcy5nbG9iLmxlbmd0aC0xXSYmKGIuc3BsaWNlKGIuaW5kZXhPZih0aGlzLmdsb2JbdGhpcy5nbG9iLmxlbmd0aC0yXSkrMSxOdW1iZXIuTUFYX1ZBTFVFKSxiLnB1c2goXCIqKlwiKSksdGhpcy5nbG9iLmxlbmd0aCE9Yi5sZW5ndGg/ITE6Yi5qb2luKFwiXCIpPT09dGhpcy5nbG9iLmpvaW4oXCJcIil9LGEuaXM9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5kZXhPZihcIipcIik+LTF9LGEuZnJvbVN0cmluZz1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5pcyhiKT9uZXcgYShiKTpudWxsfSxhfSgpO2IuR2xvYj1jfSxmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhLGIpe2Z1bmN0aW9uIGMoYSxiKXtyZXR1cm4gci5idWlsZGVyKGEsYil8fHRoaXN9ZnVuY3Rpb24gZChhLGIpe3JldHVybiBlLmlzT2JqZWN0KGEpP2I9YTpiLm5hbWU9YSxzLnJlZ2lzdGVyKGIpLHRoaXN9ZnVuY3Rpb24gbChhKXt3LnB1c2goYSl9ZnVuY3Rpb24gbShhLGIsYyxkLGwsbSl7ZnVuY3Rpb24gcihjLGQpe2Z1bmN0aW9uIGUoYSl7aWYoYSBpbnN0YW5jZW9mIGcuVGFyZ2V0U3RhdGUpe3ZhciBiPWE7cmV0dXJuIGI9cC50YXJnZXQoYi5pZGVudGlmaWVyKCksYi5wYXJhbXMoKSxiLm9wdGlvbnMoKSksYi52YWxpZCgpP2ooKSE9PWs/di5zdXBlcnNlZGVkKCk6cC50cmFuc2l0aW9uVG8oYi5pZGVudGlmaWVyKCksYi5wYXJhbXMoKSxiLm9wdGlvbnMoKSk6di5pbnZhbGlkKGIuZXJyb3IoKSl9fWZ1bmN0aW9uIGgoKXt2YXIgYT1tLmRlcXVldWUoKTtyZXR1cm4gdm9pZCAwPT09YT92LmludmFsaWQoZC5lcnJvcigpKTpuKGEpLnRoZW4oZSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYXx8aCgpfSl9dmFyIGo9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wZWVrVGFpbCgpfHx1LnBlZWtUYWlsKCl9LGs9aigpLGw9aS5QYXRoRmFjdG9yeS5tYWtlVGFyZ2V0U3RhdGUoYyksbT1uZXcgZi5RdWV1ZShbXS5jb25jYXQodykpLG49ZnVuY3Rpb24oYyl7cmV0dXJuIGEud2hlbihiLmludm9rZShjLG51bGwseyR0byQ6ZCwkZnJvbSQ6bH0pKX07cmV0dXJuIGgoKX12YXIgeD1tLHk9e25hbWU6XCJcIix1cmw6XCJeXCIsdmlld3M6bnVsbCxwYXJhbXM6e1wiI1wiOnt2YWx1ZTpudWxsLHR5cGU6XCJoYXNoXCJ9fSxcImFic3RyYWN0XCI6ITB9O249cy5yZWdpc3Rlcih5LCEwKSxuLm5hdmlnYWJsZT1udWxsO3ZhciB6PWZ1bmN0aW9uKCl7cmV0dXJuIGkuUGF0aEZhY3RvcnkuYmluZFRyYW5zTm9kZXNUb1BhdGgoW25ldyBpLk5vZGUobix7fSldKX07cmV0dXJuIGMucm9vdENvbnRleHQobiksZS5leHRlbmQocCx7cGFyYW1zOm5ldyBrLlN0YXRlUGFyYW1zLGN1cnJlbnQ6bi5zZWxmLCRjdXJyZW50Om4sdHJhbnNpdGlvbjpudWxsfSkscy5mbHVzaChwKSxzLmF1dG9GbHVzaD0hMCxwLnJlbG9hZD1mdW5jdGlvbihhKXtyZXR1cm4gcC50cmFuc2l0aW9uVG8ocC5jdXJyZW50LGQse3JlbG9hZDplLmlzRGVmaW5lZChhKT9hOiEwLGluaGVyaXQ6ITEsbm90aWZ5OiExfSl9LHAuZ289ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXtyZWxhdGl2ZTpwLiRjdXJyZW50LGluaGVyaXQ6ITB9LGY9ZS5kZWZhdWx0cyhjLGQsaC5kZWZhdWx0VHJhbnNPcHRzKTtyZXR1cm4gcC50cmFuc2l0aW9uVG8oYSxiLGYpfSxwLnRhcmdldD1mdW5jdGlvbihhLGIsYyl7dm9pZCAwPT09YyYmKGM9e30pO3ZhciBkPXEuZmluZChhLGMucmVsYXRpdmUpO3JldHVybiBuZXcgZy5UYXJnZXRTdGF0ZShhLGQsYixjKX0scC50cmFuc2l0aW9uVG89ZnVuY3Rpb24oYixmLGcpe2lmKHZvaWQgMD09PWYmJihmPXt9KSx2b2lkIDA9PT1nJiYoZz17fSksZz1lLmRlZmF1bHRzKGcsaC5kZWZhdWx0VHJhbnNPcHRzKSxnPWUuZXh0ZW5kKGcse2N1cnJlbnQ6dC5wZWVrVGFpbC5iaW5kKHQpfSksZS5pc09iamVjdChnLnJlbG9hZCkmJiFnLnJlbG9hZC5uYW1lKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcmVsb2FkIHN0YXRlIG9iamVjdFwiKTtpZihnLnJlbG9hZFN0YXRlPWcucmVsb2FkPT09ITA/cC4kY3VycmVudC5wYXRoWzBdOnEuZmluZChnLnJlbG9hZCxnLnJlbGF0aXZlKSxnLnJlbG9hZCYmIWcucmVsb2FkU3RhdGUpdGhyb3cgbmV3IEVycm9yKFwiTm8gc3VjaCByZWxvYWQgc3RhdGUgJ1wiKyhlLmlzU3RyaW5nKGcucmVsb2FkKT9nLnJlbG9hZDpnLnJlbG9hZC5uYW1lKStcIidcIik7dmFyIGk9cC50YXJnZXQoYixmLGcpLGs9dS5wZWVrVGFpbCgpLG09az9rLnRvOnooKTtpZighaS5leGlzdHMoKSlyZXR1cm4gcihtLGkpO2lmKCFpLnZhbGlkKCkpcmV0dXJuIGEucmVqZWN0KGkuZXJyb3IoKSk7dmFyIG49eC5jcmVhdGUobSxpKSxvPW5ldyBqLlRyYW5zaXRpb25NYW5hZ2VyKG4seCxsLGMscCxkLGEsdCx1KSxzPW8ucnVuVHJhbnNpdGlvbigpO3JldHVybiBlLmV4dGVuZChzLHt0cmFuc2l0aW9uOm59KX0scC5pcz1mdW5jdGlvbihhLGIsYyl7Yz1lLmRlZmF1bHRzKGMse3JlbGF0aXZlOnAuJGN1cnJlbnR9KTt2YXIgZj1xLmZpbmQoYSxjLnJlbGF0aXZlKTtyZXR1cm4gZS5pc0RlZmluZWQoZik/cC4kY3VycmVudCE9PWY/ITE6ZS5pc0RlZmluZWQoYikmJm51bGwhPT1iP2suUGFyYW0uZXF1YWxzKGYucGFyYW1ldGVycygpLGQsYik6ITA6dm9pZCAwfSxwLmluY2x1ZGVzPWZ1bmN0aW9uKGEsYixjKXtjPWUuZGVmYXVsdHMoYyx7cmVsYXRpdmU6cC4kY3VycmVudH0pO3ZhciBmPWUuaXNTdHJpbmcoYSkmJmcuR2xvYi5mcm9tU3RyaW5nKGEpO2lmKGYpe2lmKCFmLm1hdGNoZXMocC4kY3VycmVudC5uYW1lKSlyZXR1cm4hMTthPXAuJGN1cnJlbnQubmFtZX12YXIgaD1xLmZpbmQoYSxjLnJlbGF0aXZlKSxpPXAuJGN1cnJlbnQuaW5jbHVkZXM7cmV0dXJuIGUuaXNEZWZpbmVkKGgpP2UuaXNEZWZpbmVkKGlbaC5uYW1lXSk/Yj9lLmVxdWFsRm9yS2V5cyhrLlBhcmFtLnZhbHVlcyhoLnBhcmFtZXRlcnMoKSxiKSxkLE9iamVjdC5rZXlzKGIpKTohMDohMTp2b2lkIDB9LHAuaHJlZj1mdW5jdGlvbihhLGIsYyl7dmFyIGY9e2xvc3N5OiEwLGluaGVyaXQ6ITAsYWJzb2x1dGU6ITEscmVsYXRpdmU6cC4kY3VycmVudH07Yz1lLmRlZmF1bHRzKGMsZik7dmFyIGc9cS5maW5kKGEsYy5yZWxhdGl2ZSk7aWYoIWUuaXNEZWZpbmVkKGcpKXJldHVybiBudWxsO2MuaW5oZXJpdCYmKGI9ZC4kaW5oZXJpdChifHx7fSxwLiRjdXJyZW50LGcpKTt2YXIgaD1nJiZjLmxvc3N5P2cubmF2aWdhYmxlOmc7cmV0dXJuIGgmJnZvaWQgMCE9PWgudXJsJiZudWxsIT09aC51cmw/bC5ocmVmKGgudXJsLGsuUGFyYW0udmFsdWVzKGcucGFyYW1ldGVycygpLGIpLHthYnNvbHV0ZTpjLmFic29sdXRlfSk6bnVsbH0scC5nZXQ9ZnVuY3Rpb24oYSxiKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gT2JqZWN0LmtleXMobykubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBvW2FdLnNlbGZ9KTt2YXIgYz1xLmZpbmQoYSxifHxwLiRjdXJyZW50KTtyZXR1cm4gYyYmYy5zZWxmfHxudWxsfSxwfXZhciBuLG89e30scD1mdW5jdGlvbigpe30scT1uZXcgZy5TdGF0ZU1hdGNoZXIobykscj1uZXcgZy5TdGF0ZUJ1aWxkZXIoZnVuY3Rpb24oKXtyZXR1cm4gbn0scSxiKSxzPW5ldyBnLlN0YXRlUXVldWVNYW5hZ2VyKG8scixhLHApLHQ9bmV3IGYuUXVldWUsdT1uZXcgZi5RdWV1ZSx2PW5ldyBoLlJlamVjdEZhY3Rvcnk7dGhpcy5kZWNvcmF0b3I9Yyx0aGlzLnN0YXRlPWQ7dmFyIHc9W107dGhpcy5vbkludmFsaWQ9bCx0aGlzLiRnZXQ9bSxtLiRpbmplY3Q9W1wiJHFcIixcIiRpbmplY3RvclwiLFwiJHZpZXdcIixcIiRzdGF0ZVBhcmFtc1wiLFwiJHVybFJvdXRlclwiLFwiJHRyYW5zaXRpb25zXCJdfXZhciBlPWMoMyksZj1jKDUpLGc9YygxMiksaD1jKDkpLGk9YygxNSksaj1jKDIzKSxrPWMoMzYpO2IuJFN0YXRlUHJvdmlkZXI9ZH0sZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7Zm9yKHZhciBjIGluIGEpYi5oYXNPd25Qcm9wZXJ0eShjKXx8KGJbY109YVtjXSl9ZChjKDE2KSksZChjKDIyKSl9LGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jKDMpLGU9YygxNyksZj1jKDIxKSxnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyl7dm9pZCAwPT09YyYmKGM9e30pLHRoaXMuc3RhdGU9YSx0aGlzLnNjaGVtYT1hLnBhcmFtZXRlcnMoe2luaGVyaXQ6ITF9KTt2YXIgZz1mdW5jdGlvbihhKXtyZXR1cm5bYS5pZCxhLnZhbHVlKGJbYS5pZF0pXX07dGhpcy52YWx1ZXM9dGhpcy5zY2hlbWEucmVkdWNlKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGQuYXBwbHlQYWlycyhhLGcoYikpfSx7fSksdGhpcy5yZXNvbHZlcz1kLmV4dGVuZChkLm1hcChhLnJlc29sdmUsZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IGUuUmVzb2x2YWJsZShiLGEpfSksYyk7dmFyIGg9ZnVuY3Rpb24oYyxkKXtyZXR1cm4gbmV3IGYuVmlld0NvbmZpZyh7cmF3Vmlld05hbWU6ZCx2aWV3RGVjbGFyYXRpb25PYmo6Yyxjb250ZXh0OmEscGFyYW1zOmJ9KX07dGhpcy52aWV3cz1kLnZhbHVlcyhkLm1hcChhLnZpZXdzLGgpKX1yZXR1cm4gYS5wcm90b3R5cGUucGFyYW1ldGVyPWZ1bmN0aW9uKGEpe3JldHVybiBkLmZpbmQodGhpcy5zY2hlbWEsZC5wcm9wRXEoXCJpZFwiLGEpKX0sYS5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpczt2b2lkIDA9PT1iJiYoYj10aGlzLnNjaGVtYS5tYXAoZC5wcm9wKFwiaWRcIikpKTt2YXIgZT1mdW5jdGlvbihiKXtyZXR1cm4gYy5wYXJhbWV0ZXIoYikudHlwZS5lcXVhbHMoYy52YWx1ZXNbYl0sYS52YWx1ZXNbYl0pfTtyZXR1cm4gdGhpcy5zdGF0ZT09PWEuc3RhdGUmJmIubWFwKGUpLnJlZHVjZShkLmFsbFRydWVSLCEwKX0sYS5jbG9uZT1mdW5jdGlvbihiLGMpe3JldHVybiB2b2lkIDA9PT1jJiYoYz17fSksbmV3IGEoYi5zdGF0ZSxjLnZhbHVlc3x8Yi52YWx1ZXMsYy5yZXNvbHZlc3x8Yi5yZXNvbHZlcyl9LGEubWF0Y2hpbmc9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnJlZHVjZShmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGE9PT1kJiZkPGIubGVuZ3RoJiZjLnN0YXRlPT09YltkXS5zdGF0ZT9kKzE6YX0sMCk7cmV0dXJuIGEuc2xpY2UoMCxjKX0sYX0oKTtiLk5vZGU9Z30sZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7Zm9yKHZhciBjIGluIGEpYi5oYXNPd25Qcm9wZXJ0eShjKXx8KGJbY109YVtjXSl9ZChjKDcpKSxkKGMoMTgpKSxkKGMoMjApKX0sZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSxiKXt2YXIgYz1lLmlzU3RyaW5nKGEpP2E6bnVsbCxkPWUuaXNPYmplY3QoYSk/YTp7fSxmPWRbYi5uYW1lXXx8Y3x8aTtyZXR1cm4gaC5SZXNvbHZlUG9saWN5W2ZdfXZhciBlPWMoMyksZj1jKDYpLGc9Yyg0KSxoPWMoMTkpLGk9aC5SZXNvbHZlUG9saWN5W2guUmVzb2x2ZVBvbGljeS5MQVpZXSxqPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt0aGlzLl9wYXRoPWEsZS5leHRlbmQodGhpcyx7X25vZGVGb3I6ZnVuY3Rpb24oYSl7cmV0dXJuIGUuZmluZCh0aGlzLl9wYXRoLGUucHJvcEVxKFwic3RhdGVcIixhKSl9LF9wYXRoVG86ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fbm9kZUZvcihhKSxjPXRoaXMuX3BhdGguaW5kZXhPZihiKTtpZigtMT09PWMpdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBwYXRoIGRvZXMgbm90IGNvbnRhaW4gdGhlIHN0YXRlXCIpO3JldHVybiB0aGlzLl9wYXRoLnNsaWNlKDAsYysxKX19KX1yZXR1cm4gYS5wcm90b3R5cGUuZ2V0UmVzb2x2YWJsZXM9ZnVuY3Rpb24oYSxiKXtiPWUuZGVmYXVsdHMoYix7b21pdE93bkxvY2FsczpbXX0pO3ZhciBjPShlLmZpbmQodGhpcy5fcGF0aCxlLnByb3BFcShcIlwiKSksYT90aGlzLl9wYXRoVG8oYSk6dGhpcy5fcGF0aCksZD1lLnRhaWwoYyk7cmV0dXJuIGMucmVkdWNlKGZ1bmN0aW9uKGEsYyl7dmFyIGY9Yz09PWQ/Yi5vbWl0T3duTG9jYWxzOltdLGc9ZS5vbWl0KGMucmVzb2x2ZXMsZik7cmV0dXJuIGUuZXh0ZW5kKGEsZyl9LHt9KX0sYS5wcm90b3R5cGUuZ2V0UmVzb2x2YWJsZXNGb3JGbj1mdW5jdGlvbihhKXt2YXIgYj1nLnNlcnZpY2VzLiRpbmplY3Rvci5hbm5vdGF0ZShhKTtyZXR1cm4gZS5waWNrKHRoaXMuZ2V0UmVzb2x2YWJsZXMoKSxiKX0sYS5wcm90b3R5cGUuaXNvbGF0ZVJvb3RUbz1mdW5jdGlvbihiKXtyZXR1cm4gbmV3IGEodGhpcy5fcGF0aFRvKGIpKX0sYS5wcm90b3R5cGUuYWRkUmVzb2x2YWJsZXM9ZnVuY3Rpb24oYSxiKXtlLmV4dGVuZCh0aGlzLl9ub2RlRm9yKGIpLnJlc29sdmVzLGEpfSxhLnByb3RvdHlwZS5nZXRPd25SZXNvbHZhYmxlcz1mdW5jdGlvbihhKXtyZXR1cm4gZS5leHRlbmQoe30sdGhpcy5fbm9kZUZvcihhKS5yZXNvbHZlcyl9LGEucHJvdG90eXBlLnJlc29sdmVQYXRoPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7dm9pZCAwPT09YSYmKGE9e30pLGYudHJhY2UudHJhY2VSZXNvbHZlUGF0aCh0aGlzLl9wYXRoLGEpO3ZhciBjPWZ1bmN0aW9uKGMpe3JldHVybiBiLnJlc29sdmVQYXRoRWxlbWVudChjLnN0YXRlLGEpfTtyZXR1cm4gZy5zZXJ2aWNlcy4kcS5hbGwoZS5tYXAodGhpcy5fcGF0aCxjKSkudGhlbihlLm5vb3ApfSxhLnByb3RvdHlwZS5yZXNvbHZlUGF0aEVsZW1lbnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO3ZvaWQgMD09PWImJihiPXt9KTt2YXIgaj1iJiZiLnJlc29sdmVQb2xpY3ksaz1oLlJlc29sdmVQb2xpY3lbanx8aV0sbD10aGlzLmdldE93blJlc29sdmFibGVzKGEpLG09ZnVuY3Rpb24oYil7cmV0dXJuIGQoYS5yZXNvbHZlUG9saWN5LGIpPj1rfSxuPWUuZmlsdGVyKGwsbSksbz1mdW5jdGlvbihkKXtyZXR1cm4gZC5nZXQoYy5pc29sYXRlUm9vdFRvKGEpLGIpfSxwPWUubWFwKG4sbyk7cmV0dXJuIGYudHJhY2UudHJhY2VSZXNvbHZlUGF0aEVsZW1lbnQodGhpcyxuLGIpLGcuc2VydmljZXMuJHEuYWxsKHApLnRoZW4oZS5ub29wKX0sYS5wcm90b3R5cGUuaW52b2tlTGF0ZXI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXM7dm9pZCAwPT09YiYmKGI9e30pLHZvaWQgMD09PWMmJihjPXt9KTt2YXIgaD10aGlzLmdldFJlc29sdmFibGVzRm9yRm4oYSk7Zi50cmFjZS50cmFjZVBhdGhFbGVtZW50SW52b2tlKGUudGFpbCh0aGlzLl9wYXRoKSxhLE9iamVjdC5rZXlzKGgpLGUuZXh0ZW5kKHt3aGVuOlwiTGF0ZXJcIn0sYykpO3ZhciBpPWZ1bmN0aW9uKGEpe3JldHVybiBhLmdldChkLGMpfSxqPWUubWFwKGgsaSk7cmV0dXJuIGcuc2VydmljZXMuJHEuYWxsKGopLnRoZW4oZnVuY3Rpb24oKXt0cnl7cmV0dXJuIGQuaW52b2tlTm93KGEsYixjKX1jYXRjaChlKXtyZXR1cm4gZy5zZXJ2aWNlcy4kcS5yZWplY3QoZSl9fSl9LGEucHJvdG90eXBlLmludm9rZU5vdz1mdW5jdGlvbihhLGIsYyl7dm9pZCAwPT09YyYmKGM9e30pO3ZhciBkPXRoaXMuZ2V0UmVzb2x2YWJsZXNGb3JGbihhKTtmLnRyYWNlLnRyYWNlUGF0aEVsZW1lbnRJbnZva2UoZS50YWlsKHRoaXMuX3BhdGgpLGEsT2JqZWN0LmtleXMoZCksZS5leHRlbmQoe3doZW46XCJOb3cgIFwifSxjKSk7dmFyIGg9ZS5tYXAoZCxlLnByb3AoXCJkYXRhXCIpKTtyZXR1cm4gZy5zZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKGEsbnVsbCxlLmV4dGVuZCh7fSxiLGgpKX0sYX0oKTtiLlJlc29sdmVDb250ZXh0PWp9LGZ1bmN0aW9uKGEsYil7IWZ1bmN0aW9uKGEpe2FbYS5KSVQ9MF09XCJKSVRcIixhW2EuTEFaWT0xXT1cIkxBWllcIixhW2EuRUFHRVI9Ml09XCJFQUdFUlwifShiLlJlc29sdmVQb2xpY3l8fChiLlJlc29sdmVQb2xpY3k9e30pKTtiLlJlc29sdmVQb2xpY3l9LGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jKDMpLGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYil7dGhpcy5fcmVzb2x2ZUNvbnRleHQ9YSx0aGlzLl9zdGF0ZT1ifXJldHVybiBhLnByb3RvdHlwZS5pbnZva2VMYXRlcj1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLl9yZXNvbHZlQ29udGV4dC5pbnZva2VMYXRlcihhLGIpfSxhLnByb3RvdHlwZS5pbnZva2VOb3c9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5fcmVzb2x2ZUNvbnRleHQuaW52b2tlTm93KG51bGwsYSxiKX0sYS5wcm90b3R5cGUuZ2V0TG9jYWxzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1mdW5jdGlvbihhKXtyZXR1cm4gYS5nZXQoYi5fcmVzb2x2ZUNvbnRleHQpfTtyZXR1cm4gZC5tYXAodGhpcy5fcmVzb2x2ZUNvbnRleHQuZ2V0UmVzb2x2YWJsZXNGb3JGbihhKSxjKX0sYX0oKTtiLlJlc29sdmVJbmplY3Rvcj1lfSxmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXt2b2lkIDA9PT1hJiYoYT1cIlwiKTt2YXIgYj1hLnNwbGl0KFwiQFwiKSxjPWJbMF18fFwiJGRlZmF1bHRcIixkPWYuaXNTdHJpbmcoYlsxXSk/YlsxXTpcIl5cIixlPS9eKFxcXig/OlxcLlxcXikqKVxcLiguKiQpLy5leGVjKGMpO3JldHVybiBlJiYoZD1lWzFdLGM9ZVsyXSksXCIhXCI9PT1jLmNoYXJBdCgwKSYmKGM9Yy5zdWJzdHIoMSksZD1cIlwiKSx7dWlWaWV3TmFtZTpjLHVpVmlld0NvbnRleHRBbmNob3I6ZH19ZnVuY3Rpb24gZShhLGIsYyxkKXt2YXIgZT1bXSxoPVtdLGk9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MTtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKWJbYy0xXT1hcmd1bWVudHNbY107cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBiLnJlZHVjZShmdW5jdGlvbihiLGQpe3JldHVybiBiJiZhW2RdPT09Y1tkXX0sITApfX07dGhpcy5yb290Q29udGV4dD1mdW5jdGlvbihhKXtyZXR1cm4gYT90aGlzLl9yb290Q29udGV4dD1hOnRoaXMuX3Jvb3RDb250ZXh0fSx0aGlzLmxvYWQ9ZnVuY3Rpb24oYSxkKXtpZighYS5oYXNUZW1wbGF0ZSgpKXRocm93IG5ldyBFcnJvcihcIk5vIHRlbXBsYXRlIGNvbmZpZ3VyYXRpb24gc3BlY2lmaWVkIGZvciAnXCIrYS51aVZpZXdOYW1lK1wiQFwiK2EudWlWaWV3Q29udGV4dEFuY2hvcitcIidcIik7XG52YXIgZT17dGVtcGxhdGU6Yy53aGVuKGEuZ2V0VGVtcGxhdGUoYixkKSksY29udHJvbGxlcjpjLndoZW4oYS5nZXRDb250cm9sbGVyKGQpKX07cmV0dXJuIGMuYWxsKGUpLnRoZW4oZnVuY3Rpb24oYil7cmV0dXJuIGcudHJhY2UudHJhY2VWaWV3U2VydmljZUV2ZW50KFwiTG9hZGVkXCIsYSksZi5leHRlbmQoYSxiKX0pfSx0aGlzLnJlc2V0PWZ1bmN0aW9uKGEpe2cudHJhY2UudHJhY2VWaWV3U2VydmljZUV2ZW50KFwiPC0gUmVtb3ZpbmdcIixhKSxoLmZpbHRlcihpKGEsXCJ1aVZpZXdOYW1lXCIsXCJjb250ZXh0XCIpKS5mb3JFYWNoKGYucmVtb3ZlRnJvbShoKSl9LHRoaXMucmVnaXN0ZXJTdGF0ZVZpZXdDb25maWc9ZnVuY3Rpb24oYSl7Zy50cmFjZS50cmFjZVZpZXdTZXJ2aWNlRXZlbnQoXCItPiBSZWdpc3RlcmluZ1wiLGEpLGgucHVzaChhKX0sdGhpcy5zeW5jPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4gYS5mcW4uc3BsaXQoXCIuXCIpLmxlbmd0aH1mdW5jdGlvbiBiKGEpe2Zvcih2YXIgYj1hLmNvbnRleHQsYz0wOysrYyYmYi5wYXJlbnQ7KWI9Yi5wYXJlbnQ7cmV0dXJuIGN9dmFyIGM9ZS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuW2EuZnFuLGFdfSkucmVkdWNlKGYuYXBwbHlQYWlycyx7fSksZD1mLmN1cnJ5KGZ1bmN0aW9uKGEsYil7dmFyIGQ9Yi51aVZpZXdOYW1lLnNwbGl0KFwiLlwiKSxlPWEuZnFuLnNwbGl0KFwiLlwiKTtpZighYW5ndWxhci5lcXVhbHMoZCxlLnNsaWNlKDAtZC5sZW5ndGgpKSlyZXR1cm4hMTt2YXIgZj0xLWQubGVuZ3RofHx2b2lkIDAsZz1lLnNsaWNlKDAsZikuam9pbihcIi5cIiksaD1jW2ddLmNyZWF0aW9uQ29udGV4dDtyZXR1cm4gYi51aVZpZXdDb250ZXh0QW5jaG9yPT09KGgmJmgubmFtZSl9KSxnPWYuY3VycnkoZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGIqKGEoYyktYShkKSl9KSxpPWZ1bmN0aW9uKGEpe3ZhciBjPWguZmlsdGVyKGQoYSkpO3JldHVybiBjLmxlbmd0aD4xJiZjLnNvcnQoZyhiLC0xKSksW2EsY1swXV19LGo9ZnVuY3Rpb24oYSl7dmFyIGI9YVswXSxjPWFbMV07LTEhPT1lLmluZGV4T2YoYikmJmIuY29uZmlnVXBkYXRlZChjKX07ZS5zb3J0KGcoYSwxKSkubWFwKGkpLmZvckVhY2goail9LHRoaXMucmVnaXN0ZXJVaVZpZXc9ZnVuY3Rpb24oYSl7Zy50cmFjZS50cmFjZVZpZXdTZXJ2aWNlVWlWaWV3RXZlbnQoXCItPiBSZWdpc3RlcmluZ1wiLGEpO3ZhciBiPWZ1bmN0aW9uKGIpe3JldHVybiBiLmZxbj09PWEuZnFufTtyZXR1cm4gZS5maWx0ZXIoYikubGVuZ3RoJiZnLnRyYWNlLnRyYWNlVmlld1NlcnZpY2VVaVZpZXdFdmVudChcIiEhISEgZHVwbGljYXRlIHVpVmlldyBuYW1lZDpcIixhKSxlLnB1c2goYSksdGhpcy5zeW5jKCksZnVuY3Rpb24oKXt2YXIgYj1lLmluZGV4T2YoYSk7cmV0dXJuIDA+PWI/dm9pZCBnLnRyYWNlLnRyYWNlVmlld1NlcnZpY2VVaVZpZXdFdmVudChcIlRyaWVkIHJlbW92aW5nIG5vbi1yZWdpc3RlcmVkIHVpVmlld1wiLGEpOihnLnRyYWNlLnRyYWNlVmlld1NlcnZpY2VVaVZpZXdFdmVudChcIjwtIERlcmVnaXN0ZXJpbmdcIixhKSx2b2lkIGYucmVtb3ZlRnJvbShlKShhKSl9fSx0aGlzLmF2YWlsYWJsZT1mdW5jdGlvbigpe3JldHVybiBlLm1hcChmLnByb3AoXCJmcW5cIikpfSx0aGlzLmFjdGl2ZT1mdW5jdGlvbigpe3JldHVybiBlLmZpbHRlcihmLnByb3AoXCIkY29uZmlnXCIpKS5tYXAoZi5wcm9wKFwibmFtZVwiKSl9fXZhciBmPWMoMyksZz1jKDIpLGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3ZhciBiPWQoYS5yYXdWaWV3TmFtZSksYz1iLnVpVmlld05hbWUsZT1iLnVpVmlld0NvbnRleHRBbmNob3IsZz0vXihcXF4oPzpcXC5cXF4pKikkLztpZihnLmV4ZWMoZSkpe3ZhciBoPWUuc3BsaXQoXCIuXCIpLnJlZHVjZShmdW5jdGlvbihhLGIpe3JldHVybiBhLnBhcmVudH0sYS5jb250ZXh0KTtlPWgubmFtZX1mLmV4dGVuZCh0aGlzLGYucGljayhhLFwidmlld0RlY2xhcmF0aW9uT2JqXCIsXCJwYXJhbXNcIixcImNvbnRleHRcIixcImxvY2Fsc1wiKSx7dWlWaWV3TmFtZTpjLHVpVmlld0NvbnRleHRBbmNob3I6ZX0pLHRoaXMuY29udHJvbGxlckFzPWEudmlld0RlY2xhcmF0aW9uT2JqLmNvbnRyb2xsZXJBc31yZXR1cm4gYS5wcm90b3R5cGUuaGFzVGVtcGxhdGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnZpZXdEZWNsYXJhdGlvbk9iajtyZXR1cm4hIShhLnRlbXBsYXRlfHxhLnRlbXBsYXRlVXJsfHxhLnRlbXBsYXRlUHJvdmlkZXIpfSxhLnByb3RvdHlwZS5nZXRUZW1wbGF0ZT1mdW5jdGlvbihhLGIpe3JldHVybiBhLmZyb21Db25maWcodGhpcy52aWV3RGVjbGFyYXRpb25PYmosdGhpcy5wYXJhbXMsYi5pbnZva2VMYXRlci5iaW5kKGIpKX0sYS5wcm90b3R5cGUuZ2V0Q29udHJvbGxlcj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLnZpZXdEZWNsYXJhdGlvbk9iai5jb250cm9sbGVyUHJvdmlkZXI7cmV0dXJuIGYuaXNJbmplY3RhYmxlKGIpP2EuaW52b2tlTGF0ZXIoYix7fSk6dGhpcy52aWV3RGVjbGFyYXRpb25PYmouY29udHJvbGxlcn0sYX0oKTtiLlZpZXdDb25maWc9aCxlLiRpbmplY3Q9W1wiJHJvb3RTY29wZVwiLFwiJHRlbXBsYXRlRmFjdG9yeVwiLFwiJHFcIixcIiR0aW1lb3V0XCJdLGFuZ3VsYXIubW9kdWxlKFwidWkucm91dGVyLnN0YXRlXCIpLnNlcnZpY2UoXCIkdmlld1wiLGUpfSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YygzKSxlPWMoMTIpLGY9YygxNSksZz1jKDE3KSxoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe31yZXR1cm4gYS5tYWtlVGFyZ2V0U3RhdGU9ZnVuY3Rpb24oYSl7dmFyIGI9ZC50YWlsKGEpLnN0YXRlO3JldHVybiBuZXcgZS5UYXJnZXRTdGF0ZShiLGIsYS5tYXAoZC5wcm9wKFwidmFsdWVzXCIpKS5yZWR1Y2UoZC5tZXJnZVIse30pKX0sYS5idWlsZFRvUGF0aD1mdW5jdGlvbihiLGMpe3ZhciBkPWMucGFyYW1zKCksZT1hLm1ha2VQYXJhbXNOb2RlKGQpLGY9Yy4kc3RhdGUoKS5wYXRoLm1hcChlKTtyZXR1cm4gYy5vcHRpb25zKCkuaW5oZXJpdCYmKGY9YS5pbmhlcml0UGFyYW1zKGIsZixPYmplY3Qua2V5cyhkKSkpLGZ9LGEuaW5oZXJpdFBhcmFtcz1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZShhLGIpe3ZhciBjPWQuZmluZChhLGQucHJvcEVxKFwic3RhdGVcIixiKSk7cmV0dXJuIGQuZXh0ZW5kKHt9LGMmJmMudmFsdWVzKX12b2lkIDA9PT1jJiYoYz1bXSk7dmFyIGc9ZC5jdXJyeShmdW5jdGlvbihhLGIsYyl7dmFyIGc9ZC5leHRlbmQoe30sYyYmYy52YWx1ZXMpLGg9ZC5waWNrKGcsYik7Zz1kLm9taXQoZyxiKTt2YXIgaT1lKGEsYy5zdGF0ZSl8fHt9LGo9ZC5leHRlbmQoZyxpLGgpO3JldHVybiBuZXcgZi5Ob2RlKGMuc3RhdGUsail9KTtyZXR1cm4gYi5tYXAoZyhhLGMpKX0sYS5iaW5kVHJhbnNOb2Rlc1RvUGF0aD1mdW5jdGlvbihhKXt2YXIgYj1uZXcgZy5SZXNvbHZlQ29udGV4dChhKTtyZXR1cm4gYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVzb2x2ZUNvbnRleHQ9Yi5pc29sYXRlUm9vdFRvKGEuc3RhdGUpLGEucmVzb2x2ZUluamVjdG9yPW5ldyBnLlJlc29sdmVJbmplY3RvcihhLnJlc29sdmVDb250ZXh0LGEuc3RhdGUpLGEucmVzb2x2ZXMuJHN0YXRlUGFyYW1zPW5ldyBnLlJlc29sdmFibGUoXCIkc3RhdGVQYXJhbXNcIixmdW5jdGlvbigpe3JldHVybiBhLnZhbHVlc30sYS52YWx1ZXMpfSksYX0sYS50cmVlQ2hhbmdlcz1mdW5jdGlvbihiLGMsZSl7ZnVuY3Rpb24gZyhhLGIpe3JldHVybiBmLk5vZGUuY2xvbmUoYSx7dmFsdWVzOmNbYl0udmFsdWVzfSl9Zm9yKHZhciBoPTAsaT1NYXRoLm1pbihiLmxlbmd0aCxjLmxlbmd0aCksaj1mdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJhbWV0ZXJzKHtpbmhlcml0OiExfSkuZmlsdGVyKGQubm90KGQucHJvcChcImR5bmFtaWNcIikpKS5tYXAoZC5wcm9wKFwiaWRcIikpfSxrPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuZXF1YWxzKGIsaihhLnN0YXRlKSl9O2k+aCYmYltoXS5zdGF0ZSE9PWUmJmsoYltoXSxjW2hdKTspaCsrO3ZhciBsLG0sbixvLHAscSxyLHM7cmV0dXJuIGw9YixtPWwuc2xpY2UoMCxoKSxuPWwuc2xpY2UoaCkscT1tLm1hcChnKSxyPWMuc2xpY2UoaCkscz1xLmNvbmNhdChyKSxwPWEuYmluZFRyYW5zTm9kZXNUb1BhdGgocyksbz1wLnNsaWNlKGgpLHtmcm9tOmwsdG86cCxyZXRhaW5lZDptLGV4aXRpbmc6bixlbnRlcmluZzpvfX0sYS5iaW5kVHJhbnNpdGlvblJlc29sdmU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnRvWzBdO2MucmVzb2x2ZXMuJHRyYW5zaXRpb24kPW5ldyBnLlJlc29sdmFibGUoXCIkdHJhbnNpdGlvbiRcIixmdW5jdGlvbigpe3JldHVybiBifSxiKX0sYS5tYWtlUGFyYW1zTm9kZT1kLmN1cnJ5KGZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBmLk5vZGUoYixhKX0pLGF9KCk7Yi5QYXRoRmFjdG9yeT1ofSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YygzKSxlPWMoMjQpLGY9YygyOCksZz1jKDI5KSxoPWMoMzApLGk9YygzOSksaj1jKDQwKSxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyxkLGUsZixnLGssbCl7dGhpcy50cmFuc2l0aW9uPWEsdGhpcy4kdHJhbnNpdGlvbnM9Yix0aGlzLiR1cmxSb3V0ZXI9Yyx0aGlzLiR2aWV3PWQsdGhpcy4kc3RhdGU9ZSx0aGlzLiRzdGF0ZVBhcmFtcz1mLHRoaXMuJHE9Zyx0aGlzLmFjdGl2ZVRyYW5zUT1rLHRoaXMuY2hhbmdlSGlzdG9yeT1sLHRoaXMudmlld0hvb2tzPW5ldyBoLlZpZXdIb29rcyhhLGQpLHRoaXMuZW50ZXJFeGl0SG9va3M9bmV3IGkuRW50ZXJFeGl0SG9va3MoYSksdGhpcy5yZXNvbHZlSG9va3M9bmV3IGouUmVzb2x2ZUhvb2tzKGEpLHRoaXMudHJlZUNoYW5nZXM9YS50cmVlQ2hhbmdlcygpLHRoaXMucmVnaXN0ZXJVcGRhdGVHbG9iYWxTdGF0ZSgpLHRoaXMudmlld0hvb2tzLnJlZ2lzdGVySG9va3MoKSx0aGlzLmVudGVyRXhpdEhvb2tzLnJlZ2lzdGVySG9va3MoKSx0aGlzLnJlc29sdmVIb29rcy5yZWdpc3Rlckhvb2tzKCl9cmV0dXJuIGEucHJvdG90eXBlLnJ1blRyYW5zaXRpb249ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiB0aGlzLmFjdGl2ZVRyYW5zUS5jbGVhcigpLHRoaXMuYWN0aXZlVHJhbnNRLmVucXVldWUodGhpcy50cmFuc2l0aW9uKSx0aGlzLnRyYW5zaXRpb24ucnVuKCkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYS50bygpfSlbXCJjYXRjaFwiXShmdW5jdGlvbihiKXtyZXR1cm4gYS50cmFuc1JlamVjdGVkKGIpfSlbXCJmaW5hbGx5XCJdKGZ1bmN0aW9uKCl7cmV0dXJuIGEuYWN0aXZlVHJhbnNRLnJlbW92ZShhLnRyYW5zaXRpb24pfSl9LGEucHJvdG90eXBlLnJlZ2lzdGVyVXBkYXRlR2xvYmFsU3RhdGU9ZnVuY3Rpb24oKXt0aGlzLnRyYW5zaXRpb24ub25GaW5pc2goe30sdGhpcy51cGRhdGVHbG9iYWxTdGF0ZS5iaW5kKHRoaXMpLHtwcmlvcml0eTotMWU0fSl9LGEucHJvdG90eXBlLnVwZGF0ZUdsb2JhbFN0YXRlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEudHJlZUNoYW5nZXMsYz1hLnRyYW5zaXRpb24sZD1hLiRzdGF0ZSxlPWEuY2hhbmdlSGlzdG9yeTtkLiRjdXJyZW50PWMuJHRvKCksZC5jdXJyZW50PWQuJGN1cnJlbnQuc2VsZixlLmVucXVldWUoYiksdGhpcy51cGRhdGVTdGF0ZVBhcmFtcygpfSxhLnByb3RvdHlwZS50cmFuc1JlamVjdGVkPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLnRyYW5zaXRpb24saD1iLiRzdGF0ZSxpPWIuJHN0YXRlUGFyYW1zLGo9Yi4kcTtpZihhIGluc3RhbmNlb2YgZi5UcmFuc2l0aW9uUmVqZWN0aW9uKXtpZihhLnR5cGU9PT1mLlJlamVjdFR5cGUuSUdOT1JFRCl7dmFyIGs9aC4kY3VycmVudC5wYXJhbWV0ZXJzKCkuZmlsdGVyKGQucHJvcChcImR5bmFtaWNcIikpO3JldHVybiBlLlBhcmFtLmVxdWFscyhrLGksYy5wYXJhbXMoKSl8fHRoaXMudXBkYXRlU3RhdGVQYXJhbXMoKSxoLmN1cnJlbnR9aWYoYS50eXBlPT09Zi5SZWplY3RUeXBlLlNVUEVSU0VERUQmJmEucmVkaXJlY3RlZCYmYS5kZXRhaWwgaW5zdGFuY2VvZiBnLlRhcmdldFN0YXRlKXJldHVybiB0aGlzLl9yZWRpcmVjdE1ncihjLnJlZGlyZWN0KGEuZGV0YWlsKSkucnVuVHJhbnNpdGlvbigpfXJldHVybiB0aGlzLiR0cmFuc2l0aW9ucy5kZWZhdWx0RXJyb3JIYW5kbGVyKCkoYSksai5yZWplY3QoYSl9LGEucHJvdG90eXBlLnVwZGF0ZVN0YXRlUGFyYW1zPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEudHJhbnNpdGlvbixjPWEuJHVybFJvdXRlcixlPWEuJHN0YXRlLGY9YS4kc3RhdGVQYXJhbXMsZz1iLm9wdGlvbnMoKTtlLnBhcmFtcz1iLnBhcmFtcygpLGQuY29weShlLnBhcmFtcyxmKSxmLiRzeW5jKCkuJG9mZigpLGcubG9jYXRpb24mJmUuJGN1cnJlbnQubmF2aWdhYmxlJiZjLnB1c2goZS4kY3VycmVudC5uYXZpZ2FibGUudXJsLGYse3JlcGxhY2U6XCJyZXBsYWNlXCI9PT1nLmxvY2F0aW9ufSksYy51cGRhdGUoITApfSxhLnByb3RvdHlwZS5fcmVkaXJlY3RNZ3I9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxkPWMuJHRyYW5zaXRpb25zLGU9Yy4kdXJsUm91dGVyLGY9Yy4kdmlldyxnPWMuJHN0YXRlLGg9Yy4kc3RhdGVQYXJhbXMsaT1jLiRxLGo9Yy5hY3RpdmVUcmFuc1Esaz1jLmNoYW5nZUhpc3Rvcnk7cmV0dXJuIG5ldyBhKGIsZCxlLGYsZyxoLGksaixrKX0sYX0oKTtiLlRyYW5zaXRpb25NYW5hZ2VyPWt9LGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPWMoMyksZj1jKDQpLGc9YygyNSksaD1jKDI2KSxpPWMoMjcpLGo9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxrPWZ1bmN0aW9uKGEpe3JldHVybiAwPT09W1widmFsdWVcIixcInR5cGVcIixcInNxdWFzaFwiLFwiYXJyYXlcIixcImR5bmFtaWNcIl0uZmlsdGVyKGouYmluZChhfHx7fSkpLmxlbmd0aH07IWZ1bmN0aW9uKGEpe2FbYS5QQVRIPTBdPVwiUEFUSFwiLGFbYS5TRUFSQ0g9MV09XCJTRUFSQ0hcIixhW2EuQ09ORklHPTJdPVwiQ09ORklHXCJ9KGR8fChkPXt9KSk7dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYixjLGYpe2Z1bmN0aW9uIGooYSl7cmV0dXJuIGE9ayhhKSYme3ZhbHVlOmF9fHxhLGUuZXh0ZW5kKGEseyQkZm46ZS5pc0luamVjdGFibGUoYS52YWx1ZSk/YS52YWx1ZTpmdW5jdGlvbigpe3JldHVybiBhLnZhbHVlfX0pfWZ1bmN0aW9uIGwoYixjLGUpe2lmKGIudHlwZSYmYyYmXCJzdHJpbmdcIiE9PWMubmFtZSl0aHJvdyBuZXcgRXJyb3IoXCJQYXJhbSAnXCIrYStcIicgaGFzIHR3byB0eXBlIGNvbmZpZ3VyYXRpb25zLlwiKTtyZXR1cm4gYi50eXBlJiZjJiZcInN0cmluZ1wiPT09Yy5uYW1lJiZpLnBhcmFtVHlwZXMudHlwZShiLnR5cGUpP2kucGFyYW1UeXBlcy50eXBlKGIudHlwZSk6Yz9jOmIudHlwZT9iLnR5cGUgaW5zdGFuY2VvZiBoLlR5cGU/Yi50eXBlOmkucGFyYW1UeXBlcy50eXBlKGIudHlwZSk6ZT09PWQuQ09ORklHP2kucGFyYW1UeXBlcy50eXBlKFwiYW55XCIpOmkucGFyYW1UeXBlcy50eXBlKFwic3RyaW5nXCIpfWZ1bmN0aW9uIG0oKXt2YXIgYj17YXJyYXk6Zj09PWQuU0VBUkNIP1wiYXV0b1wiOiExfSxnPWEubWF0Y2goL1xcW1xcXSQvKT97YXJyYXk6ITB9Ont9O3JldHVybiBlLmV4dGVuZChiLGcsYykuYXJyYXl9ZnVuY3Rpb24gbihhLGIpe3ZhciBjPWEuc3F1YXNoO2lmKCFifHxjPT09ITEpcmV0dXJuITE7aWYoIWUuaXNEZWZpbmVkKGMpfHxudWxsPT1jKXJldHVybiBnLm1hdGNoZXJDb25maWcuZGVmYXVsdFNxdWFzaFBvbGljeSgpO2lmKGM9PT0hMHx8ZS5pc1N0cmluZyhjKSlyZXR1cm4gYzt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHNxdWFzaCBwb2xpY3k6ICdcIitjK1wiJy4gVmFsaWQgcG9saWNpZXM6IGZhbHNlLCB0cnVlLCBvciBhcmJpdHJhcnkgc3RyaW5nXCIpfWZ1bmN0aW9uIG8oYSxiLGMsZCl7dmFyIGYsZyxoPVt7ZnJvbTpcIlwiLHRvOmN8fGI/dm9pZCAwOlwiXCJ9LHtmcm9tOm51bGwsdG86Y3x8Yj92b2lkIDA6XCJcIn1dO3JldHVybiBmPWUuaXNBcnJheShhLnJlcGxhY2UpP2EucmVwbGFjZTpbXSxlLmlzU3RyaW5nKGQpJiZmLnB1c2goe2Zyb206ZCx0bzp2b2lkIDB9KSxnPWUubWFwKGYsZS5wcm9wKFwiZnJvbVwiKSksZS5maWx0ZXIoaCxmdW5jdGlvbihhKXtyZXR1cm4tMT09PWcuaW5kZXhPZihhLmZyb20pfSkuY29uY2F0KGYpfWM9aihjKSxiPWwoYyxiLGYpO3ZhciBwPW0oKTtiPXA/Yi4kYXNBcnJheShwLGY9PT1kLlNFQVJDSCk6Yjt2YXIgcT12b2lkIDAhPT1jLnZhbHVlLHI9Yy5keW5hbWljPT09ITAscz1uKGMscSksdD1vKGMscCxxLHMpO2UuZXh0ZW5kKHRoaXMse2lkOmEsdHlwZTpiLGxvY2F0aW9uOmYsc3F1YXNoOnMscmVwbGFjZTp0LGlzT3B0aW9uYWw6cSxkeW5hbWljOnIsY29uZmlnOmMsYXJyYXk6cH0pfXJldHVybiBhLnByb3RvdHlwZS5pc0RlZmF1bHRWYWx1ZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pc09wdGlvbmFsJiZ0aGlzLnR5cGUuZXF1YWxzKHRoaXMudmFsdWUoKSxhKX0sYS5wcm90b3R5cGUudmFsdWU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWZ1bmN0aW9uKCl7aWYoIWYuc2VydmljZXMuJGluamVjdG9yKXRocm93IG5ldyBFcnJvcihcIkluamVjdGFibGUgZnVuY3Rpb25zIGNhbm5vdCBiZSBjYWxsZWQgYXQgY29uZmlndXJhdGlvbiB0aW1lXCIpO3ZhciBhPWYuc2VydmljZXMuJGluamVjdG9yLmludm9rZShiLmNvbmZpZy4kJGZuKTtpZihudWxsIT09YSYmdm9pZCAwIT09YSYmIWIudHlwZS5pcyhhKSl0aHJvdyBuZXcgRXJyb3IoXCJEZWZhdWx0IHZhbHVlIChcIithK1wiKSBmb3IgcGFyYW1ldGVyICdcIitiLmlkK1wiJyBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgVHlwZSAoXCIrYi50eXBlLm5hbWUrXCIpXCIpO3JldHVybiBhfSxkPWZ1bmN0aW9uKGEpe3ZhciBjPWUubWFwKGUuZmlsdGVyKGIucmVwbGFjZSxlLnByb3BFcShcImZyb21cIixhKSksZS5wcm9wKFwidG9cIikpO3JldHVybiBjLmxlbmd0aD9jWzBdOmF9O3JldHVybiBhPWQoYSksZS5pc0RlZmluZWQoYSk/dGhpcy50eXBlLiRub3JtYWxpemUoYSk6YygpfSxhLnByb3RvdHlwZS5pc1NlYXJjaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2F0aW9uPT09ZC5TRUFSQ0h9LGEucHJvdG90eXBlLnZhbGlkYXRlcz1mdW5jdGlvbihhKXtpZigoIWUuaXNEZWZpbmVkKGEpfHxudWxsPT09YSkmJnRoaXMuaXNPcHRpb25hbClyZXR1cm4hMDt2YXIgYj10aGlzLnR5cGUuJG5vcm1hbGl6ZShhKTtpZighdGhpcy50eXBlLmlzKGIpKXJldHVybiExO3ZhciBjPXRoaXMudHlwZS5lbmNvZGUoYik7cmV0dXJuIGUuaXNTdHJpbmcoYykmJiF0aGlzLnR5cGUucGF0dGVybi5leGVjKGMpPyExOiEwfSxhLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwie1BhcmFtOlwiK3RoaXMuaWQrXCIgXCIrdGhpcy50eXBlK1wiIHNxdWFzaDogJ1wiK3RoaXMuc3F1YXNoK1wiJyBvcHRpb25hbDogXCIrdGhpcy5pc09wdGlvbmFsK1wifVwifSxhLmZyb21Db25maWc9ZnVuY3Rpb24oYixjLGUpe3JldHVybiBuZXcgYShiLGMsZSxkLkNPTkZJRyl9LGEuZnJvbVBhdGg9ZnVuY3Rpb24oYixjLGUpe3JldHVybiBuZXcgYShiLGMsZSxkLlBBVEgpfSxhLmZyb21TZWFyY2g9ZnVuY3Rpb24oYixjLGUpe3JldHVybiBuZXcgYShiLGMsZSxkLlNFQVJDSCl9LGEudmFsdWVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGI9Ynx8e30sYS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuW2EuaWQsYS52YWx1ZShiW2EuaWRdKV19KS5yZWR1Y2UoZS5hcHBseVBhaXJzLHt9KX0sYS5lcXVhbHM9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPWJ8fHt9LGM9Y3x8e30sLTE9PT1hLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlLmVxdWFscyhiW2EuaWRdLGNbYS5pZF0pfSkuaW5kZXhPZighMSl9LGEudmFsaWRhdGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGI9Ynx8e30sLTE9PT1hLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS52YWxpZGF0ZXMoYlthLmlkXSl9KS5pbmRleE9mKCExKX0sYX0oKTtiLlBhcmFtPWx9LGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jKDMpLGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dGhpcy5faXNDYXNlSW5zZW5zaXRpdmU9ITEsdGhpcy5faXNTdHJpY3RNb2RlPSEwLHRoaXMuX2RlZmF1bHRTcXVhc2hQb2xpY3k9ITF9cmV0dXJuIGEucHJvdG90eXBlLmNhc2VJbnNlbnNpdGl2ZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5faXNDYXNlSW5zZW5zaXRpdmU9ZC5pc0RlZmluZWQoYSk/YTp0aGlzLl9pc0Nhc2VJbnNlbnNpdGl2ZX0sYS5wcm90b3R5cGUuc3RyaWN0TW9kZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5faXNTdHJpY3RNb2RlPWQuaXNEZWZpbmVkKGEpP2E6dGhpcy5faXNTdHJpY3RNb2RlfSxhLnByb3RvdHlwZS5kZWZhdWx0U3F1YXNoUG9saWN5PWZ1bmN0aW9uKGEpe2lmKGQuaXNEZWZpbmVkKGEpJiZhIT09ITAmJmEhPT0hMSYmIWQuaXNTdHJpbmcoYSkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzcXVhc2ggcG9saWN5OiBcIithK1wiLiBWYWxpZCBwb2xpY2llczogZmFsc2UsIHRydWUsIGFyYml0cmFyeS1zdHJpbmdcIik7cmV0dXJuIHRoaXMuX2RlZmF1bHRTcXVhc2hQb2xpY3k9ZC5pc0RlZmluZWQoYSk/YTp0aGlzLl9kZWZhdWx0U3F1YXNoUG9saWN5fSxhfSgpO2IubWF0Y2hlckNvbmZpZz1uZXcgZX0sZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSxiKXtmdW5jdGlvbiBjKGEpe3JldHVybiBlLmlzQXJyYXkoYSk/YTplLmlzRGVmaW5lZChhKT9bYV06W119ZnVuY3Rpb24gZChhKXtzd2l0Y2goYS5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gdm9pZCAwO2Nhc2UgMTpyZXR1cm5cImF1dG9cIj09PWI/YVswXTphO2RlZmF1bHQ6cmV0dXJuIGF9fWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gZnVuY3Rpb24oZil7dmFyIGc9YyhmKSxoPWUubWFwKGcsYSk7cmV0dXJuIGI9PT0hMD8wPT09ZS5maWx0ZXIoaCxmdW5jdGlvbihhKXtyZXR1cm4hYX0pLmxlbmd0aDpkKGgpfX1mdW5jdGlvbiBnKGEpe3JldHVybiBmdW5jdGlvbihiLGQpe3ZhciBlPWMoYiksZj1jKGQpO2lmKGUubGVuZ3RoIT09Zi5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBnPTA7ZzxlLmxlbmd0aDtnKyspaWYoIWEoZVtnXSxmW2ddKSlyZXR1cm4hMTtyZXR1cm4hMH19dmFyIGg9dGhpcztbXCJlbmNvZGVcIixcImRlY29kZVwiLFwiZXF1YWxzXCIsXCIkbm9ybWFsaXplXCJdLm1hcChmdW5jdGlvbihiKXtoW2JdPShcImVxdWFsc1wiPT09Yj9nOmYpKGFbYl0uYmluZChhKSl9KSxlLmV4dGVuZCh0aGlzLHtuYW1lOmEubmFtZSxwYXR0ZXJuOmEucGF0dGVybixpczpmKGEuaXMuYmluZChhKSwhMCksJGFycmF5TW9kZTpifSl9dmFyIGU9YygzKSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt0aGlzLnBhdHRlcm49Ly4qLyxlLmV4dGVuZCh0aGlzLGEpfXJldHVybiBhLnByb3RvdHlwZS5pcz1mdW5jdGlvbihhLGIpe3JldHVybiEwfSxhLnByb3RvdHlwZS5lbmNvZGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYX0sYS5wcm90b3R5cGUuZGVjb2RlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGF9LGEucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihhLGIpe3JldHVybiBhPT1ifSxhLnByb3RvdHlwZS4kc3ViUGF0dGVybj1mdW5jdGlvbigpe3ZhciBhPXRoaXMucGF0dGVybi50b1N0cmluZygpO3JldHVybiBhLnN1YnN0cigxLGEubGVuZ3RoLTIpfSxhLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwie1R5cGU6XCIrdGhpcy5uYW1lK1wifVwifSxhLnByb3RvdHlwZS4kbm9ybWFsaXplPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlzKGEpP2E6dGhpcy5kZWNvZGUoYSl9LGEucHJvdG90eXBlLiRhc0FycmF5PWZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIHRoaXM7aWYoXCJhdXRvXCI9PT1hJiYhYil0aHJvdyBuZXcgRXJyb3IoXCInYXV0bycgYXJyYXkgbW9kZSBpcyBmb3IgcXVlcnkgcGFyYW1ldGVycyBvbmx5XCIpO3JldHVybiBuZXcgZCh0aGlzLGEpfSxhfSgpO2IuVHlwZT1mfSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YygzKSxlPWMoNCksZj1jKDI2KSxnPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBudWxsIT1jP2MudG9TdHJpbmcoKS5yZXBsYWNlKGEsYik6Y319LGg9ZygvXFwvL2csXCIlMkZcIiksaT1nKC8lMkYvZyxcIi9cIiksaj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt0aGlzLmVucXVldWU9ITAsdGhpcy50eXBlUXVldWU9W10sdGhpcy5kZWZhdWx0VHlwZXM9e2hhc2g6e2VuY29kZTpoLGRlY29kZTppLGlzOmQuaXMoU3RyaW5nKSxwYXR0ZXJuOi8uKi8sZXF1YWxzOmQudmFsKCEwKX0sc3RyaW5nOntlbmNvZGU6aCxkZWNvZGU6aSxpczpkLmlzKFN0cmluZykscGF0dGVybjovW15cXC9dKi99LFwiaW50XCI6e2VuY29kZTpoLGRlY29kZTpmdW5jdGlvbihhKXtyZXR1cm4gcGFyc2VJbnQoYSwxMCl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiBkLmlzRGVmaW5lZChhKSYmdGhpcy5kZWNvZGUoYS50b1N0cmluZygpKT09PWF9LHBhdHRlcm46Ly0/XFxkKy99LGJvb2w6e2VuY29kZTpmdW5jdGlvbihhKXtyZXR1cm4gYSYmMXx8MH0sZGVjb2RlOmZ1bmN0aW9uKGEpe3JldHVybiAwIT09cGFyc2VJbnQoYSwxMCl9LGlzOmQuaXMoQm9vbGVhbikscGF0dGVybjovMHwxL30sZGF0ZTp7ZW5jb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlzKGEpP1thLmdldEZ1bGxZZWFyKCksKFwiMFwiKyhhLmdldE1vbnRoKCkrMSkpLnNsaWNlKC0yKSwoXCIwXCIrYS5nZXREYXRlKCkpLnNsaWNlKC0yKV0uam9pbihcIi1cIik6dm9pZCAwfSxkZWNvZGU6ZnVuY3Rpb24oYSl7aWYodGhpcy5pcyhhKSlyZXR1cm4gYTt2YXIgYj10aGlzLmNhcHR1cmUuZXhlYyhhKTtyZXR1cm4gYj9uZXcgRGF0ZShiWzFdLGJbMl0tMSxiWzNdKTp2b2lkIDB9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiBhIGluc3RhbmNlb2YgRGF0ZSYmIWlzTmFOKGEudmFsdWVPZigpKX0sZXF1YWxzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaXMoYSkmJnRoaXMuaXMoYikmJmEudG9JU09TdHJpbmcoKT09PWIudG9JU09TdHJpbmcoKX0scGF0dGVybjovWzAtOV17NH0tKD86MFsxLTldfDFbMC0yXSktKD86MFsxLTldfFsxLTJdWzAtOV18M1swLTFdKS8sY2FwdHVyZTovKFswLTldezR9KS0oMFsxLTldfDFbMC0yXSktKDBbMS05XXxbMS0yXVswLTldfDNbMC0xXSkvfSxqc29uOntlbmNvZGU6ZC50b0pzb24sZGVjb2RlOmQuZnJvbUpzb24saXM6ZC5pcyhPYmplY3QpLGVxdWFsczpkLmVxdWFscyxwYXR0ZXJuOi9bXlxcL10qL30sYW55OntlbmNvZGU6ZC5pZGVudGl0eSxkZWNvZGU6ZC5pZGVudGl0eSxlcXVhbHM6ZC5lcXVhbHMscGF0dGVybjovLiovfX07dmFyIGE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IGYuVHlwZShkLmV4dGVuZCh7bmFtZTpifSxhKSl9O3RoaXMudHlwZXM9ZC5pbmhlcml0KGQubWFwKHRoaXMuZGVmYXVsdFR5cGVzLGEpLHt9KX1yZXR1cm4gYS5wcm90b3R5cGUudHlwZT1mdW5jdGlvbihhLGIsYyl7aWYoIWQuaXNEZWZpbmVkKGIpKXJldHVybiB0aGlzLnR5cGVzW2FdO2lmKHRoaXMudHlwZXMuaGFzT3duUHJvcGVydHkoYSkpdGhyb3cgbmV3IEVycm9yKFwiQSB0eXBlIG5hbWVkICdcIithK1wiJyBoYXMgYWxyZWFkeSBiZWVuIGRlZmluZWQuXCIpO3JldHVybiB0aGlzLnR5cGVzW2FdPW5ldyBmLlR5cGUoZC5leHRlbmQoe25hbWU6YX0sYikpLGMmJih0aGlzLnR5cGVRdWV1ZS5wdXNoKHtuYW1lOmEsZGVmOmN9KSx0aGlzLmVucXVldWV8fHRoaXMuX2ZsdXNoVHlwZVF1ZXVlKCkpLHRoaXN9LGEucHJvdG90eXBlLl9mbHVzaFR5cGVRdWV1ZT1mdW5jdGlvbigpe2Zvcig7dGhpcy50eXBlUXVldWUubGVuZ3RoOyl7dmFyIGE9dGhpcy50eXBlUXVldWUuc2hpZnQoKTtpZihhLnBhdHRlcm4pdGhyb3cgbmV3IEVycm9yKFwiWW91IGNhbm5vdCBvdmVycmlkZSBhIHR5cGUncyAucGF0dGVybiBhdCBydW50aW1lLlwiKTtkLmV4dGVuZCh0aGlzLnR5cGVzW2EubmFtZV0sZS5zZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKGEuZGVmKSl9fSxhfSgpO2IucGFyYW1UeXBlcz1uZXcgan0sZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO3ZhciBkPWMoMyksZT1jKDQpOyFmdW5jdGlvbihhKXthW2EuU1VQRVJTRURFRD0yXT1cIlNVUEVSU0VERURcIixhW2EuQUJPUlRFRD0zXT1cIkFCT1JURURcIixhW2EuSU5WQUxJRD00XT1cIklOVkFMSURcIixhW2EuSUdOT1JFRD01XT1cIklHTk9SRURcIn0oYi5SZWplY3RUeXBlfHwoYi5SZWplY3RUeXBlPXt9KSk7dmFyIGY9Yi5SZWplY3RUeXBlLGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYixjKXtkLmV4dGVuZCh0aGlzLHt0eXBlOmEsbWVzc2FnZTpiLGRldGFpbDpjfSl9cmV0dXJuIGEucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJmEudG9TdHJpbmchPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nP2EudG9TdHJpbmcoKTpKU09OLnN0cmluZ2lmeShhKX0sYj10aGlzLnR5cGUsYz10aGlzLm1lc3NhZ2UsZD1hKHRoaXMuZGV0YWlsKTtyZXR1cm5cIlRyYW5zaXRpb25SZWplY3Rpb24odHlwZTogXCIrYitcIiwgbWVzc2FnZTogXCIrYytcIiwgZGV0YWlsOiBcIitkK1wiKVwifSxhfSgpO2IuVHJhbnNpdGlvblJlamVjdGlvbj1nO3ZhciBoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe31yZXR1cm4gYS5wcm90b3R5cGUuc3VwZXJzZWRlZD1mdW5jdGlvbihhLGIpe3ZhciBjPVwiVGhlIHRyYW5zaXRpb24gaGFzIGJlZW4gc3VwZXJzZWRlZCBieSBhIGRpZmZlcmVudCB0cmFuc2l0aW9uIChzZWUgZGV0YWlsKS5cIixoPW5ldyBnKGYuU1VQRVJTRURFRCxjLGEpO3JldHVybiBiJiZiLnJlZGlyZWN0ZWQmJihoLnJlZGlyZWN0ZWQ9ITApLGQuZXh0ZW5kKGUuc2VydmljZXMuJHEucmVqZWN0KGgpLHtyZWFzb246aH0pfSxhLnByb3RvdHlwZS5yZWRpcmVjdGVkPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnN1cGVyc2VkZWQoYSx7cmVkaXJlY3RlZDohMH0pfSxhLnByb3RvdHlwZS5pbnZhbGlkPWZ1bmN0aW9uKGEpe3ZhciBiPVwiVGhpcyB0cmFuc2l0aW9uIGlzIGludmFsaWQgKHNlZSBkZXRhaWwpXCIsYz1uZXcgZyhmLklOVkFMSUQsYixhKTtyZXR1cm4gZC5leHRlbmQoZS5zZXJ2aWNlcy4kcS5yZWplY3QoYykse3JlYXNvbjpjfSl9LGEucHJvdG90eXBlLmlnbm9yZWQ9ZnVuY3Rpb24oYSl7dmFyIGI9XCJUaGUgdHJhbnNpdGlvbiB3YXMgaWdub3JlZC5cIixjPW5ldyBnKGYuSUdOT1JFRCxiLGEpO3JldHVybiBkLmV4dGVuZChlLnNlcnZpY2VzLiRxLnJlamVjdChjKSx7cmVhc29uOmN9KX0sYS5wcm90b3R5cGUuYWJvcnRlZD1mdW5jdGlvbihhKXt2YXIgYj1cIlRoZSB0cmFuc2l0aW9uIGhhcyBiZWVuIGFib3J0ZWQuXCIsYz1uZXcgZyhmLkFCT1JURUQsYixhKTtyZXR1cm4gZC5leHRlbmQoZS5zZXJ2aWNlcy4kcS5yZWplY3QoYykse3JlYXNvbjpjfSl9LGF9KCk7Yi5SZWplY3RGYWN0b3J5PWh9LGZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYixjLGQpe3ZvaWQgMD09PWMmJihjPXt9KSx2b2lkIDA9PT1kJiYoZD17fSksdGhpcy5faWRlbnRpZmllcj1hLHRoaXMuX2RlZmluaXRpb249Yix0aGlzLl9vcHRpb25zPWQsdGhpcy5fcGFyYW1zPWN8fHt9fXJldHVybiBhLnByb3RvdHlwZS5uYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlZmluaXRpb24mJnRoaXMuX2RlZmluaXRpb24ubmFtZXx8dGhpcy5faWRlbnRpZmllcn0sYS5wcm90b3R5cGUuaWRlbnRpZmllcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZGVudGlmaWVyfSxhLnByb3RvdHlwZS5wYXJhbXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFyYW1zfSxhLnByb3RvdHlwZS4kc3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVmaW5pdGlvbn0sYS5wcm90b3R5cGUuc3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVmaW5pdGlvbiYmdGhpcy5fZGVmaW5pdGlvbi5zZWxmfSxhLnByb3RvdHlwZS5vcHRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wdGlvbnN9LGEucHJvdG90eXBlLmV4aXN0cz1mdW5jdGlvbigpe3JldHVybiEoIXRoaXMuX2RlZmluaXRpb258fCF0aGlzLl9kZWZpbml0aW9uLnNlbGYpfSxhLnByb3RvdHlwZS52YWxpZD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmVycm9yKCl9LGEucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zKCkucmVsYXRpdmU7aWYoIXRoaXMuX2RlZmluaXRpb24mJmEpe3ZhciBiPWEubmFtZT9hLm5hbWU6YTtyZXR1cm5cIkNvdWxkIG5vdCByZXNvbHZlICdcIit0aGlzLm5hbWUoKStcIicgZnJvbSBzdGF0ZSAnXCIrYitcIidcIn1yZXR1cm4gdGhpcy5fZGVmaW5pdGlvbj90aGlzLl9kZWZpbml0aW9uLnNlbGY/dm9pZCAwOlwiU3RhdGUgJ1wiK3RoaXMubmFtZSgpK1wiJyBoYXMgYW4gaW52YWxpZCBkZWZpbml0aW9uXCI6XCJObyBzdWNoIHN0YXRlICdcIit0aGlzLm5hbWUoKStcIidcIn0sYX0oKTtiLlRhcmdldFN0YXRlPWN9LGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jKDMpLGU9Yyg0KSxmPWMoMzEpLGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYil7dGhpcy50cmFuc2l0aW9uPWEsdGhpcy4kdmlldz1iLHRoaXMudHJlZUNoYW5nZXM9YS50cmVlQ2hhbmdlcygpLHRoaXMuZW50ZXJpbmdWaWV3cz1hLnZpZXdzKFwiZW50ZXJpbmdcIiksdGhpcy5leGl0aW5nVmlld3M9YS52aWV3cyhcImV4aXRpbmdcIil9cmV0dXJuIGEucHJvdG90eXBlLmxvYWRBbGxFbnRlcmluZ1ZpZXdzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWZ1bmN0aW9uKGIpe3ZhciBjPWQuZmluZChhLnRyZWVDaGFuZ2VzLnRvLGQucHJvcEVxKFwic3RhdGVcIixiLmNvbnRleHQpKS5yZXNvbHZlSW5qZWN0b3I7cmV0dXJuIGEuJHZpZXcubG9hZChiLGMpfTtyZXR1cm4gZS5zZXJ2aWNlcy4kcS5hbGwodGhpcy5lbnRlcmluZ1ZpZXdzLm1hcChiKSkudGhlbihkLm5vb3ApfSxhLnByb3RvdHlwZS5sb2FkQWxsQ29udHJvbGxlckxvY2Fscz1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1mdW5jdGlvbihiKXtmdW5jdGlvbiBjKCl7fXZhciBnPWYuYW5ub3RhdGVDb250cm9sbGVyKGIuY29udHJvbGxlciksaD1kLmZpbmQoYS50cmVlQ2hhbmdlcy50byxkLnByb3BFcShcInN0YXRlXCIsYi5jb250ZXh0KSkucmVzb2x2ZUluamVjdG9yO3JldHVybiBjLiRpbmplY3Q9ZyxlLnNlcnZpY2VzLiRxLmFsbChoLmdldExvY2FscyhjKSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYi5sb2NhbHM9YX0pfSxjPXRoaXMuZW50ZXJpbmdWaWV3cy5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuISFhLmNvbnRyb2xsZXJ9KS5tYXAoYik7cmV0dXJuIGUuc2VydmljZXMuJHEuYWxsKGMpLnRoZW4oZC5ub29wKX0sYS5wcm90b3R5cGUudXBkYXRlVmlld3M9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiR2aWV3O3RoaXMuZXhpdGluZ1ZpZXdzLmZvckVhY2goZnVuY3Rpb24oYil7cmV0dXJuIGEucmVzZXQoYil9KSx0aGlzLmVudGVyaW5nVmlld3MuZm9yRWFjaChmdW5jdGlvbihiKXtyZXR1cm4gYS5yZWdpc3RlclN0YXRlVmlld0NvbmZpZyhiKX0pLGEuc3luYygpfSxhLnByb3RvdHlwZS5yZWdpc3Rlckhvb2tzPWZ1bmN0aW9uKCl7dGhpcy5lbnRlcmluZ1ZpZXdzLmxlbmd0aCYmKHRoaXMudHJhbnNpdGlvbi5vblN0YXJ0KHt9LHRoaXMubG9hZEFsbEVudGVyaW5nVmlld3MuYmluZCh0aGlzKSksdGhpcy50cmFuc2l0aW9uLm9uRmluaXNoKHt9LHRoaXMubG9hZEFsbENvbnRyb2xsZXJMb2NhbHMuYmluZCh0aGlzKSkpLCh0aGlzLmV4aXRpbmdWaWV3cy5sZW5ndGh8fHRoaXMuZW50ZXJpbmdWaWV3cy5sZW5ndGgpJiZ0aGlzLnRyYW5zaXRpb24ub25TdWNjZXNzKHt9LHRoaXMudXBkYXRlVmlld3MuYmluZCh0aGlzKSl9LGF9KCk7Yi5WaWV3SG9va3M9Z30sZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7dmFyIGI9aC5zZXJ2aWNlcy4kaW5qZWN0b3IsYz1iLmdldChcIiRjb250cm9sbGVyXCIpLGQ9Yi5pbnN0YW50aWF0ZTt0cnl7dmFyIGU7cmV0dXJuIGIuaW5zdGFudGlhdGU9ZnVuY3Rpb24oYSl7Yi5pbnN0YW50aWF0ZT1kLGU9Yi5hbm5vdGF0ZShhKX0sYyhhLHskc2NvcGU6e319KSxlfWZpbmFsbHl7Yi5pbnN0YW50aWF0ZT1kfX1mdW5jdGlvbiBlKGEsYil7aC5zZXJ2aWNlcy4kaW5qZWN0b3I9YSxoLnNlcnZpY2VzLiRxPWJ9ZnVuY3Rpb24gZihhKXtmdW5jdGlvbiBiKGIsYyxkKXtyZXR1cm4gaC5zZXJ2aWNlcy5sb2NhdGlvbkNvbmZpZy5odG1sNU1vZGU9ZnVuY3Rpb24oKXt2YXIgYj1hLmh0bWw1TW9kZSgpO3JldHVybiBiPWkuaXNPYmplY3QoYik/Yi5lbmFibGVkOmIsYiYmZC5oaXN0b3J5fSxrKFtcInJlcGxhY2VcIixcInVybFwiLFwicGF0aFwiLFwic2VhcmNoXCIsXCJoYXNoXCJdLGIsaC5zZXJ2aWNlcy5sb2NhdGlvbiksayhbXCJwb3J0XCIsXCJwcm90b2NvbFwiLFwiaG9zdFwiXSxiLGguc2VydmljZXMubG9jYXRpb25Db25maWcpLGsoW1wiYmFzZUhyZWZcIl0sYyxoLnNlcnZpY2VzLmxvY2F0aW9uQ29uZmlnKSxsfWw9bmV3IGcuUm91dGVyLGsoW1wiaGFzaFByZWZpeFwiXSxhLGguc2VydmljZXMubG9jYXRpb25Db25maWcpLHRoaXMuJGdldD1iLGIuJGluamVjdD1bXCIkbG9jYXRpb25cIixcIiRicm93c2VyXCIsXCIkc25pZmZlclwiXX12YXIgZz1jKDMyKSxoPWMoNCksaT1jKDMpLGo9YW5ndWxhci5tb2R1bGUoXCJ1aS5yb3V0ZXIuYW5ndWxhcjFcIixbXSk7Yi5hbm5vdGF0ZUNvbnRyb2xsZXI9ZCxlLiRpbmplY3Q9W1wiJGluamVjdG9yXCIsXCIkcVwiXSxqLnJ1bihlKTt2YXIgaz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEuZm9yRWFjaChmdW5jdGlvbihhKXtyZXR1cm4gY1thXT1iW2FdLmJpbmQoYil9KX0sbD1udWxsO2YuJGluamVjdD1bXCIkbG9jYXRpb25Qcm92aWRlclwiXSxhbmd1bGFyLm1vZHVsZShcInVpLnJvdXRlci5pbml0XCIsW10pLnByb3ZpZGVyKFwibmcxVUlSb3V0ZXJcIixmKSxhbmd1bGFyLm1vZHVsZShcInVpLnJvdXRlci51dGlsXCIpLnByb3ZpZGVyKFwiJHVybE1hdGNoZXJGYWN0b3J5XCIsW1wibmcxVUlSb3V0ZXJQcm92aWRlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIGwudXJsTWF0Y2hlckZhY3Rvcnl9XSksYW5ndWxhci5tb2R1bGUoXCJ1aS5yb3V0ZXIucm91dGVyXCIpLnByb3ZpZGVyKFwiJHVybFJvdXRlclwiLFtcIm5nMVVJUm91dGVyUHJvdmlkZXJcIixmdW5jdGlvbigpe3JldHVybiBsLnVybFJvdXRlclByb3ZpZGVyfV0pLGFuZ3VsYXIubW9kdWxlKFwidWkucm91dGVyLnN0YXRlXCIpLnByb3ZpZGVyKFwiJHN0YXRlXCIsW1wibmcxVUlSb3V0ZXJQcm92aWRlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIGwuc3RhdGVQcm92aWRlcn1dKSxhbmd1bGFyLm1vZHVsZShcInVpLnJvdXRlci5pbml0XCIpLnJ1bihbXCJuZzFVSVJvdXRlclwiLGZ1bmN0aW9uKGEpe31dKSxhbmd1bGFyLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5ydW4oW1wiJHN0YXRlXCIsZnVuY3Rpb24oYSl7fV0pLGFuZ3VsYXIubW9kdWxlKFwidWkucm91dGVyLnV0aWxcIikucnVuKFtcIiR1cmxNYXRjaGVyRmFjdG9yeVwiLGZ1bmN0aW9uKGEpe31dKX0sZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMoMzMpLGU9YygzOCksZj1jKDE0KSxnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3RoaXMudXJsTWF0Y2hlckZhY3Rvcnk9bmV3IGQuVXJsTWF0Y2hlckZhY3RvcnksdGhpcy51cmxSb3V0ZXJQcm92aWRlcj1uZXcgZS4kVXJsUm91dGVyUHJvdmlkZXIodGhpcy51cmxNYXRjaGVyRmFjdG9yeSksdGhpcy5zdGF0ZVByb3ZpZGVyPW5ldyBmLiRTdGF0ZVByb3ZpZGVyKHRoaXMudXJsUm91dGVyUHJvdmlkZXIsdGhpcy51cmxNYXRjaGVyRmFjdG9yeSl9cmV0dXJuIGF9KCk7Yi5Sb3V0ZXI9Z30sZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoKXtyZXR1cm57c3RyaWN0OmYubWF0Y2hlckNvbmZpZy5zdHJpY3RNb2RlKCksY2FzZUluc2Vuc2l0aXZlOmYubWF0Y2hlckNvbmZpZy5jYXNlSW5zZW5zaXRpdmUoKX19dmFyIGU9YygzKSxmPWMoMzQpLGc9YygzNiksaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtlLmV4dGVuZCh0aGlzLHtVcmxNYXRjaGVyOmYuVXJsTWF0Y2hlcixQYXJhbTpnLlBhcmFtfSl9cmV0dXJuIGEucHJvdG90eXBlLmNhc2VJbnNlbnNpdGl2ZT1mdW5jdGlvbihhKXtyZXR1cm4gZi5tYXRjaGVyQ29uZmlnLmNhc2VJbnNlbnNpdGl2ZShhKX0sYS5wcm90b3R5cGUuc3RyaWN0TW9kZT1mdW5jdGlvbihhKXtyZXR1cm4gZi5tYXRjaGVyQ29uZmlnLnN0cmljdE1vZGUoYSl9LGEucHJvdG90eXBlLmRlZmF1bHRTcXVhc2hQb2xpY3k9ZnVuY3Rpb24oYSl7cmV0dXJuIGYubWF0Y2hlckNvbmZpZy5kZWZhdWx0U3F1YXNoUG9saWN5KGEpfSxhLnByb3RvdHlwZS5jb21waWxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBmLlVybE1hdGNoZXIoYSxlLmV4dGVuZChkKCksYikpfSxhLnByb3RvdHlwZS5pc01hdGNoZXI9ZnVuY3Rpb24oYSl7aWYoIWUuaXNPYmplY3QoYSkpcmV0dXJuITE7dmFyIGI9ITA7cmV0dXJuIGUuZm9yRWFjaChmLlVybE1hdGNoZXIucHJvdG90eXBlLGZ1bmN0aW9uKGMsZCl7ZS5pc0Z1bmN0aW9uKGMpJiYoYj1iJiZlLmlzRGVmaW5lZChhW2RdKSYmZS5pc0Z1bmN0aW9uKGFbZF0pKX0pLGJ9LGEucHJvdG90eXBlLnR5cGU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWcucGFyYW1UeXBlcy50eXBlKGEsYixjKTtyZXR1cm4gZS5pc0RlZmluZWQoYik/dGhpczpkfSxhLnByb3RvdHlwZS4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGcucGFyYW1UeXBlcy5lbnF1ZXVlPSExLGcucGFyYW1UeXBlcy5fZmx1c2hUeXBlUXVldWUoKSx0aGlzfSxhfSgpO2IuVXJsTWF0Y2hlckZhY3Rvcnk9aH0sZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7Zm9yKHZhciBjIGluIGEpYi5oYXNPd25Qcm9wZXJ0eShjKXx8KGJbY109YVtjXSl9ZChjKDM1KSksZChjKDI1KSksZChjKDMzKSksZChjKDM4KSl9LGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEsYil7dmFyIGM9W1wiXCIsXCJcIl0sZD1hLnJlcGxhY2UoL1tcXFxcXFxbXFxdXFxeJCorPy4oKXx7fV0vZyxcIlxcXFwkJlwiKTtpZighYilyZXR1cm4gZDtzd2l0Y2goYi5zcXVhc2gpe2Nhc2UhMTpjPVtcIihcIixcIilcIisoYi5pc09wdGlvbmFsP1wiP1wiOlwiXCIpXTticmVhaztjYXNlITA6Yz1bXCI/KFwiLFwiKT9cIl07YnJlYWs7ZGVmYXVsdDpjPVtcIihcIitiLnNxdWFzaCtcInxcIixcIik/XCJdfXJldHVybiBkK2NbMF0rYi50eXBlLnBhdHRlcm4uc291cmNlK2NbMV19dmFyIGU9YygzKSxmPWMoMzYpLGc9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhW2JdPWFbYl18fGMoKX0saD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYixjKXt2YXIgZz10aGlzO3RoaXMucGF0dGVybj1iLHRoaXMuY29uZmlnPWMsdGhpcy5fY2FjaGU9e3BhdGg6W10scGF0dGVybjpudWxsfSx0aGlzLl9jaGlsZHJlbj1bXSx0aGlzLl9wYXJhbXM9W10sdGhpcy5fc2VnbWVudHM9W10sdGhpcy5fY29tcGlsZWQ9W10sdGhpcy5jb25maWc9ZS5kZWZhdWx0cyh0aGlzLmNvbmZpZyx7cGFyYW1zOnt9LHN0cmljdDohMCxjYXNlSW5zZW5zaXRpdmU6ITEscGFyYW1NYXA6ZS5pZGVudGl0eX0pO2Zvcih2YXIgaCxpLGosaz0vKFs6Kl0pKFtcXHdcXFtcXF1dKyl8XFx7KFtcXHdcXFtcXF1dKykoPzpcXDpcXHMqKCg/Oltee31cXFxcXSt8XFxcXC58XFx7KD86W157fVxcXFxdK3xcXFxcLikqXFx9KSspKT9cXH0vZyxsPS8oWzpdPykoW1xcd1xcW1xcXS1dKyl8XFx7KFtcXHdcXFtcXF0tXSspKD86XFw6XFxzKigoPzpbXnt9XFxcXF0rfFxcXFwufFxceyg/Oltee31cXFxcXSt8XFxcXC4pKlxcfSkrKSk/XFx9L2csbT0wLG49W10sbz1mdW5jdGlvbihjKXtpZighYS5uYW1lVmFsaWRhdG9yLnRlc3QoYykpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYXJhbWV0ZXIgbmFtZSAnXCIrYytcIicgaW4gcGF0dGVybiAnXCIrYitcIidcIik7aWYoZS5maW5kKGcuX3BhcmFtcyxlLnByb3BFcShcImlkXCIsYykpKXRocm93IG5ldyBFcnJvcihcIkR1cGxpY2F0ZSBwYXJhbWV0ZXIgbmFtZSAnXCIrYytcIicgaW4gcGF0dGVybiAnXCIrYitcIidcIil9LHA9ZnVuY3Rpb24oYSxjKXt2YXIgZD1hWzJdfHxhWzNdLGg9Yz9hWzRdOmFbNF18fChcIipcIj09PWFbMV0/XCIuKlwiOm51bGwpO3JldHVybntpZDpkLHJlZ2V4cDpoLGNmZzpnLmNvbmZpZy5wYXJhbXNbZF0sc2VnbWVudDpiLnN1YnN0cmluZyhtLGEuaW5kZXgpLHR5cGU6aD9mLnBhcmFtVHlwZXMudHlwZShofHxcInN0cmluZ1wiKXx8ZS5pbmhlcml0KGYucGFyYW1UeXBlcy50eXBlKFwic3RyaW5nXCIpLHtwYXR0ZXJuOm5ldyBSZWdFeHAoaCxnLmNvbmZpZy5jYXNlSW5zZW5zaXRpdmU/XCJpXCI6dm9pZCAwKX0pOm51bGx9fTsoaD1rLmV4ZWMoYikpJiYoaT1wKGgsITEpLCEoaS5zZWdtZW50LmluZGV4T2YoXCI/XCIpPj0wKSk7KW8oaS5pZCksdGhpcy5fcGFyYW1zLnB1c2goZi5QYXJhbS5mcm9tUGF0aChpLmlkLGkudHlwZSx0aGlzLmNvbmZpZy5wYXJhbU1hcChpLmNmZywhMSkpKSx0aGlzLl9zZWdtZW50cy5wdXNoKGkuc2VnbWVudCksbi5wdXNoKFtpLnNlZ21lbnQsZS50YWlsKHRoaXMuX3BhcmFtcyldKSxtPWsubGFzdEluZGV4O2o9Yi5zdWJzdHJpbmcobSk7dmFyIHE9ai5pbmRleE9mKFwiP1wiKTtpZihxPj0wKXt2YXIgcj1qLnN1YnN0cmluZyhxKTtpZihqPWouc3Vic3RyaW5nKDAscSksci5sZW5ndGg+MClmb3IobT0wO2g9bC5leGVjKHIpOylpPXAoaCwhMCksbyhpLmlkKSx0aGlzLl9wYXJhbXMucHVzaChmLlBhcmFtLmZyb21TZWFyY2goaS5pZCxpLnR5cGUsdGhpcy5jb25maWcucGFyYW1NYXAoaS5jZmcsITApKSksbT1rLmxhc3RJbmRleH10aGlzLl9zZWdtZW50cy5wdXNoKGopLGUuZXh0ZW5kKHRoaXMse19jb21waWxlZDpuLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gZC5hcHBseShudWxsLGEpfSkuY29uY2F0KGQoaikpLHByZWZpeDp0aGlzLl9zZWdtZW50c1swXX0pLE9iamVjdC5mcmVlemUodGhpcyl9cmV0dXJuIGEucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW4ucHVzaChhKSxlLmZvckVhY2goYS5fY2FjaGUsZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5fY2FjaGVbY109ZS5pc0FycmF5KGIpP1tdOm51bGx9KSxhLl9jYWNoZS5wYXRoPXRoaXMuX2NhY2hlLnBhdGguY29uY2F0KHRoaXMpLGF9LGEucHJvdG90eXBlLmlzUm9vdD1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5fY2FjaGUucGF0aC5sZW5ndGh9LGEucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGF0dGVybn0sYS5wcm90b3R5cGUuZXhlYz1mdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBmKGEpe3ZhciBiPWZ1bmN0aW9uKGEpe3JldHVybiBhLnNwbGl0KFwiXCIpLnJldmVyc2UoKS5qb2luKFwiXCIpfSxjPWZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL1xcXFwtL2csXCItXCIpfSxkPWIoYSkuc3BsaXQoLy0oPyFcXFxcKS8pLGY9ZS5tYXAoZCxiKTtyZXR1cm4gZS5tYXAoZixjKS5yZXZlcnNlKCl9dmFyIGg9dGhpczt2b2lkIDA9PT1iJiYoYj17fSksdm9pZCAwPT09ZCYmKGQ9e30pO3ZhciBpPWcodGhpcy5fY2FjaGUsXCJwYXR0ZXJuXCIsZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFJlZ0V4cChbXCJeXCIsZS51bm5lc3QoaC5fY2FjaGUucGF0aC5jb25jYXQoaCkubWFwKGUucHJvcChcIl9jb21waWxlZFwiKSkpLmpvaW4oXCJcIiksaC5jb25maWcuc3RyaWN0PT09ITE/XCIvP1wiOlwiXCIsXCIkXCJdLmpvaW4oXCJcIiksaC5jb25maWcuY2FzZUluc2Vuc2l0aXZlP1wiaVwiOnZvaWQgMCl9KS5leGVjKGEpO2lmKCFpKXJldHVybiBudWxsO3ZhciBqPXRoaXMucGFyYW1ldGVycygpLGs9ai5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIWEuaXNTZWFyY2goKX0pLGw9ai5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaXNTZWFyY2goKX0pLG09dGhpcy5fY2FjaGUucGF0aC5jb25jYXQodGhpcykubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLl9zZWdtZW50cy5sZW5ndGgtMX0pLnJlZHVjZShmdW5jdGlvbihhLGIpe3JldHVybiBhK2J9KSxuPXt9O2lmKG0hPT1pLmxlbmd0aC0xKXRocm93IG5ldyBFcnJvcihcIlVuYmFsYW5jZWQgY2FwdHVyZSBncm91cCBpbiByb3V0ZSAnXCIrdGhpcy5wYXR0ZXJuK1wiJ1wiKTtmb3IodmFyIG89MDttPm87bysrKXtmb3IodmFyIHA9a1tvXSxxPWlbbysxXSxyPTA7cjxwLnJlcGxhY2U7cisrKXAucmVwbGFjZVtyXS5mcm9tPT09cSYmKHE9cC5yZXBsYWNlW3JdLnRvKTtxJiZwLmFycmF5PT09ITAmJihxPWYocSkpLG5bcC5pZF09cC52YWx1ZShxKX1yZXR1cm4gZS5mb3JFYWNoKGwsZnVuY3Rpb24oYSl7blthLmlkXT1hLnZhbHVlKGJbYS5pZF0pfSksYyYmKG5bXCIjXCJdPWMpLG59LGEucHJvdG90eXBlLnBhcmFtZXRlcnM9ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWEmJihhPXt9KSxhLmluaGVyaXQ9PT0hMT90aGlzLl9wYXJhbXM6ZS51bm5lc3QodGhpcy5fY2FjaGUucGF0aC5jb25jYXQodGhpcykubWFwKGUucHJvcChcIl9wYXJhbXNcIikpKX0sYS5wcm90b3R5cGUucGFyYW1ldGVyPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9e30pO3ZhciBjPWUudGFpbCh0aGlzLl9jYWNoZS5wYXRoKTtyZXR1cm4gZS5maW5kKHRoaXMuX3BhcmFtcyxlLnByb3BFcShcImlkXCIsYSkpfHxiLmluaGVyaXQhPT0hMSYmYyYmYy5wYXJhbWV0ZXIoYSl8fG51bGx9LGEucHJvdG90eXBlLnZhbGlkYXRlcz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4hYXx8YS52YWxpZGF0ZXMoYil9O3JldHVybiBlLnBhaXJzKGF8fHt9KS5tYXAoZnVuY3Rpb24oYSl7dmFyIGQ9YVswXSxlPWFbMV07cmV0dXJuIGMoYi5wYXJhbWV0ZXIoZCksZSl9KS5yZWR1Y2UoZS5hbGxUcnVlUiwhMCl9LGEucHJvdG90eXBlLmZvcm1hdD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoYSkucmVwbGFjZSgvLS9nLGZ1bmN0aW9uKGEpe3JldHVyblwiJTVDJVwiK2EuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKX0pfXZvaWQgMD09PWEmJihhPXt9KTt2YXIgYz10aGlzLl9zZWdtZW50cyxkPWNbMF0sZj0hMSxnPXRoaXMucGFyYW1ldGVycyh7aW5oZXJpdDohMX0pLGg9ZS50YWlsKHRoaXMuX2NhY2hlLnBhdGgpO2lmKCF0aGlzLnZhbGlkYXRlcyhhKSlyZXR1cm4gbnVsbDtnLm1hcChmdW5jdGlvbihnLGgpe3ZhciBpPWg8Yy5sZW5ndGgtMSxqPWcudmFsdWUoYVtnLmlkXSksaz1nLmlzRGVmYXVsdFZhbHVlKGopLGw9az9nLnNxdWFzaDohMSxtPWcudHlwZS5lbmNvZGUoaik7aWYoIWkpe2lmKG51bGw9PW18fGsmJmwhPT0hMSlyZXR1cm47cmV0dXJuIGUuaXNBcnJheShtKXx8KG09W21dKSxtPWUubWFwKG0sZW5jb2RlVVJJQ29tcG9uZW50KS5qb2luKFwiJlwiK2cuaWQrXCI9XCIpLGQrPShmP1wiJlwiOlwiP1wiKSsoZy5pZCtcIj1cIittKSx2b2lkKGY9ITApfWQrPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGw9PT0hMD9hLm1hdGNoKGMubWF0Y2goL1xcLyQvKT8vXFwvPyguKikvOi8oLiopLylbMV06ZS5pc1N0cmluZyhsKT9sK2E6bCE9PSExP1wiXCI6bnVsbD09bT9hOmUuaXNBcnJheShtKT9lLm1hcChtLGIpLmpvaW4oXCItXCIpK2E6Zy50eXBlLnJhdz9tK2E6ZW5jb2RlVVJJQ29tcG9uZW50KG0pK2F9KGNbaCsxXSxkKX0pLGFbXCIjXCJdJiYoZCs9XCIjXCIrYVtcIiNcIl0pO3ZhciBpPVtcIiNcIl0uY29uY2F0KGcubWFwKGUucHJvcChcImlkXCIpKSk7cmV0dXJuKGgmJmguZm9ybWF0KGUub21pdChhLGkpKXx8XCJcIikrZH0sYS5uYW1lVmFsaWRhdG9yPS9eXFx3KygtK1xcdyspKig/OlxcW1xcXSk/JC8sYX0oKTtiLlVybE1hdGNoZXI9aH0sZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7Zm9yKHZhciBjIGluIGEpYi5oYXNPd25Qcm9wZXJ0eShjKXx8KGJbY109YVtjXSl9ZChjKDI0KSksZChjKDI3KSksZChjKDM3KSksZChjKDI2KSl9LGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7ZnVuY3Rpb24gYSgpe2Z1bmN0aW9uIGEoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXtlLmZvckVhY2goYS5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7cmV0dXJuIGNbYV0uc3BsaWNlKGNbYV0uaW5kZXhPZihiKSwxKX0pfX1mdW5jdGlvbiBiKGEsYil7Y1thXSYmY1thXS5sZW5ndGgmJmUuZm9yRWFjaChjW2FdLGZ1bmN0aW9uKGEpe3JldHVybiBhKGIpfSl9dmFyIGM9e30sZD17fTtyZXR1cm4gZi5wcm90b3R5cGUuJGRpZ2VzdD1mdW5jdGlvbigpe3ZhciBhPXRoaXM7ZS5mb3JFYWNoKHRoaXMsZnVuY3Rpb24oYyxlKXtjIT09ZFtlXSYmYS5oYXNPd25Qcm9wZXJ0eShlKSYmKGRbZV09YyxiKGUsYykpfSl9LGYucHJvdG90eXBlLiRpbmhlcml0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxmPWUuYW5jZXN0b3JzKGIsYyksZz17fSxoPVtdO2Zvcih2YXIgaSBpbiBmKWlmKGZbaV0ucGFyYW1zJiYoZD1PYmplY3Qua2V5cyhmW2ldLnBhcmFtcyksZC5sZW5ndGgpKWZvcih2YXIgaiBpbiBkKWguaW5kZXhPZihkW2pdKT49MHx8KGgucHVzaChkW2pdKSxnW2Rbal1dPXRoaXNbZFtqXV0pO3JldHVybiBlLmV4dGVuZCh7fSxnLGEpfSxmLnByb3RvdHlwZS4kc2V0PWZ1bmN0aW9uKGEsYyl7dmFyIGQ9dGhpcyxmPSExLGc9ITE7cmV0dXJuIGMmJmUuZm9yRWFjaChhLGZ1bmN0aW9uKGEsYil7KGMucGFyYW1ldGVyKGIpfHx7fSkuZHluYW1pYyE9PSEwJiYoZz0hMCl9KSxnPyExOihlLmZvckVhY2goYSxmdW5jdGlvbihhLGMpe2EhPT1kW2NdJiYoZFtjXT1hLGIoYyksZj0hMCl9KSx0aGlzLiRzeW5jKCksZil9LGYucHJvdG90eXBlLiRzeW5jPWZ1bmN0aW9uKCl7cmV0dXJuIGUuY29weSh0aGlzLGQpLHRoaXN9LGYucHJvdG90eXBlLiRvZmY9ZnVuY3Rpb24oKXtyZXR1cm4gYz17fSx0aGlzfSxmLnByb3RvdHlwZS4kcmF3PWZ1bmN0aW9uKCl7cmV0dXJuIGUub21pdCh0aGlzLE9iamVjdC5rZXlzKHRoaXMpLmZpbHRlcihmLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5iaW5kKGYucHJvdG90eXBlKSkpfSxmLnByb3RvdHlwZS4kbG9jYWxpemU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IGYoZS5waWNrKGJ8fHRoaXMsT2JqZWN0LmtleXMoYS5wYXJhbXMpKSl9LGYucHJvdG90eXBlLiRvYnNlcnZlPWZ1bmN0aW9uKGIsZCl7cmV0dXJuIGUuZm9yRWFjaChiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhKXtyZXR1cm4oY1thXXx8KGNbYV09W10pKS5wdXNoKGQpfSksYShiLGQpfSxuZXcgZn1mdW5jdGlvbiBiKGEpe3JldHVybiBhLiR3YXRjaChmdW5jdGlvbigpe2MuJGRpZ2VzdCgpfSksY312YXIgYz1hKCk7dGhpcy4kZ2V0PWIsYi4kaW5qZWN0PVtcIiRyb290U2NvcGVcIl19dmFyIGU9YygzKSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt2b2lkIDA9PT1hJiYoYT17fSksZS5leHRlbmQodGhpcyxhKX1yZXR1cm4gYS5wcm90b3R5cGUuJGRpZ2VzdD1mdW5jdGlvbigpe30sYS5wcm90b3R5cGUuJGluaGVyaXQ9ZnVuY3Rpb24oYSxiLGMpe30sYS5wcm90b3R5cGUuJHNldD1mdW5jdGlvbihhLGIpe30sYS5wcm90b3R5cGUuJHN5bmM9ZnVuY3Rpb24oKXt9LGEucHJvdG90eXBlLiRvZmY9ZnVuY3Rpb24oKXt9LGEucHJvdG90eXBlLiRyYXc9ZnVuY3Rpb24oKXt9LGEucHJvdG90eXBlLiRsb2NhbGl6ZT1mdW5jdGlvbihhLGIpe30sYS5wcm90b3R5cGUuJG9ic2VydmU9ZnVuY3Rpb24oYSxiKXt9LGF9KCk7Yi5TdGF0ZVBhcmFtcz1mLGQuJGluamVjdD1bXSxhbmd1bGFyLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5wcm92aWRlcihcIiRzdGF0ZVBhcmFtc1wiLGQpfSxmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtmdW5jdGlvbiBiKGEpe3ZhciBiPS9eXFxeKCg/OlxcXFxbXmEtekEtWjAtOV18W15cXFxcXFxbXFxdXFxeJCorPy4oKXx7fV0rKSopLy5leGVjKGEuc291cmNlKTtyZXR1cm4gbnVsbCE9Yj9iWzFdLnJlcGxhY2UoL1xcXFwoLikvZyxcIiQxXCIpOlwiXCJ9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiBhLnJlcGxhY2UoL1xcJChcXCR8XFxkezEsMn0pLyxmdW5jdGlvbihhLGMpe3JldHVybiBiW1wiJFwiPT09Yz8wOk51bWJlcihjKV19KX1mdW5jdGlvbiBkKGEsYixjKXtpZighYylyZXR1cm4hMTt2YXIgZD1hLmludm9rZShiLGIseyRtYXRjaDpjfSk7cmV0dXJuIGUuaXNEZWZpbmVkKGQpP2Q6ITB9ZnVuY3Rpb24gaChhKXtmdW5jdGlvbiBiKGEsYixjKXt2YXIgZD1mLnNlcnZpY2VzLmxvY2F0aW9uQ29uZmlnLmJhc2VIcmVmKCk7cmV0dXJuXCIvXCI9PT1kP2E6Yj9kLnNsaWNlKDAsLTEpK2E6Yz9kLnNsaWNlKDEpK2E6YX1mdW5jdGlvbiBjKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9YShmLnNlcnZpY2VzLiRpbmplY3RvcixnKTtyZXR1cm4gYj8oZS5pc1N0cmluZyhiKSYmKGcucmVwbGFjZSgpLGcudXJsKGIpKSwhMCk6ITF9aWYoIWF8fCFhLmRlZmF1bHRQcmV2ZW50ZWQpe3ZhciBjLGQ9ai5sZW5ndGg7Zm9yKGM9MDtkPmM7YysrKWlmKGIoaltjXSkpcmV0dXJuO2smJmIoayl9fWZ1bmN0aW9uIGQoKXtyZXR1cm4gaT1pfHxhLiRvbihcIiRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3NcIixjKX12YXIgaD1nLnVybCgpO3JldHVybiBsfHxkKCkse3N5bmM6ZnVuY3Rpb24oKXtjKCl9LGxpc3RlbjpmdW5jdGlvbigpe3JldHVybiBkKCl9LHVwZGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT92b2lkKGg9Zy51cmwoKSk6dm9pZChnLnVybCgpIT09aCYmKGcudXJsKGgpLGcucmVwbGFjZSgpKSl9LHB1c2g6ZnVuY3Rpb24oYSxiLGMpe2cudXJsKGEuZm9ybWF0KGJ8fHt9KSksYyYmYy5yZXBsYWNlJiZnLnJlcGxhY2UoKX0saHJlZjpmdW5jdGlvbihhLGMsZCl7aWYoIWEudmFsaWRhdGVzKGMpKXJldHVybiBudWxsO3ZhciBlPWEuZm9ybWF0KGMpO2Q9ZHx8e307dmFyIGc9Zi5zZXJ2aWNlcy5sb2NhdGlvbkNvbmZpZyxoPWcuaHRtbDVNb2RlKCk7aWYoaHx8bnVsbD09PWV8fChlPVwiI1wiK2cuaGFzaFByZWZpeCgpK2UpLGU9YihlLGgsZC5hYnNvbHV0ZSksIWQuYWJzb2x1dGV8fCFlKXJldHVybiBlO3ZhciBpPSFoJiZlP1wiL1wiOlwiXCIsaj1nLnBvcnQoKTtyZXR1cm4gaj04MD09PWp8fDQ0Mz09PWo/XCJcIjpcIjpcIitqLFtnLnByb3RvY29sKCksXCI6Ly9cIixnLmhvc3QoKSxqLGksZV0uam9pbihcIlwiKX19fXZhciBpLGo9W10saz1udWxsLGw9ITE7dGhpcy5ydWxlPWZ1bmN0aW9uKGEpe2lmKCFlLmlzRnVuY3Rpb24oYSkpdGhyb3cgbmV3IEVycm9yKFwiJ3J1bGUnIG11c3QgYmUgYSBmdW5jdGlvblwiKTtyZXR1cm4gai5wdXNoKGEpLHRoaXN9LHRoaXMub3RoZXJ3aXNlPWZ1bmN0aW9uKGEpe2lmKCFlLmlzRnVuY3Rpb24oYSkmJiFlLmlzU3RyaW5nKGEpKXRocm93IG5ldyBFcnJvcihcIidydWxlJyBtdXN0IGJlIGEgc3RyaW5nIG9yIGZ1bmN0aW9uXCIpO3JldHVybiBrPWUuaXNTdHJpbmcoYSk/ZnVuY3Rpb24oKXtyZXR1cm4gYX06YSx0aGlzfSx0aGlzLndoZW49ZnVuY3Rpb24oaCxpKXt2YXIgaixrPWUuaXNTdHJpbmcoaSk7aWYoZS5pc1N0cmluZyhoKSYmKGg9YS5jb21waWxlKGgpKSwhayYmIWUuaXNGdW5jdGlvbihpKSYmIWUuaXNBcnJheShpKSl0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkICdoYW5kbGVyJyBpbiB3aGVuKClcIik7dmFyIGw9e21hdGNoZXI6ZnVuY3Rpb24oYixjKXtyZXR1cm4gayYmKGo9YS5jb21waWxlKGMpLGM9W1wiJG1hdGNoXCIsai5mb3JtYXQuYmluZChqKV0pLGUuZXh0ZW5kKGZ1bmN0aW9uKCl7cmV0dXJuIGQoZi5zZXJ2aWNlcy4kaW5qZWN0b3IsYyxiLmV4ZWMoZy5wYXRoKCksZy5zZWFyY2goKSxnLmhhc2goKSkpfSx7cHJlZml4OmUuaXNTdHJpbmcoYi5wcmVmaXgpP2IucHJlZml4OlwiXCJ9KX0scmVnZXg6ZnVuY3Rpb24oYSxoKXtpZihhLmdsb2JhbHx8YS5zdGlja3kpdGhyb3cgbmV3IEVycm9yKFwid2hlbigpIFJlZ0V4cCBtdXN0IG5vdCBiZSBnbG9iYWwgb3Igc3RpY2t5XCIpO3JldHVybiBrJiYoaj1oLGg9W1wiJG1hdGNoXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGMoaixhKX1dKSxlLmV4dGVuZChmdW5jdGlvbigpe3JldHVybiBkKGYuc2VydmljZXMuJGluamVjdG9yLGgsYS5leGVjKGcucGF0aCgpKSl9LHtwcmVmaXg6YihhKX0pfX0sbT17bWF0Y2hlcjphLmlzTWF0Y2hlcihoKSxyZWdleDpoIGluc3RhbmNlb2YgUmVnRXhwfTtmb3IodmFyIG4gaW4gbSlpZihtW25dKXJldHVybiB0aGlzLnJ1bGUobFtuXShoLGkpKTt0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkICd3aGF0JyBpbiB3aGVuKClcIil9LHRoaXMuZGVmZXJJbnRlcmNlcHQ9ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9ITApLGw9YX0sdGhpcy4kZ2V0PWgsaC4kaW5qZWN0PVtcIiRyb290U2NvcGVcIl19dmFyIGU9YygzKSxmPWMoNCksZz1mLnNlcnZpY2VzLmxvY2F0aW9uO2IuJFVybFJvdXRlclByb3ZpZGVyPWR9LGZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3RoaXMudHJhbnNpdGlvbj1hfXJldHVybiBhLnByb3RvdHlwZS5yZWdpc3Rlckhvb2tzPWZ1bmN0aW9uKCl7dGhpcy5yZWdpc3Rlck9uRW50ZXJIb29rcygpLHRoaXMucmVnaXN0ZXJPblJldGFpbkhvb2tzKCksdGhpcy5yZWdpc3Rlck9uRXhpdEhvb2tzKCl9LGEucHJvdG90eXBlLnJlZ2lzdGVyT25FbnRlckhvb2tzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWZ1bmN0aW9uKGIpe3JldHVybiBhLnRyYW5zaXRpb24ub25FbnRlcih7dG86Yi5uYW1lfSxiLm9uRW50ZXIpfTt0aGlzLnRyYW5zaXRpb24uZW50ZXJpbmcoKS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuISFhLm9uRW50ZXJ9KS5mb3JFYWNoKGIpfSxhLnByb3RvdHlwZS5yZWdpc3Rlck9uUmV0YWluSG9va3M9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9ZnVuY3Rpb24oYil7cmV0dXJuIGEudHJhbnNpdGlvbi5vblJldGFpbih7fSxiLm9uUmV0YWluKX07dGhpcy50cmFuc2l0aW9uLnJldGFpbmVkKCkuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiEhYS5vblJldGFpbn0pLmZvckVhY2goYil9LGEucHJvdG90eXBlLnJlZ2lzdGVyT25FeGl0SG9va3M9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9ZnVuY3Rpb24oYil7cmV0dXJuIGEudHJhbnNpdGlvbi5vbkV4aXQoe2Zyb206Yi5uYW1lfSxiLm9uRXhpdCl9O3RoaXMudHJhbnNpdGlvbi5leGl0aW5nKCkuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiEhYS5vbkV4aXR9KS5mb3JFYWNoKGIpfSxhfSgpO2IuRW50ZXJFeGl0SG9va3M9Y30sZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMoMyksZT1jKDE5KSxmPWUuUmVzb2x2ZVBvbGljeVtlLlJlc29sdmVQb2xpY3kuTEFaWV0sZz1lLlJlc29sdmVQb2xpY3lbZS5SZXNvbHZlUG9saWN5LkVBR0VSXSxoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt0aGlzLnRyYW5zaXRpb249YX1yZXR1cm4gYS5wcm90b3R5cGUucmVnaXN0ZXJIb29rcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuIGQudGFpbChjLnRvKS5yZXNvbHZlQ29udGV4dC5yZXNvbHZlUGF0aChkLmV4dGVuZCh7dHJhbnNpdGlvbjphfSx7cmVzb2x2ZVBvbGljeTpnfSkpfWZ1bmN0aW9uIGIoYSxiKXt2YXIgZT1kLmZpbmQoYy5lbnRlcmluZyxkLnByb3BFcShcInN0YXRlXCIsYSkpO3JldHVybiBlLnJlc29sdmVDb250ZXh0LnJlc29sdmVQYXRoRWxlbWVudChlLnN0YXRlLGQuZXh0ZW5kKHt0cmFuc2l0aW9uOmJ9LHtyZXNvbHZlUG9saWN5OmZ9KSl9dmFyIGM9dGhpcy50cmFuc2l0aW9uLnRyZWVDaGFuZ2VzKCk7YS4kaW5qZWN0PVtcIiR0cmFuc2l0aW9uJFwiXSxiLiRpbmplY3Q9W1wiJHN0YXRlJFwiLFwiJHRyYW5zaXRpb24kXCJdLHRoaXMudHJhbnNpdGlvbi5vblN0YXJ0KHt9LGEse3ByaW9yaXR5OjFlM30pLHRoaXMudHJhbnNpdGlvbi5vbkVudGVyKHt9LGIse3ByaW9yaXR5OjFlM30pfSxhfSgpO2IuUmVzb2x2ZUhvb2tzPWh9LGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jKDMpLGU9YygzNiksZj1mdW5jdGlvbihhKXtpZighZC5pc1N0cmluZyhhKSlyZXR1cm4hMTt2YXIgYj1cIl5cIj09PWEuY2hhckF0KDApO3JldHVybnt2YWw6Yj9hLnN1YnN0cmluZygxKTphLHJvb3Q6Yn19LGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYixjKXt0aGlzLm1hdGNoZXI9Yjt2YXIgZz10aGlzO3RoaXMuYnVpbGRlcnM9e3BhcmVudDpbZnVuY3Rpb24oYyl7cmV0dXJuIGM9PT1hKCk/bnVsbDpiLmZpbmQoZy5wYXJlbnROYW1lKGMpKXx8YSgpfV0sZGF0YTpbZnVuY3Rpb24oYSl7cmV0dXJuIGEucGFyZW50JiZhLnBhcmVudC5kYXRhJiYoYS5kYXRhPWEuc2VsZi5kYXRhPWQuZXh0ZW5kKHt9LGEucGFyZW50LmRhdGEsYS5kYXRhKSksYS5kYXRhfV0sdXJsOltmdW5jdGlvbihiKXt2YXIgZT1iLGc9ZihlLnVybCksaD1iLnBhcmVudCxpPWc/Yy5jb21waWxlKGcudmFsLHtwYXJhbXM6Yi5wYXJhbXN8fHt9LHBhcmFtTWFwOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGUucmVsb2FkT25TZWFyY2g9PT0hMSYmYiYmKGE9ZC5leHRlbmQoYXx8e30se2R5bmFtaWM6ITB9KSksYX19KTplLnVybDtpZighaSlyZXR1cm4gbnVsbDtpZighYy5pc01hdGNoZXIoaSkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB1cmwgJ1wiK2krXCInIGluIHN0YXRlICdcIitiK1wiJ1wiKTtyZXR1cm4gZyYmZy5yb290P2k6KGgmJmgubmF2aWdhYmxlfHxhKCkpLnVybC5hcHBlbmQoaSl9XSxuYXZpZ2FibGU6W2Z1bmN0aW9uKGIpe1xucmV0dXJuIGIhPT1hKCkmJmIudXJsP2I6Yi5wYXJlbnQ/Yi5wYXJlbnQubmF2aWdhYmxlOm51bGx9XSxwYXJhbXM6W2Z1bmN0aW9uKGEpe3ZhciBiPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGUuUGFyYW0uZnJvbUNvbmZpZyhiLG51bGwsYSl9LGM9YS51cmwmJmEudXJsLnBhcmFtZXRlcnMoe2luaGVyaXQ6ITF9KXx8W10sZj1kLnZhbHVlcyhkLm1hcChkLm9taXQoYS5wYXJhbXN8fHt9LGMubWFwKGQucHJvcChcImlkXCIpKSksYikpO3JldHVybiBjLmNvbmNhdChmKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuW2EuaWQsYV19KS5yZWR1Y2UoZC5hcHBseVBhaXJzLHt9KX1dLHZpZXdzOltmdW5jdGlvbihhKXt2YXIgYj17fSxjPVtcInRlbXBsYXRlUHJvdmlkZXJcIixcInRlbXBsYXRlVXJsXCIsXCJ0ZW1wbGF0ZVwiLFwibm90aWZ5XCIsXCJhc3luY1wiXSxlPVtcImNvbnRyb2xsZXJcIixcImNvbnRyb2xsZXJQcm92aWRlclwiLFwiY29udHJvbGxlckFzXCJdLGY9Yy5jb25jYXQoZSk7cmV0dXJuIGQuZm9yRWFjaChhLnZpZXdzfHx7JGRlZmF1bHQ6ZC5waWNrKGEsZil9LGZ1bmN0aW9uKGMsZil7Zj1mfHxcIiRkZWZhdWx0XCIsZC5mb3JFYWNoKGUsZnVuY3Rpb24oYil7YVtiXSYmIWNbYl0mJihjW2JdPWFbYl0pfSksT2JqZWN0LmtleXMoYykubGVuZ3RoPjAmJihiW2ZdPWMpfSksYn1dLHBhdGg6W2Z1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudD9hLnBhcmVudC5wYXRoLmNvbmNhdChhKTpbYV19XSxpbmNsdWRlczpbZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnQ/ZC5leHRlbmQoe30sYS5wYXJlbnQuaW5jbHVkZXMpOnt9O3JldHVybiBiW2EubmFtZV09ITAsYn1dfX1yZXR1cm4gYS5wcm90b3R5cGUuYnVpbGRlcj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYnVpbGRlcnMsZT1jW2FdfHxbXTtyZXR1cm4gZC5pc1N0cmluZyhhKSYmIWQuaXNEZWZpbmVkKGIpP2UubGVuZ3RoPjE/ZTplWzBdOmQuaXNTdHJpbmcoYSkmJmQuaXNGdW5jdGlvbihiKT8oY1thXT1lLGNbYV0ucHVzaChiKSxmdW5jdGlvbigpe3JldHVybiBjW2FdLnNwbGljZShjW2FdLmluZGV4T2YoYiwxKSkmJm51bGx9KTp2b2lkIDB9LGEucHJvdG90eXBlLmJ1aWxkPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLm1hdGNoZXIsZT1iLmJ1aWxkZXJzLGY9dGhpcy5wYXJlbnROYW1lKGEpO2lmKGYmJiFjLmZpbmQoZikpcmV0dXJuIG51bGw7Zm9yKHZhciBnIGluIGUpaWYoZS5oYXNPd25Qcm9wZXJ0eShnKSl7dmFyIGg9ZVtnXS5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyl7cmV0dXJuIGIoYyxhKX19LGQubm9vcCk7YVtnXT1oKGEpfXJldHVybiBhfSxhLnByb3RvdHlwZS5wYXJlbnROYW1lPWZ1bmN0aW9uKGEpe3ZhciBiPWEubmFtZXx8XCJcIjtyZXR1cm4tMSE9PWIuaW5kZXhPZihcIi5cIik/Yi5zdWJzdHJpbmcoMCxiLmxhc3RJbmRleE9mKFwiLlwiKSk6YS5wYXJlbnQ/ZC5pc1N0cmluZyhhLnBhcmVudCk/YS5wYXJlbnQ6YS5wYXJlbnQubmFtZTpcIlwifSxhLnByb3RvdHlwZS5uYW1lPWZ1bmN0aW9uKGEpe3ZhciBiPWEubmFtZTtpZigtMSE9PWIuaW5kZXhPZihcIi5cIil8fCFhLnBhcmVudClyZXR1cm4gYjt2YXIgYz1kLmlzU3RyaW5nKGEucGFyZW50KT9hLnBhcmVudDphLnBhcmVudC5uYW1lO3JldHVybiBjP2MrXCIuXCIrYjpifSxhfSgpO2IuU3RhdGVCdWlsZGVyPWd9LGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEsYil7dmFyIGMsZD1hLm1hdGNoKC9eXFxzKih7W159XSp9KVxccyokLyk7aWYoZCYmKGE9YitcIihcIitkWzFdK1wiKVwiKSxjPWEucmVwbGFjZSgvXFxuL2csXCIgXCIpLm1hdGNoKC9eKFteKF0rPylcXHMqKFxcKCguKilcXCkpPyQvKSwhY3x8NCE9PWMubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3RhdGUgcmVmICdcIithK1wiJ1wiKTtyZXR1cm57c3RhdGU6Y1sxXSxwYXJhbUV4cHI6Y1szXXx8bnVsbH19ZnVuY3Rpb24gZShhKXt2YXIgYj1hLnBhcmVudCgpLmluaGVyaXRlZERhdGEoXCIkdWlWaWV3XCIpO3JldHVybiBiJiZiLmNvbnRleHQmJmIuY29udGV4dC5uYW1lP2IuY29udGV4dDp2b2lkIDB9ZnVuY3Rpb24gZihhLGIpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOltcIj9edWlTcmVmQWN0aXZlXCIsXCI/XnVpU3JlZkFjdGl2ZUVxXCJdLGxpbms6ZnVuY3Rpb24oYyxmLGcsail7dmFyIGs9ZChnLnVpU3JlZixhLmN1cnJlbnQubmFtZSksbD1udWxsLG09ZShmKXx8YS4kY3VycmVudCxuPW51bGwsbz1cIkFcIj09PWYucHJvcChcInRhZ05hbWVcIikscD1cIkZPUk1cIj09PWZbMF0ubm9kZU5hbWUscT1wP1wiYWN0aW9uXCI6XCJocmVmXCIscj0hMCxzPWMuJGV2YWwoZy51aVNyZWZPcHRzKSx0PXtyZWxhdGl2ZTptLGluaGVyaXQ6ITB9LHU9aC5kZWZhdWx0cyhzLHQsaS5kZWZhdWx0VHJhbnNPcHRzKSx2PWZ1bmN0aW9uKGIpe2lmKGImJihsPWguY29weShiKSkscil7bj1hLmhyZWYoay5zdGF0ZSxsLHUpO3ZhciBjPWpbMV18fGpbMF07cmV0dXJuIGMmJmMuJCRhZGRTdGF0ZUluZm8oay5zdGF0ZSxsKSxudWxsPT09bj8ocj0hMSwhMSk6dm9pZCBnLiRzZXQocSxuKX19O2sucGFyYW1FeHByJiYoYy4kd2F0Y2goay5wYXJhbUV4cHIsZnVuY3Rpb24oYSl7YSE9PWwmJnYoYSl9LCEwKSxsPWguY29weShjLiRldmFsKGsucGFyYW1FeHByKSkpLHYoKSxwfHxmLmJpbmQoXCJjbGlja1wiLGZ1bmN0aW9uKGMpe3ZhciBkPWMud2hpY2h8fGMuYnV0dG9uO2lmKCEoZD4xfHxjLmN0cmxLZXl8fGMubWV0YUtleXx8Yy5zaGlmdEtleXx8Zi5hdHRyKFwidGFyZ2V0XCIpKSl7dmFyIGU9YihmdW5jdGlvbigpe2EuZ28oay5zdGF0ZSxsLHUpfSk7Yy5wcmV2ZW50RGVmYXVsdCgpO3ZhciBnPW8mJiFuPzE6MDtjLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7Zy0tPD0wJiZiLmNhbmNlbChlKX19fSl9fX1mdW5jdGlvbiBnKGEsYixjKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsY29udHJvbGxlcjpbXCIkc2NvcGVcIixcIiRlbGVtZW50XCIsXCIkYXR0cnNcIixcIiR0aW1lb3V0XCIsXCIkdHJhbnNpdGlvbnNcIixmdW5jdGlvbihiLGYsZyxpLGope2Z1bmN0aW9uIGsoYixjLGQpe3ZhciBnPWEuZ2V0KGIsZShmKSksaD1tKGIsYyk7dC5wdXNoKHtzdGF0ZTpnfHx7bmFtZTpifSxwYXJhbXM6YyxoYXNoOmh9KSx1W2hdPWR9ZnVuY3Rpb24gbChhKXthLnByb21pc2UudGhlbihuKX1mdW5jdGlvbiBtKGEsYyl7aWYoIWguaXNTdHJpbmcoYSkpdGhyb3cgbmV3IEVycm9yKFwic3RhdGUgc2hvdWxkIGJlIGEgc3RyaW5nXCIpO3JldHVybiBoLmlzT2JqZWN0KGMpP2EraC50b0pzb24oYyk6KGM9Yi4kZXZhbChjKSxoLmlzT2JqZWN0KGMpP2EraC50b0pzb24oYyk6YSl9ZnVuY3Rpb24gbigpe2Zvcih2YXIgYT0wO2E8dC5sZW5ndGg7YSsrKXEodFthXS5zdGF0ZSx0W2FdLnBhcmFtcyk/byhmLHVbdFthXS5oYXNoXSk6cChmLHVbdFthXS5oYXNoXSkscih0W2FdLnN0YXRlLHRbYV0ucGFyYW1zKT9vKGYscyk6cChmLHMpfWZ1bmN0aW9uIG8oYSxiKXtpKGZ1bmN0aW9uKCl7YS5hZGRDbGFzcyhiKX0pfWZ1bmN0aW9uIHAoYSxiKXthLnJlbW92ZUNsYXNzKGIpfWZ1bmN0aW9uIHEoYixjKXtyZXR1cm4gYS5pbmNsdWRlcyhiLm5hbWUsYyl9ZnVuY3Rpb24gcihiLGMpe3JldHVybiBhLmlzKGIubmFtZSxjKX12YXIgcyx0PVtdLHU9e307cz1jKGcudWlTcmVmQWN0aXZlRXF8fFwiXCIsITEpKGIpO3ZhciB2PWIuJGV2YWwoZy51aVNyZWZBY3RpdmUpfHxjKGcudWlTcmVmQWN0aXZlfHxcIlwiLCExKShiKTtoLmlzT2JqZWN0KHYpJiZoLmZvckVhY2godixmdW5jdGlvbihjLGUpe2lmKGguaXNTdHJpbmcoYykpe3ZhciBmPWQoYyxhLmN1cnJlbnQubmFtZSk7ayhmLnN0YXRlLGIuJGV2YWwoZi5wYXJhbUV4cHIpLGUpfX0pLHRoaXMuJCRhZGRTdGF0ZUluZm89ZnVuY3Rpb24oYSxiKXtoLmlzT2JqZWN0KHYpJiZ0Lmxlbmd0aD4wfHwoayhhLGIsdiksbigpKX0sYi4kb24oXCIkc3RhdGVDaGFuZ2VTdWNjZXNzXCIsbiksbC4kaW5qZWN0PVtcIiR0cmFuc2l0aW9uJFwiXTt2YXIgdz1qLm9uU3RhcnQoe30sbCk7Yi4kb24oXCIkZGVzdHJveVwiLHcpfV19fXZhciBoPWMoMyksaT1jKDkpO2YuJGluamVjdD1bXCIkc3RhdGVcIixcIiR0aW1lb3V0XCJdLGcuJGluamVjdD1bXCIkc3RhdGVcIixcIiRzdGF0ZVBhcmFtc1wiLFwiJGludGVycG9sYXRlXCJdLGFuZ3VsYXIubW9kdWxlKFwidWkucm91dGVyLnN0YXRlXCIpLmRpcmVjdGl2ZShcInVpU3JlZlwiLGYpLmRpcmVjdGl2ZShcInVpU3JlZkFjdGl2ZVwiLGcpLmRpcmVjdGl2ZShcInVpU3JlZkFjdGl2ZUVxXCIsZyl9LGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuaXMoYil9fWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gYS5pbmNsdWRlcyhiLGMsZCl9fWMuJGluamVjdD1bXCIkc3RhdGVcIl0sYi4kSXNTdGF0ZUZpbHRlcj1jLGQuJGluamVjdD1bXCIkc3RhdGVcIl0sYi4kSW5jbHVkZWRCeVN0YXRlRmlsdGVyPWQsYW5ndWxhci5tb2R1bGUoXCJ1aS5yb3V0ZXIuc3RhdGVcIikuZmlsdGVyKFwiaXNTdGF0ZVwiLGMpLmZpbHRlcihcImluY2x1ZGVkQnlTdGF0ZVwiLGQpfSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YygyKSxlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtkLmV4dGVuZCh0aGlzLGEpfXJldHVybiBhLnByb3RvdHlwZS5pcz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcz09PWF8fHRoaXMuc2VsZj09PWF8fHRoaXMuZnFuKCk9PT1hfSxhLnByb3RvdHlwZS5mcW49ZnVuY3Rpb24oKXtpZighKHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudCBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3IpKXJldHVybiB0aGlzLm5hbWU7dmFyIGE9dGhpcy5wYXJlbnQuZnFuKCk7cmV0dXJuIGE/YStcIi5cIit0aGlzLm5hbWU6dGhpcy5uYW1lfSxhLnByb3RvdHlwZS5yb290PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5yb290KCl8fHRoaXN9LGEucHJvdG90eXBlLnBhcmFtZXRlcnM9ZnVuY3Rpb24oYSl7YT1kLmRlZmF1bHRzKGEse2luaGVyaXQ6ITB9KTt2YXIgYj1hLmluaGVyaXQmJnRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5wYXJhbWV0ZXJzKCl8fFtdO3JldHVybiBiLmNvbmNhdChkLnZhbHVlcyh0aGlzLnBhcmFtcykpfSxhLnByb3RvdHlwZS5wYXJhbWV0ZXI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdm9pZCAwPT09YiYmKGI9e30pLHRoaXMudXJsJiZ0aGlzLnVybC5wYXJhbWV0ZXIoYSxiKXx8ZC5maW5kKGQudmFsdWVzKHRoaXMucGFyYW1zKSxkLnByb3BFcShcImlkXCIsYSkpfHxiLmluaGVyaXQmJnRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5wYXJhbWV0ZXIoYSl9LGEucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZnFuKCl9LGF9KCk7Yi5TdGF0ZT1lfSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YygzKSxlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt0aGlzLl9zdGF0ZXM9YX1yZXR1cm4gYS5wcm90b3R5cGUuaXNSZWxhdGl2ZT1mdW5jdGlvbihhKXtyZXR1cm4gYT1hfHxcIlwiLDA9PT1hLmluZGV4T2YoXCIuXCIpfHwwPT09YS5pbmRleE9mKFwiXlwiKX0sYS5wcm90b3R5cGUuZmluZD1mdW5jdGlvbihhLGIpe2lmKCFhJiZcIlwiIT09YSlyZXR1cm4gdm9pZCAwO3ZhciBjPWQuaXNTdHJpbmcoYSksZT1jP2E6YS5uYW1lO3RoaXMuaXNSZWxhdGl2ZShlKSYmKGU9dGhpcy5yZXNvbHZlUGF0aChlLGIpKTt2YXIgZj10aGlzLl9zdGF0ZXNbZV07cmV0dXJuIWZ8fCFjJiYoY3x8ZiE9PWEmJmYuc2VsZiE9PWEpP3ZvaWQgMDpmfSxhLnByb3RvdHlwZS5yZXNvbHZlUGF0aD1mdW5jdGlvbihhLGIpe2lmKCFiKXRocm93IG5ldyBFcnJvcihcIk5vIHJlZmVyZW5jZSBwb2ludCBnaXZlbiBmb3IgcGF0aCAnXCIrYStcIidcIik7Zm9yKHZhciBjPXRoaXMuZmluZChiKSxkPWEuc3BsaXQoXCIuXCIpLGU9MCxmPWQubGVuZ3RoLGc9YztmPmU7ZSsrKWlmKFwiXCIhPT1kW2VdfHwwIT09ZSl7aWYoXCJeXCIhPT1kW2VdKWJyZWFrO2lmKCFnLnBhcmVudCl0aHJvdyBuZXcgRXJyb3IoXCJQYXRoICdcIithK1wiJyBub3QgdmFsaWQgZm9yIHN0YXRlICdcIitjLm5hbWUrXCInXCIpO2c9Zy5wYXJlbnR9ZWxzZSBnPWM7dmFyIGg9ZC5zbGljZShlKS5qb2luKFwiLlwiKTtyZXR1cm4gZy5uYW1lKyhnLm5hbWUmJmg/XCIuXCI6XCJcIikraH0sYX0oKTtiLlN0YXRlTWF0Y2hlcj1lfSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YygzKSxlPWMoMTIpLGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYixjLGQpe3RoaXMuc3RhdGVzPWEsdGhpcy5idWlsZGVyPWIsdGhpcy4kdXJsUm91dGVyUHJvdmlkZXI9Yyx0aGlzLiRzdGF0ZT1kLHRoaXMuYXV0b0ZsdXNoPSExLHRoaXMucXVldWU9W119cmV0dXJuIGEucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxmPWMuc3RhdGVzLGc9Yy5xdWV1ZSxoPWMuJHN0YXRlLGk9ZC5pbmhlcml0KG5ldyBlLlN0YXRlLGQuZXh0ZW5kKHt9LGEse3NlbGY6YSxyZXNvbHZlOmEucmVzb2x2ZXx8e30sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gYS5uYW1lfX0pKTtpZighZC5pc1N0cmluZyhpLm5hbWUpKXRocm93IG5ldyBFcnJvcihcIlN0YXRlIG11c3QgaGF2ZSBhIHZhbGlkIG5hbWVcIik7aWYoZi5oYXNPd25Qcm9wZXJ0eShpLm5hbWUpfHwtMSE9PWQucGx1Y2soZyxcIm5hbWVcIikuaW5kZXhPZihpLm5hbWUpKXRocm93IG5ldyBFcnJvcihcIlN0YXRlICdcIitpLm5hbWUrXCInIGlzIGFscmVhZHkgZGVmaW5lZFwiKTtyZXR1cm4gZ1tiP1widW5zaGlmdFwiOlwicHVzaFwiXShpKSx0aGlzLmF1dG9GbHVzaCYmdGhpcy5mbHVzaChoKSxpfSxhLnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkLGU9dGhpcyxmPWUucXVldWUsZz1lLnN0YXRlcyxoPWUuYnVpbGRlcixpPVtdLGo9e307Zi5sZW5ndGg+MDspaWYoYz1mLnNoaWZ0KCksYj1oLmJ1aWxkKGMpLGQ9aS5pbmRleE9mKGMpLGIpe2lmKGcuaGFzT3duUHJvcGVydHkoYy5uYW1lKSl0aHJvdyBuZXcgRXJyb3IoXCJTdGF0ZSAnXCIrbmFtZStcIicgaXMgYWxyZWFkeSBkZWZpbmVkXCIpO2dbYy5uYW1lXT1jLHRoaXMuYXR0YWNoUm91dGUoYSxjKSxkPj0wJiZpLnNwbGljZShkLDEpfWVsc2V7dmFyIGs9altjLm5hbWVdO2lmKGpbYy5uYW1lXT1mLmxlbmd0aCxkPj0wJiZrPT09Zi5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHJlZ2lzdGVyIG9ycGhhbmVkIHN0YXRlICdcIitjLm5hbWUrXCInXCIpOzA+ZCYmaS5wdXNoKGMpLGYucHVzaChjKX1yZXR1cm4gZ30sYS5wcm90b3R5cGUuYXR0YWNoUm91dGU9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLiR1cmxSb3V0ZXJQcm92aWRlcjshYltkLmFic3RyYWN0S2V5XSYmYi51cmwmJmMud2hlbihiLnVybCxbXCIkbWF0Y2hcIixcIiRzdGF0ZVBhcmFtc1wiLGZ1bmN0aW9uKGMsZSl7YS4kY3VycmVudC5uYXZpZ2FibGU9PT1iJiZkLmVxdWFsRm9yS2V5cyhjLGUpfHxhLnRyYW5zaXRpb25UbyhiLGMse2luaGVyaXQ6ITAsbG9jYXRpb246ITF9KX1dKX0sYX0oKTtiLlN0YXRlUXVldWVNYW5hZ2VyPWZ9LGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jKDMpLGU9Yyg2KSxmPWMoNCksZz1jKDI4KSxoPWMoMTIpLGk9bmV3IGcuUmVqZWN0RmFjdG9yeSxqPXthc3luYzohMCxyZWplY3RJZlN1cGVyc2VkZWQ6ITAsY3VycmVudDpkLm5vb3AsdHJhbnNpdGlvbjpudWxsLHRyYWNlRGF0YTp7fX0saz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiLGMsZil7dmFyIGc9dGhpczt0aGlzLmZuPWEsdGhpcy5sb2NhbHM9Yix0aGlzLnJlc29sdmVDb250ZXh0PWMsdGhpcy5vcHRpb25zPWYsdGhpcy5pc1N1cGVyc2VkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gZy5vcHRpb25zLmN1cnJlbnQoKSE9PWcub3B0aW9ucy50cmFuc2l0aW9ufSx0aGlzLm1hcEhvb2tSZXN1bHQ9ZC5wYXR0ZXJuKFtbdGhpcy5pc1N1cGVyc2VkZWQsZnVuY3Rpb24oKXtyZXR1cm4gaS5zdXBlcnNlZGVkKGcub3B0aW9ucy5jdXJyZW50KCkpfV0sW2QuZXEoITEpLGQudmFsKGkuYWJvcnRlZChcIkhvb2sgYWJvcnRlZCB0cmFuc2l0aW9uXCIpKV0sW2QuaXMoaC5UYXJnZXRTdGF0ZSksZnVuY3Rpb24oYSl7cmV0dXJuIGkucmVkaXJlY3RlZChhKX1dLFtkLmlzUHJvbWlzZSxmdW5jdGlvbihhKXtyZXR1cm4gYS50aGVuKGcuaGFuZGxlSG9va1Jlc3VsdC5iaW5kKGcpKX1dXSksdGhpcy5pbnZva2VTdGVwPWZ1bmN0aW9uKGEpe3ZhciBiPWcsYz1iLm9wdGlvbnMsZj1iLmZuLGg9Yi5yZXNvbHZlQ29udGV4dCxqPWQuZXh0ZW5kKHt9LGcubG9jYWxzLGEpO2lmKGUudHJhY2UudHJhY2VIb29rSW52b2NhdGlvbihnLGMpLGMucmVqZWN0SWZTdXBlcnNlZGVkJiZnLmlzU3VwZXJzZWRlZCgpKXJldHVybiBpLnN1cGVyc2VkZWQoYy5jdXJyZW50KCkpO2lmKCFjLmFzeW5jKXt2YXIgaz1oLmludm9rZU5vdyhmLGosYyk7cmV0dXJuIGcuaGFuZGxlSG9va1Jlc3VsdChrKX1yZXR1cm4gaC5pbnZva2VMYXRlcihmLGosYykudGhlbihnLmhhbmRsZUhvb2tSZXN1bHQuYmluZChnKSl9LHRoaXMub3B0aW9ucz1kLmRlZmF1bHRzKGYsail9cmV0dXJuIGEucHJvdG90eXBlLmhhbmRsZUhvb2tSZXN1bHQ9ZnVuY3Rpb24oYSl7aWYoIWQuaXNEZWZpbmVkKGEpKXJldHVybiB2b2lkIDA7ZS50cmFjZS50cmFjZUhvb2tSZXN1bHQoYSx2b2lkIDAsdGhpcy5vcHRpb25zKTt2YXIgYj10aGlzLm1hcEhvb2tSZXN1bHQoYSk7cmV0dXJuIGImJmUudHJhY2UudHJhY2VIb29rUmVzdWx0KGEsYix0aGlzLm9wdGlvbnMpLGJ9LGEucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEub3B0aW9ucyxjPWEuZm4sZT1kLnBhcnNlKFwidHJhY2VEYXRhLmhvb2tUeXBlXCIpKGIpfHxcImludGVybmFsXCIsZj1kLnBhcnNlKFwidHJhY2VEYXRhLmNvbnRleHQuc3RhdGUubmFtZVwiKShiKXx8ZC5wYXJzZShcInRyYWNlRGF0YS5jb250ZXh0XCIpKGIpfHxcInVua25vd25cIixnPWQuZm5Ub1N0cmluZyhjKTtyZXR1cm4gZStcIiBjb250ZXh0OiBcIitmK1wiLCBcIitkLm1heExlbmd0aCgyMDAsZyl9LGEucnVuU3luY2hyb25vdXNIb29rcz1mdW5jdGlvbihiLGMsZSl7dm9pZCAwPT09YyYmKGM9e30pLHZvaWQgMD09PWUmJihlPSExKTtmb3IodmFyIGc9W10saD0wO2g8Yi5sZW5ndGg7aCsrKXRyeXtnLnB1c2goYltoXS5pbnZva2VTdGVwKGMpKX1jYXRjaChpKXtpZighZSl0aHJvdyBpO2NvbnNvbGUubG9nKFwiU3dhbGxvd2VkIGV4Y2VwdGlvbiBkdXJpbmcgc3luY2hyb25vdXMgaG9vayBoYW5kbGVyOiBcIitpKX12YXIgaj1nLmZpbHRlcihhLmlzUmVqZWN0aW9uKTtyZXR1cm4gai5sZW5ndGg/alswXTpnLmZpbHRlcihkLm5vdChhLmlzUmVqZWN0aW9uKSkuZmlsdGVyKGQuaXNQcm9taXNlKS5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS50aGVuKGQudmFsKGIpKX0sZi5zZXJ2aWNlcy4kcS53aGVuKCkpfSxhLmlzUmVqZWN0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLnJlYXNvbiBpbnN0YW5jZW9mIGcuVHJhbnNpdGlvblJlamVjdGlvbiYmYX0sYX0oKTtiLlRyYW5zaXRpb25Ib29rPWt9LGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7dGhpcy5fcmVpbml0LmJpbmQoYi4kdHJhbnNpdGlvbnMpKCksdGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGIuJHRyYW5zaXRpb25zfX12YXIgZT1jKDgpLGY9YygxMSk7Yi5kZWZhdWx0VHJhbnNPcHRzPXtsb2NhdGlvbjohMCxyZWxhdGl2ZTpudWxsLGluaGVyaXQ6ITEsbm90aWZ5OiEwLHJlbG9hZDohMSxjdXN0b206e30sY3VycmVudDpmdW5jdGlvbigpe3JldHVybiBudWxsfX07dmFyIGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dGhpcy5fZGVmYXVsdEVycm9ySGFuZGxlcj1mdW5jdGlvbihhKXthIGluc3RhbmNlb2YgRXJyb3ImJmNvbnNvbGUubG9nKGEpfSx0aGlzLl9yZWluaXQoKX1yZXR1cm4gYS5wcm90b3R5cGUuZGVmYXVsdEVycm9ySGFuZGxlcj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fZGVmYXVsdEVycm9ySGFuZGxlcj1hfHx0aGlzLl9kZWZhdWx0RXJyb3JIYW5kbGVyfSxhLnByb3RvdHlwZS5fcmVpbml0PWZ1bmN0aW9uKCl7Zi5Ib29rUmVnaXN0cnkubWl4aW4obmV3IGYuSG9va1JlZ2lzdHJ5LHRoaXMpfSxhLnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IGUuVHJhbnNpdGlvbihhLGIpfSxhfSgpO2IuJHRyYW5zaXRpb25zPW5ldyBnLGQucHJvdG90eXBlPWIuJHRyYW5zaXRpb25zLGIuJHRyYW5zaXRpb25zUHJvdmlkZXI9ZCxhbmd1bGFyLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5wcm92aWRlcihcIiR0cmFuc2l0aW9uc1wiLGIuJHRyYW5zaXRpb25zUHJvdmlkZXIpfSxmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtmb3IodmFyIGMgaW4gYSliLmhhc093blByb3BlcnR5KGMpfHwoYltjXT1hW2NdKX1kKGMoNTApKSxkKGMoMjEpKSxkKGMoNTEpKSxkKGMoNTIpKX0sZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSxiKXt0aGlzLmZyb21Db25maWc9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBlLmlzRGVmaW5lZChhLnRlbXBsYXRlKT90aGlzLmZyb21TdHJpbmcoYS50ZW1wbGF0ZSxiKTplLmlzRGVmaW5lZChhLnRlbXBsYXRlVXJsKT90aGlzLmZyb21VcmwoYS50ZW1wbGF0ZVVybCxiKTplLmlzRGVmaW5lZChhLnRlbXBsYXRlUHJvdmlkZXIpP3RoaXMuZnJvbVByb3ZpZGVyKGEudGVtcGxhdGVQcm92aWRlcixiLGMpOm51bGx9LHRoaXMuZnJvbVN0cmluZz1mdW5jdGlvbihhLGIpe3JldHVybiBlLmlzRnVuY3Rpb24oYSk/YShiKTphfSx0aGlzLmZyb21Vcmw9ZnVuY3Rpb24oYyxkKXtyZXR1cm4gZS5pc0Z1bmN0aW9uKGMpJiYoYz1jKGQpKSxudWxsPT1jP251bGw6YS5nZXQoYyx7Y2FjaGU6YixoZWFkZXJzOntBY2NlcHQ6XCJ0ZXh0L2h0bWxcIn19KS50aGVuKGUucHJvcChcImRhdGFcIikpfSx0aGlzLmZyb21Qcm92aWRlcj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGMoYSl9fXZhciBlPWMoMyk7ZC4kaW5qZWN0PVtcIiRodHRwXCIsXCIkdGVtcGxhdGVDYWNoZVwiXSxhbmd1bGFyLm1vZHVsZShcInVpLnJvdXRlci51dGlsXCIpLnNlcnZpY2UoXCIkdGVtcGxhdGVGYWN0b3J5XCIsZCl9LGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEsYixjLGQsZSl7ZnVuY3Rpb24gaChhLGMpe3JldHVybntlbnRlcjpmdW5jdGlvbihhLGMsZCl7YW5ndWxhci52ZXJzaW9uLm1pbm9yPjI/Yi5lbnRlcihhLG51bGwsYykudGhlbihkKTpiLmVudGVyKGEsbnVsbCxjLGQpfSxsZWF2ZTpmdW5jdGlvbihhLGMpe2FuZ3VsYXIudmVyc2lvbi5taW5vcj4yP2IubGVhdmUoYSkudGhlbihjKTpiLmxlYXZlKGEsYyl9fX1mdW5jdGlvbiBpKGEsYil7cmV0dXJuIGE9PT1ifXZhciBqPXtjb250ZXh0OmEucm9vdENvbnRleHQoKX0saz17Y291bnQ6MCxyZXN0cmljdDpcIkVDQVwiLHRlcm1pbmFsOiEwLHByaW9yaXR5OjQwMCx0cmFuc2NsdWRlOlwiZWxlbWVudFwiLGNvbXBpbGU6ZnVuY3Rpb24oYixlLGwpe3JldHVybiBmdW5jdGlvbihiLGUsbSl7ZnVuY3Rpb24gbihhKXtpKHgsYSl8fChnLnRyYWNlLnRyYWNlVWlWaWV3Q29uZmlnVXBkYXRlZChBLGEmJmEuY29udGV4dCkseD1hLHAoYSkpfWZ1bmN0aW9uIG8oKXtxJiYoZy50cmFjZS50cmFjZVVpVmlld0V2ZW50KFwiUmVtb3ZpbmcgICAgKHByZXZpb3VzKSBlbFwiLEEpLHEucmVtb3ZlKCkscT1udWxsKSxzJiYoZy50cmFjZS50cmFjZVVpVmlld0V2ZW50KFwiRGVzdHJveWluZyAgKHByZXZpb3VzKSBzY29wZVwiLEEpLHMuJGRlc3Ryb3koKSxzPW51bGwpLHImJihnLnRyYWNlLnRyYWNlVWlWaWV3RXZlbnQoXCJBbmltYXRlIG91dCAocHJldmlvdXMpXCIsQSksdy5sZWF2ZShyLGZ1bmN0aW9uKCl7cT1udWxsfSkscT1yLHI9bnVsbCl9ZnVuY3Rpb24gcChhKXthPWF8fHt9O3ZhciBkPWIuJG5ldygpO2cudHJhY2UudHJhY2VVaVZpZXdTY29wZUNyZWF0ZWQoQSxkKSxmLmV4dGVuZChBLHtjb250ZXh0OmEuY29udGV4dCwkdGVtcGxhdGU6YS50ZW1wbGF0ZSwkY29udHJvbGxlcjphLmNvbnRyb2xsZXIsJGNvbnRyb2xsZXJBczphLmNvbnRyb2xsZXJBcywkbG9jYWxzOmEubG9jYWxzfSk7dmFyIGg9bChkLGZ1bmN0aW9uKGEpe3cuZW50ZXIoYS5kYXRhKFwiJHVpVmlld1wiLEEpLGUsZnVuY3Rpb24oKXtzJiZzLiRlbWl0KFwiJHZpZXdDb250ZW50QW5pbWF0aW9uRW5kZWRcIiksKGYuaXNEZWZpbmVkKHYpJiYhdnx8Yi4kZXZhbCh2KSkmJmMoYSl9KSxvKCl9KTtyPWgscz1kLHMuJGVtaXQoXCIkdmlld0NvbnRlbnRMb2FkZWRcIixhfHx4KSxzLiRldmFsKHUpfXZhciBxLHIscyx0LHU9bS5vbmxvYWR8fFwiXCIsdj1tLmF1dG9zY3JvbGwsdz1oKG0sYikseD12b2lkIDAseT1lLmluaGVyaXRlZERhdGEoXCIkdWlWaWV3XCIpfHxqLHo9ZChtLnVpVmlld3x8bS5uYW1lfHxcIlwiKShiKXx8XCIkZGVmYXVsdFwiLEE9e2lkOmsuY291bnQrKyxuYW1lOnosZnFuOnkubmFtZT95LmZxbitcIi5cIit6OnosY29uZmlnOm51bGwsY29uZmlnVXBkYXRlZDpuLGdldCBjcmVhdGlvbkNvbnRleHQoKXtyZXR1cm4geS5jb250ZXh0fX07Zy50cmFjZS50cmFjZVVpVmlld0V2ZW50KFwiTGlua2luZ1wiLEEpLGUuZGF0YShcIiR1aVZpZXdcIixBKSxwKCksdD1hLnJlZ2lzdGVyVWlWaWV3KEEpLGIuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2cudHJhY2UudHJhY2VVaVZpZXdFdmVudChcIkRlc3Ryb3lpbmcvVW5yZWdpc3RlcmluZ1wiLEEpLHQoKX0pfX19O3JldHVybiBrfWZ1bmN0aW9uIGUoYSxiLGMsZCxlKXtyZXR1cm57cmVzdHJpY3Q6XCJFQ0FcIixwcmlvcml0eTotNDAwLGNvbXBpbGU6ZnVuY3Rpb24oYyl7dmFyIGQ9Yy5odG1sKCk7cmV0dXJuIGZ1bmN0aW9uKGMsZSl7dmFyIGg9ZS5kYXRhKFwiJHVpVmlld1wiKTtpZihoKXtlLmh0bWwoaC4kdGVtcGxhdGV8fGQpLGcudHJhY2UudHJhY2VVaVZpZXdGaWxsKGgsZS5odG1sKCkpO3ZhciBpPWEoZS5jb250ZW50cygpKSxqPWguJGNvbnRyb2xsZXIsaz1oLiRjb250cm9sbGVyQXM7aWYoail7dmFyIGw9aC4kbG9jYWxzLG09YihqLGYuZXh0ZW5kKGwseyRzY29wZTpjfSkpO2smJihjW2tdPW0pLGUuZGF0YShcIiRuZ0NvbnRyb2xsZXJDb250cm9sbGVyXCIsbSksZS5jaGlsZHJlbigpLmRhdGEoXCIkbmdDb250cm9sbGVyQ29udHJvbGxlclwiLG0pfWkoYyl9fX19fXZhciBmPWMoMyksZz1jKDYpO2QuJGluamVjdD1bXCIkdmlld1wiLFwiJGFuaW1hdGVcIixcIiR1aVZpZXdTY3JvbGxcIixcIiRpbnRlcnBvbGF0ZVwiLFwiJHFcIl0sZS4kaW5qZWN0PVtcIiRjb21waWxlXCIsXCIkY29udHJvbGxlclwiLFwiJGludGVycG9sYXRlXCIsXCIkaW5qZWN0b3JcIixcIiRxXCJdLGFuZ3VsYXIubW9kdWxlKFwidWkucm91dGVyLnN0YXRlXCIpLmRpcmVjdGl2ZShcInVpVmlld1wiLGQpLGFuZ3VsYXIubW9kdWxlKFwidWkucm91dGVyLnN0YXRlXCIpLmRpcmVjdGl2ZShcInVpVmlld1wiLGUpfSxmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXt2YXIgYT0hMTt0aGlzLnVzZUFuY2hvclNjcm9sbD1mdW5jdGlvbigpe2E9ITB9LHRoaXMuJGdldD1bXCIkYW5jaG9yU2Nyb2xsXCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGE/YjpmdW5jdGlvbihhKXtyZXR1cm4gYyhmdW5jdGlvbigpe2FbMF0uc2Nyb2xsSW50b1ZpZXcoKX0sMCwhMSl9fV19YW5ndWxhci5tb2R1bGUoXCJ1aS5yb3V0ZXIuc3RhdGVcIikucHJvdmlkZXIoXCIkdWlWaWV3U2Nyb2xsXCIsYyl9XSl9KTsiXSwiZmlsZSI6ImFuZ3VsYXItdWktcm91dGVyLm1pbi5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
