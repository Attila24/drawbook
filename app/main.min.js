!function e(r,t,o){function n(a,i){if(!t[a]){if(!r[a]){var l="function"==typeof require&&require;if(!i&&l)return l(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[a]={exports:{}};r[a][0].call(c.exports,function(e){var t=r[a][1][e];return n(t?t:e)},c,c.exports,e,r,t,o)}return t[a].exports}var s="function"==typeof require&&require;for(var a=0;a<o.length;a++)n(o[a]);return n}({1:[function(e,r,t){!function(){"use strict";function e(e,r){e.baseUrl=r.url;e.signupUrl="/users/register";e.loginUrl="/users/login"}e.$inject=["$authProvider","server"];r.exports=e}()},{}],2:[function(e,r,t){!function(){"use strict";r.exports={url:"http://localhost:5000/api/"}}()},{}],3:[function(e,r,t){!function(){"use strict";angular.module("drawbook",["ngAnimate","ui.router","mgcrea.ngStrap","satellizer","LocalStorageModule"]).constant("server",e("./app.constants")).factory("UserService",e("./app/services/UserService")).factory("ImageService",e("./app/services/ImageService")).config(e("./app.routes")).config(e("./app.auth"))}()},{"./app.auth":1,"./app.constants":2,"./app.routes":4,"./app/services/ImageService":10,"./app/services/UserService":11}],4:[function(e,r,t){!function(){"use strict";function t(r,t,o){r.state("home",{url:"/",templateUrl:"/app/common/home.tpl.html",controller:e("./app/common/HomeController"),controllerAs:"vm"}).state("register",{url:"/register",templateUrl:"/app/common/register.tpl.html",controller:e("./app/common/RegisterController"),controllerAs:"vm"}).state("login",{url:"/login",templateUrl:"/app/common/login.tpl.html",controller:e("./app/common/LoginController"),controllerAs:"vm"}).state("draw",{url:"/draw",templateUrl:"/app/draw/draw.tpl.html",controller:e("./app/draw/DrawController"),controllerAs:"vm"}).state("edit",{url:"/edit",templateUrl:"/app/common/profile-edit.tpl.html",controller:e("./app/common/ProfileEditController"),controllerAs:"vm"}).state("user",{"abstract":!0,url:"/:username",templateUrl:"/app/user/user.tpl.html",controller:e("./app/user/UserController"),controllerAs:"vm",resolve:{user:["$stateParams","UserService",function(e,r){return r.get(e.username)}]}}).state("user.gallery",{url:"/",templateUrl:"/app/user/user.gallery.tpl.html",controller:e("./app/user/UserGalleryController"),controllerAs:"vm"}).state("user.image",{url:"/image/:id",params:{index:null},onEnter:["$modal","$state","user",function(r,t,o){r({templateUrl:"/app/user/user.image.tpl.html",controller:e("./app/user/UserImageController"),controllerAs:"vm",resolve:{user:function(){return o}},onHide:function(){console.log("hide");t.go("user.gallery({username: user.username})")}})}]});t.otherwise("/");o.html5Mode(!0)}t.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"];r.exports=t}()},{"./app/common/HomeController":5,"./app/common/LoginController":6,"./app/common/ProfileEditController":7,"./app/common/RegisterController":8,"./app/draw/DrawController":9,"./app/user/UserController":12,"./app/user/UserGalleryController":13,"./app/user/UserImageController":14}],5:[function(e,r,t){!function(){"use strict";function e(e,r){function t(){return e.isAuthenticated()}function o(){e.logout();r.remove("currentUser")}var n=this;n.title="HomeController";n.user=r.get("currentUser");n.isAuthenticated=t;n.logout=o}angular.module("drawbook").controller("HomeController",e);e.$inject=["$auth","localStorageService"];r.exports=e}()},{}],6:[function(e,r,t){!function(){"use strict";function e(e,r,t){function o(){var o={username:n.user.name,password:n.user.password};r.login(o).then(function(r){t.set("currentUser",r.data.user);e.go("home")})["catch"](function(e){console.log("error: "+e);n.incorrectLogin=!0})}var n=this;n.title="LoginController";n.login=o;n.incorrectLogin=!1}angular.module("drawbook").controller("LoginController",e);e.$inject=["$state","$auth","localStorageService"];r.exports=e}()},{}],7:[function(e,r,t){!function(){"use strict";function e(e,r,t){function o(){t.get(r.get("currentUser").username).then(function(e){s.user=e.user})["catch"](function(e){})}function n(){t.update(s.user);e.go("home")}var s=this;s.title="ProfileEditController";s.edit=n;s.genders=["Male","Female"];o()}angular.module("drawbook").controller("ProfileEditController",e);e.$inject=["$state","localStorageService","UserService"];r.exports=e}()},{}],8:[function(e,r,t){!function(){"use strict";function e(e,r,t,o){function n(){t.get(a.user.username).then(function(e){a.takenUsername=null!=e.user})["catch"](function(e){console.log("Server problem")})}function s(){var t={username:a.user.username,password:a.user.password,firstName:a.user.firstName,lastName:a.user.lastName,age:a.user.age,gender:a.user.gender};r.signup(t).then(function(n){console.log(n);o.set("currentUser",n.data.user);r.login(t).then(function(r){e.go("home")})["catch"](function(e){console.log("Error "+e)})})["catch"](function(e){console.log("Error "+e)})}var a=this;a.title="RegisterController";a.genders=["Male","Female"];a.takenUsername=!1;a.checkUsername=n;a.register=s}angular.module("drawbook").controller("RegisterController",e);e.$inject=["$state","$auth","UserService","localStorageService"];r.exports=e}()},{}],9:[function(e,r,t){!function(){"use strict";function e(e,r,t){function o(){var o=$("<canvas>").attr({width:600,height:600});var n=o[0].getContext("2d");var s=[];$(".canvas").each(function(){s.push({canvas:$(this),zindex:parseInt($(this).css("z-index"))})});s.sort(function(e,r){return e.zindex-r.zindex});for(var a=0;a<s.length;a++)n.drawImage(s[a].canvas[0],0,0);var i=o[0].toDataURL();var l=r.get("currentUser").username;t.post(l,i).then(function(r){e.go("home")})["catch"](function(e){})}var n=this;n.title="DrawController";n.saveImage=o}angular.module("drawbook").controller("DrawController",e);e.$inject=["$state","localStorageService","ImageService"];r.exports=e}()},{}],10:[function(e,r,t){!function(){"use strict";function e(e,r,t){return{get:function(o,n){var s=e.defer();r({method:"GET",url:t.url+"users/"+o+"/images/"+n,headers:{"Content-Type":"images/png"}}).then(function(e){s.resolve({data:e,id:n})},function(e){s.reject(e)});return s.promise},post:function(o,n){var s=e.defer();r.post(t.url+"users/"+o+"/images/",{title:"teszt kep",image:n}).success(function(e){s.resolve(e)}).error(function(e){s.reject("rejected: "+e)});return s.promise},"delete":function(o,n){var s=e.defer();r["delete"](t.url+"users/"+n+"/images/"+o).success(function(e){s.resolve(e)}).error(function(e){s.reject("rejected: "+e)});return s.promise}}}e.$inject=["$q","$http","server"];r.exports=e}()},{}],11:[function(e,r,t){!function(){"use strict";function e(e,r,t){return{get:function(o){var n=e.defer();r.get(t.url+"users/"+o).success(function(e){n.resolve(e)}).error(function(e){n.reject("rejected: "+e)});return n.promise},update:function(o){var n=e.defer;r.patch(t.url+"users/"+o.username,{user:o}).success(function(e){}).error(function(e){n.reject("rejected: "+e)});return n.promise}}}e.$inject=["$q","$http","server"];r.exports=e}()},{}],12:[function(e,r,t){!function(){"use strict";function e(e,r,t,o){var n=this;n.title="UserController";n.images=[];n.user=o.user}angular.module("drawbook").controller("UserController",e);e.$inject=["$stateParams","UserService","ImageService","user"];r.exports=e}()},{}],13:[function(e,r,t){!function(){"use strict";function e(e,r){function t(){n.loaded=n.user.images.length<s?n.user.images.length:s;for(var e=0;e<n.loaded;e++)r.get(n.user.username,n.user.images[e]._id).then(function(e){n.images.push(e.data.data)})["catch"](function(e){})}function o(){console.log("asd");n.current=n.loaded;n.loaded=n.user.images.length<n.loaded+s?n.user.images.length:n.loaded+s;console.log("current: "+n.current);console.log("loaded: "+n.loaded);for(var e=n.current;e<n.loaded;e++)r.get(n.user.username,n.user.images[e]._id).then(function(e){n.images.push(e.data.data)})["catch"](function(e){});console.log(n.images)}var n=this;n.title="UserGalleryController";n.user=e.user;n.images=[];const s=12;n.loadMore=o;t()}angular.module("drawbook").controller("UserGalleryController",e);e.$inject=["user","ImageService"];r.exports=e}()},{}],14:[function(e,r,t){!function(){"use strict";function e(e,r,t){function o(){void 0!==n.index&&null!==n.index||(n.index=n.user.images.map(function(e){return e._id}).indexOf(e.id));if(1==n.user.images.length)n.prev=n.next=void 0;else if(0==n.index){n.next=n.user.images[n.index+1]._id;n.prev=void 0}else if(n.index>0&&n.index<n.user.images.length-1){n.prev=n.user.images[n.index-1]._id;n.next=n.user.images[n.index+1]._id}else if(n.index==n.user.images.length-1){n.prev=n.user.images[n.index-1]._id;n.next=void 0}r.get(n.user.username,e.id).then(function(e){n.image=e.data.data})["catch"](function(e){})}var n=this;n.title="UserImageController";n.user=t.user;n.index=e.index;o()}angular.module("drawbook").controller("UserImageController",e);e.$inject=["$stateParams","ImageService","user"];r.exports=e}()},{}]},{},[3]);
//# sourceMappingURL=main.min.js.map
